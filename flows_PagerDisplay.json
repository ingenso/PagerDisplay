[{"id":"6a0a5372.58851c","type":"tab","label":"Receive Page","disabled":false},{"id":"b35cd955.089358","type":"tab","label":"Send Page"},{"id":"7064f3a.3a30e0c","type":"tab","label":"User Management","disabled":false,"info":""},{"id":"d38e360e.d0a058","type":"tab","label":"Setup","disabled":false},{"id":"4e0e89ca.492d38","type":"tab","label":"Initial Setup","disabled":false,"info":""},{"id":"ce748393.37497","type":"tab","label":"Lock Pages","disabled":false,"info":""},{"id":"76afc1e7.1d414","type":"tab","label":"Engineer","disabled":false,"info":""},{"id":"c868d95d.03e038","type":"tab","label":"Tab Shortcuts","disabled":false,"info":""},{"id":"8c7d0b53.334a48","type":"subflow","name":"Send Page","info":"","in":[{"x":220,"y":160,"wires":[{"id":"97a19b23.491028"},{"id":"e2c75b3b.dfdc48"},{"id":"55cb1870.8551c8"},{"id":"29f5d4c1.9af61c"},{"id":"f39192e4.06a5e"}]}],"out":[]},{"id":"94344cec.b71e4","type":"ui_base","z":0,"theme":{"name":"theme-dark","lightTheme":{"default":"#0094CE","baseColor":"#0094CE","baseFont":"-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen-Sans,Ubuntu,Cantarell,Helvetica Neue,sans-serif","edited":true,"reset":false},"darkTheme":{"default":"#097479","baseColor":"#097479","baseFont":"-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen-Sans,Ubuntu,Cantarell,Helvetica Neue,sans-serif","edited":true,"reset":false},"customTheme":{"name":"Untitled Theme 1","default":"#4B7930","baseColor":"#4B7930","baseFont":"-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen-Sans,Ubuntu,Cantarell,Helvetica Neue,sans-serif"},"themeState":{"base-color":{"default":"#097479","value":"#097479","edited":false},"page-titlebar-backgroundColor":{"value":"#097479","edited":false},"page-backgroundColor":{"value":"#111111","edited":false},"page-sidebar-backgroundColor":{"value":"#000000","edited":false},"group-textColor":{"value":"#0eb8c0","edited":false},"group-borderColor":{"value":"#555555","edited":false},"group-backgroundColor":{"value":"#333333","edited":false},"widget-textColor":{"value":"#eeeeee","edited":false},"widget-backgroundColor":{"value":"#097479","edited":false},"widget-borderColor":{"value":"#333333","edited":false},"base-font":{"value":"-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen-Sans,Ubuntu,Cantarell,Helvetica Neue,sans-serif"}}},"site":{"name":"Pager Control","hideToolbar":"true","allowSwipe":"false","dateFormat":"DD/MM/YYYY","sizes":{"sx":48,"sy":48,"gx":6,"gy":6,"cx":6,"cy":6,"px":0,"py":0}}},{"id":"22d4d803.688cb8","type":"ui_tab","z":0,"name":"Send","icon":"fa-paper-plane","order":7},{"id":"e62b4456.4e29b8","type":"ui_tab","z":0,"name":"Settings","icon":"fa-cog","order":8},{"id":"38a1ab0b.239a94","type":"ui_tab","z":0,"name":"Startup","icon":"dashboard","order":1},{"id":"a9e39f72.184aa","type":"ui_group","z":"","name":"Free Text","tab":"22d4d803.688cb8","order":1,"disp":true,"width":"13","collapse":false},{"id":"4efb444f.e866ec","type":"ui_group","z":"","name":"Preset Message","tab":"22d4d803.688cb8","order":2,"disp":true,"width":"13","collapse":false},{"id":"480c3a6e.4ee6d4","type":"ui_group","z":"","name":"Text Sizes","tab":"e62b4456.4e29b8","order":7,"disp":false,"width":"6","collapse":false},{"id":"f2b23ffd.ffc66","type":"ui_group","z":"","name":"Quick Message","tab":"c0531bbc.f442e8","order":4,"disp":false,"width":"14","collapse":false},{"id":"294daf05.76129","type":"ui_group","z":"","name":"User Management","tab":"e62b4456.4e29b8","order":1,"disp":false,"width":"13","collapse":false},{"id":"c3c82420.e70868","type":"ui_group","z":"","name":"Quick Message Settings","tab":"e62b4456.4e29b8","order":6,"disp":false,"width":"7","collapse":false},{"id":"37c6d8b3.3bbe78","type":"ui_group","z":"","name":"Preset Message Settings","tab":"e62b4456.4e29b8","order":5,"disp":false,"width":"6","collapse":false},{"id":"ae13bd2b.c1248","type":"ui_group","z":"","name":"Messsage Log","tab":"8621b915.ffc6d8","order":2,"disp":true,"width":"14","collapse":false},{"id":"dfc5d4c9.3d5458","type":"ui_group","z":"","name":"New Password","tab":"e62b4456.4e29b8","order":8,"disp":false,"width":"13","collapse":false},{"id":"6b64a97d.831898","type":"ui_group","z":"","name":"Buttons","tab":"65ef1c77.ed03e4","order":1,"disp":false,"width":"8","collapse":false},{"id":"3bc126e9.fdb96a","type":"ui_group","z":"","name":"Start Up","tab":"38a1ab0b.239a94","disp":false,"width":"14","collapse":false},{"id":"48facf19.f3141","type":"MySQLdatabase","z":"","host":"localhost","port":"3306","db":"settings","tz":""},{"id":"cb77a97f.05f038","type":"MySQLdatabase","z":"","host":"127.0.0.1","port":"3306","db":"","tz":""},{"id":"8aca8e0e.b4d8f","type":"serial-port","z":0,"serialport":"/dev/ttyUSB0","serialbaud":"9600","databits":"8","parity":"none","stopbits":"1","newline":"\\r","bin":"false","out":"char","addchar":false},{"id":"3dda2ef5.92d112","type":"serial-port","z":0,"serialport":"/dev/ttyUSB0","serialbaud":"9600","databits":"8","parity":"none","stopbits":"1","newline":"0","bin":"false","out":"time","addchar":false},{"id":"5c35d2ca.6e23cc","type":"serial-port","z":"","serialport":"/dev/ttyS0","serialbaud":"19200","databits":"8","parity":"none","stopbits":"1","newline":"\\n","bin":"false","out":"char","addchar":true},{"id":"4fb50e08.97897","type":"ui_group","z":"","name":"Pager Management","tab":"e62b4456.4e29b8","order":2,"disp":false,"width":"13","collapse":false},{"id":"1cf7788.47cef88","type":"ui_tab","z":"","name":"Lock","icon":"dashboard","order":2},{"id":"2f444df3.abb892","type":"ui_group","z":"","name":"Keypad","tab":"1cf7788.47cef88","disp":false,"width":"6","collapse":false},{"id":"65ef1c77.ed03e4","type":"ui_tab","z":"","name":"Menu","icon":"dashboard","order":3},{"id":"8621b915.ffc6d8","type":"ui_tab","z":"","name":"Receive","icon":"dashboard","order":5},{"id":"8a88b548.882b18","type":"ui_tab","z":"","name":"SettingsLock","icon":"dashboard","order":4},{"id":"1c5684d5.0e8f2b","type":"ui_group","z":"","name":"keypad","tab":"8a88b548.882b18","disp":false,"width":"6","collapse":false},{"id":"c0531bbc.f442e8","type":"ui_tab","z":"","name":"quick","icon":"dashboard","order":6},{"id":"ae3799bd.abc7d8","type":"ui_group","z":"","name":"home","tab":"22d4d803.688cb8","order":3,"disp":false,"width":"1","collapse":false},{"id":"d5b281a9.c5e04","type":"ui_group","z":"","name":"home","tab":"e62b4456.4e29b8","order":9,"disp":false,"width":"1","collapse":false},{"id":"d8c4dce.6a77d2","type":"ui_tab","z":"","name":"SettingsPin","icon":"dashboard","order":9},{"id":"f3971887.5ce618","type":"ui_tab","z":"","name":"LockPin","icon":"dashboard","order":10},{"id":"4397ce70.bb04e","type":"ui_group","z":"","name":"Group 1","tab":"d8c4dce.6a77d2","order":1,"disp":false,"width":"6","collapse":false},{"id":"495909b6.a97da8","type":"ui_group","z":"","name":"Group 1","tab":"f3971887.5ce618","order":1,"disp":false,"width":"6","collapse":false},{"id":"9b0f996a.6b3848","type":"ui_tab","z":"","name":"UserManagement","icon":"dashboard","order":11},{"id":"383d123a.fcaa5e","type":"ui_group","z":"","name":"Login","tab":"9b0f996a.6b3848","order":1,"disp":true,"width":"13","collapse":true},{"id":"90954bd.aeb17b8","type":"ui_group","z":"","name":"Logout","tab":"9b0f996a.6b3848","order":3,"disp":true,"width":"13","collapse":true},{"id":"5bf95f8b.69b7","type":"ui_group","z":"","name":"Buttons","tab":"9b0f996a.6b3848","order":4,"disp":false,"width":"1","collapse":false},{"id":"f6560977.922338","type":"ui_tab","z":"","name":"Engineer","icon":"dashboard","order":13},{"id":"4b494801.afac08","type":"ui_group","z":"","name":"Settings","tab":"f6560977.922338","disp":true,"width":"6","collapse":false},{"id":"a9554c6b.c643b","type":"ui_tab","z":"","name":"ClearPages","icon":"dashboard","order":14},{"id":"97a7f741.5cbb08","type":"ui_group","z":"","name":"Group 1","tab":"a9554c6b.c643b","order":1,"disp":false,"width":"6","collapse":false},{"id":"a9031dc0.02a0e","type":"ui_tab","z":"","name":"Users","icon":"dashboard","order":12},{"id":"40e3a022.7bd1c","type":"ui_group","z":"","name":"Currently Deployed","tab":"a9031dc0.02a0e","order":2,"disp":false,"width":"14","collapse":false},{"id":"78c1c24d.2b9e7c","type":"ui_group","z":"","name":"Buttons","tab":"a9031dc0.02a0e","order":1,"disp":false,"width":"14","collapse":false},{"id":"1af09e9.b978c61","type":"ui_group","z":"","name":"Assign to Group","tab":"e62b4456.4e29b8","order":2,"disp":false,"width":"6","collapse":false},{"id":"ec180bb9.46ea98","type":"ui_group","z":"","name":"Group 4","tab":"9b0f996a.6b3848","order":4,"disp":false,"width":"13","collapse":false},{"id":"76f12122.4cb25","type":"ui_group","z":"","name":"Alias","tab":"e62b4456.4e29b8","order":3,"disp":false,"width":"6","collapse":false},{"id":"1fb7dd0f.f1eb93","type":"ui_group","z":"","name":"GroupManagement","tab":"e62b4456.4e29b8","order":4,"disp":false,"width":"6","collapse":false},{"id":"d35fd40d.344cf8","type":"change","z":"b35cd955.089358","name":"","rules":[{"t":"set","p":"freemessage","pt":"flow","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":780,"y":140,"wires":[[]]},{"id":"8e236395.f64cb","type":"function","z":"6a0a5372.58851c","name":"Format Pager Message","func":"var str = msg.payload;\nvar pager = str.substring(8,15);\nvar length = str.length - 1;\nvar message = str.substring(16,length);\nmsg.pager = pager;\nmsg.message = message;\nreturn msg;","outputs":1,"noerr":0,"x":290,"y":140,"wires":[["260457d3.e90748"]]},{"id":"260457d3.e90748","type":"switch","z":"6a0a5372.58851c","name":"Receive Capcode","property":"pager","propertyType":"msg","rules":[{"t":"eq","v":"0707288","vt":"str"},{"t":"eq","v":"7000016","vt":"str"},{"t":"else"}],"checkall":"true","repair":false,"outputs":3,"x":510,"y":140,"wires":[["8e9fe353.bca8e","43da3194.c22d1"],["8e9fe353.bca8e","43da3194.c22d1"],[]]},{"id":"3574f737.6b5878","type":"link in","z":"b35cd955.089358","name":"Recepient","links":["2268701b.44d2a","58ddfc32.be0324","c2846650.ddf7b8","66e12dd5.727374"],"x":155,"y":80,"wires":[["fb334bf.2001bb8"]]},{"id":"ed23b0c2.2e54","type":"comment","z":"d38e360e.d0a058","name":"Text Size","info":"","x":100,"y":40,"wires":[]},{"id":"93d7cec2.496d1","type":"change","z":"b35cd955.089358","name":"","rules":[{"t":"set","p":"cc","pt":"global","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":410,"y":60,"wires":[[]]},{"id":"eb2ade9e.4735f","type":"change","z":"b35cd955.089358","name":"","rules":[{"t":"set","p":"capcode","pt":"msg","to":"cc","tot":"global"}],"action":"","property":"","from":"","to":"","reg":false,"x":590,"y":180,"wires":[["7bca25.df2a15dc"]]},{"id":"a6eec8ac.a02d08","type":"comment","z":"b35cd955.089358","name":"Free Text","info":"","x":240,"y":40,"wires":[]},{"id":"ace17b32.07e718","type":"comment","z":"b35cd955.089358","name":"Quick Message","info":"","x":120,"y":460,"wires":[]},{"id":"e496e015.227e7","type":"change","z":"b35cd955.089358","name":"","rules":[{"t":"set","p":"dropdown","pt":"global","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":1340,"y":100,"wires":[[]]},{"id":"a24d8225.9b83f","type":"change","z":"b35cd955.089358","name":"","rules":[{"t":"set","p":"capcode","pt":"msg","to":"ccdd","tot":"global"}],"action":"","property":"","from":"","to":"","reg":false,"x":1330,"y":140,"wires":[["b935eaf.d5fe218"]]},{"id":"ce0689e1.319a88","type":"comment","z":"b35cd955.089358","name":"Dropdown List","info":"","x":1130,"y":20,"wires":[]},{"id":"8c268dc3.83b65","type":"change","z":"d38e360e.d0a058","name":"","rules":[{"t":"set","p":"font.message","pt":"global","to":"payload.message","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":670,"y":120,"wires":[["c6f52e2c.75b6e"]]},{"id":"8f36e530.886c38","type":"change","z":"6a0a5372.58851c","name":"","rules":[{"t":"set","p":"font","pt":"msg","to":"font.message","tot":"global"}],"action":"","property":"","from":"","to":"","reg":false,"x":1330,"y":300,"wires":[["3680aa23.e6d6e6"]]},{"id":"d1fdde55.97b2c","type":"change","z":"6a0a5372.58851c","name":"","rules":[{"t":"set","p":"font","pt":"msg","to":"font.info","tot":"global"}],"action":"","property":"","from":"","to":"","reg":false,"x":1330,"y":260,"wires":[["dba073a0.2ded7"]]},{"id":"675758b2.6715a8","type":"change","z":"d38e360e.d0a058","name":"","rules":[{"t":"set","p":"font.info","pt":"global","to":"payload.info","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":650,"y":80,"wires":[["1ac9781e.952298"]]},{"id":"4086171d.7dd528","type":"link in","z":"d38e360e.d0a058","name":"Recepient","links":["b27d6a40.f02cb8"],"x":495,"y":300,"wires":[["8dad6d1b.76c69"]]},{"id":"9b18a638.450b88","type":"change","z":"d38e360e.d0a058","name":"","rules":[{"t":"set","p":"button","pt":"flow","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":820,"y":300,"wires":[[]]},{"id":"5237965b.246508","type":"change","z":"d38e360e.d0a058","name":"","rules":[{"t":"set","p":"user","pt":"flow","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":810,"y":340,"wires":[[]]},{"id":"93eff39b.60eb6","type":"change","z":"d38e360e.d0a058","name":"","rules":[{"t":"set","p":"label","pt":"flow","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":810,"y":380,"wires":[[]]},{"id":"bf8a3cd5.c43b4","type":"change","z":"d38e360e.d0a058","name":"","rules":[{"t":"set","p":"message","pt":"flow","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":830,"y":420,"wires":[[]]},{"id":"92c038d7.37bb38","type":"change","z":"d38e360e.d0a058","name":"","rules":[{"t":"set","p":"bcolor","pt":"flow","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":820,"y":460,"wires":[[]]},{"id":"ac044f9d.ec54d","type":"change","z":"d38e360e.d0a058","name":"","rules":[{"t":"set","p":"tcolor","pt":"flow","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":820,"y":500,"wires":[[]]},{"id":"3ac9abcb.092ab4","type":"template","z":"d38e360e.d0a058","name":"","field":"topic","fieldType":"msg","format":"handlebars","syntax":"mustache","template":"UPDATE messages\nSET user = '{{flow.user}}', label= '{{flow.label}}', message= '{{flow.message}}', bcolor= '{{flow.bcolor}}', tcolor= '{{flow.tcolor}}', size= '{{flow.size}}'\nWHERE button = {{flow.button}};","output":"str","x":790,"y":580,"wires":[["99dc7311.717e","3330f9c.0d2e906"]]},{"id":"40c9f59e.276c0c","type":"template","z":"d38e360e.d0a058","name":"","field":"topic","fieldType":"msg","format":"handlebars","syntax":"mustache","template":"SELECT * FROM messages\nWHERE button={{payload}};","output":"str","x":790,"y":260,"wires":[["b218bbbd.9ef9c8"]]},{"id":"83d9b4f7.1f8898","type":"split","z":"d38e360e.d0a058","name":"","splt":"\\n","spltType":"str","arraySplt":1,"arraySpltType":"len","stream":false,"addname":"","x":270,"y":440,"wires":[["5e4859b7.2f7bd8","e80f63e6.efd87","aeb4900f.8bde2","1fb4cd92.d44cd2","113ae940.7348b7","7469d0ab.d2674"]]},{"id":"5e4859b7.2f7bd8","type":"change","z":"d38e360e.d0a058","name":"","rules":[{"t":"set","p":"payload","pt":"msg","to":"payload.user","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":440,"y":340,"wires":[["8dad6d1b.76c69"]]},{"id":"e80f63e6.efd87","type":"change","z":"d38e360e.d0a058","name":"","rules":[{"t":"set","p":"payload","pt":"msg","to":"payload.label","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":440,"y":380,"wires":[["275fa1bc.1304ae"]]},{"id":"aeb4900f.8bde2","type":"change","z":"d38e360e.d0a058","name":"","rules":[{"t":"set","p":"payload","pt":"msg","to":"payload.message","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":440,"y":420,"wires":[["7e045522.0fe1fc"]]},{"id":"1fb4cd92.d44cd2","type":"change","z":"d38e360e.d0a058","name":"","rules":[{"t":"set","p":"payload","pt":"msg","to":"payload.bcolor","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":440,"y":460,"wires":[["51e92bd8.ef72b4"]]},{"id":"113ae940.7348b7","type":"change","z":"d38e360e.d0a058","name":"","rules":[{"t":"set","p":"payload","pt":"msg","to":"payload.tcolor","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":440,"y":500,"wires":[["f48edec5.e4ef4"]]},{"id":"dc18bae3.79ace8","type":"comment","z":"d38e360e.d0a058","name":"Quick Buttons","info":"","x":290,"y":280,"wires":[]},{"id":"2072aa8.fbd5456","type":"template","z":"b35cd955.089358","name":"","field":"topic","fieldType":"msg","format":"handlebars","syntax":"mustache","template":"SELECT * FROM messages;","output":"str","x":150,"y":520,"wires":[["804a0355.1d2cb"]]},{"id":"cb704aae.603df8","type":"link in","z":"b35cd955.089358","name":"Messaging","links":["5ec63122.4048d"],"x":60,"y":520,"wires":[["2072aa8.fbd5456"]]},{"id":"5ec63122.4048d","type":"link out","z":"d38e360e.d0a058","name":"Messaging","links":["cb704aae.603df8"],"x":755,"y":620,"wires":[]},{"id":"71910dc3.e93224","type":"split","z":"b35cd955.089358","name":"","splt":"\\n","spltType":"str","arraySplt":1,"arraySpltType":"len","stream":false,"addname":"","x":410,"y":520,"wires":[["aa282c4e.a623b"]]},{"id":"aa282c4e.a623b","type":"switch","z":"b35cd955.089358","name":"","property":"payload.button","propertyType":"msg","rules":[{"t":"eq","v":"1","vt":"str"},{"t":"eq","v":"2","vt":"str"},{"t":"eq","v":"3","vt":"str"},{"t":"eq","v":"4","vt":"str"}],"checkall":"true","repair":false,"outputs":4,"x":530,"y":520,"wires":[["dbfdc1b1.e7cbd"],["93f4dbfd.6f2be8"],["5bb04f47.127f8"],["ababb22d.61f28"]]},{"id":"3330f9c.0d2e906","type":"function","z":"d38e360e.d0a058","name":"Clear Settings","func":"context.flow.button = null;\ncontext.flow.user = null;\ncontext.flow.label = null;\ncontext.flow.message = null;\ncontext.flow.bcolor = null;\ncontext.flow.tcolor = null;\nreturn msg;","outputs":1,"noerr":0,"x":1000,"y":540,"wires":[[]]},{"id":"4a4ce425.3069dc","type":"function","z":"b35cd955.089358","name":"","func":"var message = context.global.message1;\nvar capcode = context.global.user1;\nmsg.payload = message;\nmsg.capcode = capcode;\nreturn msg;","outputs":1,"noerr":0,"x":1190,"y":460,"wires":[["373ad097.4b677"]]},{"id":"dbfdc1b1.e7cbd","type":"change","z":"b35cd955.089358","name":"","rules":[{"t":"set","p":"message1","pt":"global","to":"payload.message","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":720,"y":460,"wires":[["9c86249e.fcccc8"]]},{"id":"93f4dbfd.6f2be8","type":"change","z":"b35cd955.089358","name":"","rules":[{"t":"set","p":"message2","pt":"global","to":"payload.message","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":720,"y":500,"wires":[["71d844e8.90283c"]]},{"id":"5bb04f47.127f8","type":"change","z":"b35cd955.089358","name":"","rules":[{"t":"set","p":"message3","pt":"global","to":"payload.message","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":720,"y":540,"wires":[["8b597969.d17128"]]},{"id":"ababb22d.61f28","type":"change","z":"b35cd955.089358","name":"","rules":[{"t":"set","p":"message4","pt":"global","to":"payload.message","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":720,"y":580,"wires":[["c11c97d9.28fb28"]]},{"id":"9c86249e.fcccc8","type":"change","z":"b35cd955.089358","name":"","rules":[{"t":"set","p":"user1","pt":"global","to":"payload.user","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":920,"y":460,"wires":[["8dace02.d8da92"]]},{"id":"71d844e8.90283c","type":"change","z":"b35cd955.089358","name":"","rules":[{"t":"set","p":"user2","pt":"global","to":"payload.user","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":920,"y":500,"wires":[["789ecc22.06e4a4"]]},{"id":"8b597969.d17128","type":"change","z":"b35cd955.089358","name":"","rules":[{"t":"set","p":"user3","pt":"global","to":"payload.user","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":920,"y":540,"wires":[["5d2137e3.75b148"]]},{"id":"9903a908.09dc08","type":"function","z":"b35cd955.089358","name":"","func":"var message = context.global.message2;\nvar capcode = context.global.user2;\nmsg.payload = message;\nmsg.capcode = capcode;\nreturn msg;","outputs":1,"noerr":0,"x":1190,"y":500,"wires":[["373ad097.4b677"]]},{"id":"227f57f7.1394a8","type":"function","z":"b35cd955.089358","name":"","func":"var message = context.global.message3;\nvar capcode = context.global.user3;\nmsg.payload = message;\nmsg.capcode = capcode;\nreturn msg;","outputs":1,"noerr":0,"x":1190,"y":540,"wires":[["373ad097.4b677"]]},{"id":"ad8ed42b.5cc198","type":"function","z":"b35cd955.089358","name":"","func":"var message = context.global.message4;\nvar capcode = context.global.user4;\nmsg.payload = message;\nmsg.capcode = capcode;\nreturn msg;","outputs":1,"noerr":0,"x":1190,"y":580,"wires":[["373ad097.4b677"]]},{"id":"10662b01.781ff5","type":"link in","z":"b35cd955.089358","name":"Recepient","links":["ba308df3.8bc9","2268701b.44d2a","5185f8b2.fde048","ea9c2c85.22799","2bc5a762.6a16d8","58ddfc32.be0324","c2846650.ddf7b8","66e12dd5.727374"],"x":1075,"y":60,"wires":[["4747b2c9.73ab7c"]]},{"id":"7f1d3c15.0fd634","type":"change","z":"b35cd955.089358","name":"","rules":[{"t":"set","p":"ccdd","pt":"global","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":1320,"y":60,"wires":[[]]},{"id":"c92944be.3597a8","type":"link in","z":"b35cd955.089358","name":"dropdown","links":["55675104.d8672"],"x":1075,"y":100,"wires":[["2109d315.11cd5c"]]},{"id":"3afec725.737d68","type":"comment","z":"d38e360e.d0a058","name":"Dropdown Message Setup","info":"","x":270,"y":700,"wires":[]},{"id":"89cd5bd8.2ece38","type":"json","z":"d38e360e.d0a058","name":"","property":"payload","action":"obj","pretty":false,"x":750,"y":1000,"wires":[["ce46b774.ed1938"]]},{"id":"64190393.632f5c","type":"function","z":"d38e360e.d0a058","name":"","func":"context.global.userarraymessage = [];\nreturn msg;","outputs":1,"noerr":0,"x":490,"y":1040,"wires":[[]]},{"id":"55675104.d8672","type":"link out","z":"d38e360e.d0a058","name":"dropdown","links":["c92944be.3597a8"],"x":1155,"y":960,"wires":[]},{"id":"6c73710a.cf97b","type":"template","z":"d38e360e.d0a058","name":"","field":"topic","fieldType":"msg","format":"handlebars","syntax":"mustache","template":"INSERT INTO dropdown (message)\nVALUES ('{{payload}}');","output":"str","x":370,"y":920,"wires":[["f6258db6.b6fa4"]]},{"id":"e467de22.3061f","type":"switch","z":"d38e360e.d0a058","name":"","property":"error.message","propertyType":"msg","rules":[{"t":"cont","v":"Duplicate","vt":"str"}],"checkall":"true","repair":false,"outputs":1,"x":510,"y":880,"wires":[["5b344052.0e97b"]]},{"id":"5b344052.0e97b","type":"change","z":"d38e360e.d0a058","name":"","rules":[{"t":"set","p":"payload","pt":"msg","to":"Message Already Exists! ","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":660,"y":880,"wires":[["e3bd08d5.a907f8"]]},{"id":"258ea4a1.60230c","type":"change","z":"d38e360e.d0a058","name":"","rules":[{"t":"set","p":"payload","pt":"msg","to":"Successfully Added","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":800,"y":920,"wires":[["9c6b53b8.62904"]]},{"id":"4d03cd44.2389c4","type":"catch","z":"d38e360e.d0a058","name":"","scope":["f6258db6.b6fa4"],"x":380,"y":880,"wires":[["e467de22.3061f"]]},{"id":"b5d3bd21.8b397","type":"template","z":"d38e360e.d0a058","name":"","field":"topic","fieldType":"msg","format":"handlebars","syntax":"mustache","template":"SELECT * FROM dropdown;","output":"str","x":370,"y":1000,"wires":[["b003cf7f.7dfb2","64190393.632f5c"]]},{"id":"c43e0776.2a8738","type":"split","z":"d38e360e.d0a058","name":"","splt":",","spltType":"str","arraySplt":1,"arraySpltType":"len","stream":true,"addname":"","x":630,"y":1000,"wires":[["89cd5bd8.2ece38"]]},{"id":"62ab4d55.4e8374","type":"change","z":"d38e360e.d0a058","name":"","rules":[{"t":"set","p":"remove","pt":"global","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":1450,"y":1000,"wires":[[]]},{"id":"cf897823.f36db8","type":"template","z":"d38e360e.d0a058","name":"","field":"topic","fieldType":"msg","format":"handlebars","syntax":"mustache","template":"DELETE FROM dropdown\nWHERE message='{{payload}}';","output":"str","x":370,"y":1080,"wires":[["2ced42dd.69b01e","b5d3bd21.8b397"]]},{"id":"e3bd08d5.a907f8","type":"change","z":"d38e360e.d0a058","name":"","rules":[{"t":"set","p":"topic","pt":"msg","to":"ERROR!","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":830,"y":880,"wires":[["60fda4ee.8036ac"]]},{"id":"72c1eeb5.41856","type":"delay","z":"d38e360e.d0a058","name":"","pauseType":"delay","timeout":"5","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":640,"y":960,"wires":[["ce0a217b.258b4"]]},{"id":"ce0a217b.258b4","type":"change","z":"d38e360e.d0a058","name":"","rules":[{"t":"set","p":"payload","pt":"msg","to":"","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":800,"y":960,"wires":[["9c6b53b8.62904"]]},{"id":"64c0cc34.b6c014","type":"change","z":"d38e360e.d0a058","name":"","rules":[{"t":"delete","p":"payload","pt":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":1030,"y":1000,"wires":[["55675104.d8672","816c289d.d914e8"]]},{"id":"ce46b774.ed1938","type":"function","z":"d38e360e.d0a058","name":"","func":"var input = msg.payload.message\nvar array =  context.global.userarraymessage;\nvar add = array.push(input)\nmsg.options = array;\nreturn msg;","outputs":1,"noerr":0,"x":870,"y":1000,"wires":[["64c0cc34.b6c014"]]},{"id":"9aab6a5f.af26c8","type":"e-mail in","z":"b35cd955.089358","name":"","protocol":"IMAP","server":"imap.gmail.com","useSSL":true,"port":"993","box":"INBOX","disposition":"Read","repeat":"300","x":70,"y":720,"wires":[["880d75f8.7832e8"]]},{"id":"d0ab6e17.9dd1c","type":"switch","z":"b35cd955.089358","name":"","property":"topic","propertyType":"msg","rules":[{"t":"cont","v":"Pager","vt":"str"}],"checkall":"true","repair":false,"outputs":1,"x":610,"y":720,"wires":[["edf69956.5839d8"]]},{"id":"edf69956.5839d8","type":"function","z":"b35cd955.089358","name":"","func":"var subject = msg.topic;\nvar message = msg.payload;\nvar subjectlength = subject.length;\nvar user = subject.substring(6,subjectlength);\nmsg.user = user;\nmsg.message = message;\nreturn msg;","outputs":1,"noerr":0,"x":730,"y":720,"wires":[["9f2164f9.30f0b8"]]},{"id":"9f2164f9.30f0b8","type":"template","z":"b35cd955.089358","name":"","field":"topic","fieldType":"msg","format":"handlebars","syntax":"mustache","template":"SELECT capcode FROM user\nWHERE name='{{user}}';\n","output":"str","x":850,"y":720,"wires":[["b17fb866.1e8598"]]},{"id":"b24e35fa.ac8708","type":"split","z":"b35cd955.089358","name":"","splt":"\\n","spltType":"str","arraySplt":1,"arraySpltType":"len","stream":false,"addname":"","x":1110,"y":720,"wires":[["72ad2ec5.28c8e"]]},{"id":"72ad2ec5.28c8e","type":"function","z":"b35cd955.089358","name":"","func":"var capcode = msg.payload.capcode;\nvar message = msg.message;\nmsg.capcode = capcode;\nmsg.payload = message;\nreturn msg;","outputs":1,"noerr":0,"x":1230,"y":720,"wires":[["278c2764.84f7b8"]]},{"id":"4ee6feb4.699d3","type":"comment","z":"b35cd955.089358","name":"Email","info":"","x":70,"y":680,"wires":[]},{"id":"c11c97d9.28fb28","type":"change","z":"b35cd955.089358","name":"","rules":[{"t":"set","p":"user4","pt":"global","to":"payload.user","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":920,"y":580,"wires":[["8d00478a.afd738"]]},{"id":"70407de8.6d7b84","type":"change","z":"b35cd955.089358","name":"","rules":[{"t":"delete","p":"dropdown","pt":"global"}],"action":"","property":"","from":"","to":"","reg":false,"x":1350,"y":180,"wires":[[]]},{"id":"880d75f8.7832e8","type":"split","z":"b35cd955.089358","name":"","splt":"100","spltType":"len","arraySplt":"1","arraySpltType":"len","stream":false,"addname":"","x":190,"y":720,"wires":[["dd6918ae.261858"]]},{"id":"5a0fb48b.80487c","type":"change","z":"b35cd955.089358","name":"","rules":[{"t":"set","p":"payload","pt":"msg","to":"payload.0","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":460,"y":720,"wires":[["d0ab6e17.9dd1c"]]},{"id":"dd6918ae.261858","type":"join","z":"b35cd955.089358","name":"","mode":"custom","build":"array","property":"payload","propertyType":"msg","key":"topic","joiner":"\\n","joinerType":"str","accumulate":false,"timeout":"","count":"","reduceRight":false,"reduceExp":"","reduceInit":"","reduceInitType":"num","reduceFixup":"","x":310,"y":720,"wires":[["5a0fb48b.80487c"]]},{"id":"7469d0ab.d2674","type":"change","z":"d38e360e.d0a058","name":"","rules":[{"t":"set","p":"payload","pt":"msg","to":"payload.size","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":440,"y":540,"wires":[["386f704c.6148e"]]},{"id":"553b3486.52b8ec","type":"change","z":"d38e360e.d0a058","name":"","rules":[{"t":"set","p":"size","pt":"flow","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":810,"y":540,"wires":[[]]},{"id":"386596ad.61125a","type":"template","z":"d38e360e.d0a058","name":"","field":"topic","fieldType":"msg","format":"handlebars","syntax":"mustache","template":"UPDATE font\nSET info = '{{flow.infosize}}', message= '{{flow.messagesize}}'\nWHERE id = 1;","output":"str","x":230,"y":120,"wires":[["1d4815a6.1f515a"]]},{"id":"95aeb49b.da90f8","type":"template","z":"d38e360e.d0a058","name":"","field":"topic","fieldType":"msg","format":"handlebars","syntax":"mustache","template":"SELECT * FROM font;","output":"str","x":230,"y":80,"wires":[["31d70670.a5806a"]]},{"id":"d978c64.44d8e38","type":"split","z":"d38e360e.d0a058","name":"","splt":",","spltType":"str","arraySplt":1,"arraySpltType":"len","stream":true,"addname":"","x":490,"y":80,"wires":[["675758b2.6715a8","8c268dc3.83b65"]]},{"id":"d0b47c6f.5f94b","type":"change","z":"d38e360e.d0a058","name":"","rules":[{"t":"set","p":"infosize","pt":"flow","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":1140,"y":80,"wires":[[]]},{"id":"e80870.370a079","type":"change","z":"d38e360e.d0a058","name":"","rules":[{"t":"set","p":"messagesize","pt":"flow","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":1220,"y":120,"wires":[[]]},{"id":"1ac9781e.952298","type":"change","z":"d38e360e.d0a058","name":"","rules":[{"t":"set","p":"payload","pt":"msg","to":"font.info","tot":"global"}],"action":"","property":"","from":"","to":"","reg":false,"x":840,"y":80,"wires":[["c5fc6dd7.819d2"]]},{"id":"c6f52e2c.75b6e","type":"change","z":"d38e360e.d0a058","name":"","rules":[{"t":"set","p":"payload","pt":"msg","to":"font.message","tot":"global"}],"action":"","property":"","from":"","to":"","reg":false,"x":880,"y":120,"wires":[["56fe878d.d04278"]]},{"id":"8e9fe353.bca8e","type":"template","z":"6a0a5372.58851c","name":"","field":"topic","fieldType":"msg","format":"handlebars","syntax":"mustache","template":"INSERT INTO pages (capcode, message)\nVALUES ('{{pager}}', '{{message}}');","output":"str","x":690,"y":140,"wires":[["e5b7e28d.4ac96"]]},{"id":"c7df7ffc.b41ea","type":"template","z":"6a0a5372.58851c","name":"","field":"topic","fieldType":"msg","format":"handlebars","syntax":"mustache","template":"SELECT MAX(ID)\nFROM pages;","output":"str","x":230,"y":260,"wires":[["30c514fc.23c3bc"]]},{"id":"8d60567.dfb7ca8","type":"template","z":"6a0a5372.58851c","name":"","field":"payload","fieldType":"msg","format":"handlebars","syntax":"mustache","template":"<table>\n  <tr>\n    <td width=\"50%\">[{{global.displayedPage}}/{{global.totalPages}}]</td>\n    <td width=\"50%\">{{date}}</td> \n  </tr>\n  <tr>\n    <td>{{flow.pageName}}</td>\n    <td>{{time}}</td> \n  </tr>\n</table>\n<hr width=\"520px\">","output":"str","x":1190,"y":260,"wires":[["d1fdde55.97b2c"]]},{"id":"ae16032c.7f79a","type":"split","z":"6a0a5372.58851c","name":"","splt":"\\n","spltType":"str","arraySplt":1,"arraySpltType":"len","stream":false,"addname":"","x":950,"y":300,"wires":[["b5d88cb.231727","e8de6cdb.05912"]]},{"id":"b5d88cb.231727","type":"template","z":"6a0a5372.58851c","name":"","field":"topic","fieldType":"msg","format":"handlebars","syntax":"mustache","template":"SELECT name FROM user\nWHERE capcode='{{payload.capcode}}';","output":"str","x":1190,"y":340,"wires":[["e39ac2c8.ec044"]]},{"id":"c49f665d.0a7718","type":"split","z":"6a0a5372.58851c","name":"","splt":"\\n","spltType":"str","arraySplt":1,"arraySpltType":"len","stream":false,"addname":"","x":1450,"y":340,"wires":[["dd583cab.49cb3"]]},{"id":"dd583cab.49cb3","type":"change","z":"6a0a5372.58851c","name":"","rules":[{"t":"set","p":"pageName","pt":"flow","to":"payload.name","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":1610,"y":340,"wires":[[]]},{"id":"e8de6cdb.05912","type":"template","z":"6a0a5372.58851c","name":"","field":"payload","fieldType":"msg","format":"handlebars","syntax":"mustache","template":"\n{{payload.message}}\n","output":"str","x":1190,"y":300,"wires":[["8f36e530.886c38"]]},{"id":"5b165599.f30f5c","type":"split","z":"6a0a5372.58851c","name":"","splt":"\\n","spltType":"str","arraySplt":1,"arraySpltType":"len","stream":false,"addname":"","x":490,"y":260,"wires":[["7d9aaa58.b35064","70160772.944a08"]]},{"id":"7d9aaa58.b35064","type":"template","z":"6a0a5372.58851c","name":"","field":"topic","fieldType":"msg","format":"handlebars","syntax":"mustache","template":"SELECT * FROM pages\nWHERE ID={{payload.MAX(ID)}};","output":"str","x":610,"y":300,"wires":[["fe88394f.9ed948","65f3d139.ae218"]]},{"id":"70160772.944a08","type":"change","z":"6a0a5372.58851c","name":"","rules":[{"t":"set","p":"totalPages","pt":"global","to":"payload.MAX(ID)","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":660,"y":260,"wires":[["8ccf8edd.0ee01"]]},{"id":"8ccf8edd.0ee01","type":"change","z":"6a0a5372.58851c","name":"","rules":[{"t":"set","p":"displayedPage","pt":"global","to":"payload.MAX(ID)","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":890,"y":260,"wires":[[]]},{"id":"2ddc0732.990178","type":"template","z":"6a0a5372.58851c","name":"","field":"topic","fieldType":"msg","format":"handlebars","syntax":"mustache","template":"SELECT * FROM pages\nWHERE ID={{global.displayedPage}};","output":"str","x":610,"y":340,"wires":[["fe88394f.9ed948"]]},{"id":"cb80ba71.80a5b8","type":"template","z":"6a0a5372.58851c","name":"","field":"topic","fieldType":"msg","format":"handlebars","syntax":"mustache","template":"SELECT * FROM pages\nWHERE ID={{global.displayedPage}};","output":"str","x":610,"y":380,"wires":[["fe88394f.9ed948"]]},{"id":"b7361a52.7d5338","type":"function","z":"6a0a5372.58851c","name":"","func":"var displayed = msg.payload;\nvar minus = displayed -1;\nif (minus < 1) {\n   context.global.displayedPage = 1\n} else {\ncontext.global.displayedPage = minus\n}\nreturn msg;","outputs":1,"noerr":0,"x":490,"y":380,"wires":[["cb80ba71.80a5b8"]]},{"id":"ed65a011.da2","type":"function","z":"6a0a5372.58851c","name":"","func":"var displayed = msg.payload;\nvar plus = displayed +1;\nif (plus > context.global.totalPages) {\n   context.global.displayedPage = context.global.totalPages\n} else {\ncontext.global.displayedPage = plus\n}\nreturn msg;","outputs":1,"noerr":0,"x":490,"y":340,"wires":[["2ddc0732.990178"]]},{"id":"7efeae77.f88a7","type":"change","z":"6a0a5372.58851c","name":"","rules":[{"t":"set","p":"payload","pt":"msg","to":"","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":1320,"y":220,"wires":[["dba073a0.2ded7","3680aa23.e6d6e6"]]},{"id":"5f485761.88b298","type":"link in","z":"6a0a5372.58851c","name":"Clear Pager Screen","links":["5378f999.593ac8","6fa8dabf.7adde4","8781191e.605f58"],"x":1215,"y":220,"wires":[["7efeae77.f88a7"]]},{"id":"43da3194.c22d1","type":"file in","z":"6a0a5372.58851c","name":"","filename":"/home/pi/beep beep.wav","format":"","chunk":false,"sendError":false,"x":750,"y":100,"wires":[["27b87f77.fbcba"]]},{"id":"41b56828.5db908","type":"comment","z":"d38e360e.d0a058","name":"Menu","info":"","x":250,"y":1220,"wires":[]},{"id":"5d7fdde7.6b2574","type":"inject","z":"4e0e89ca.492d38","name":"Add Table Messages","topic":"CREATE TABLE messages (     button int,     user varchar(50),     label varchar(50),     message varchar(200),     bcolor varchar(7),     tcolor varchar(7),     size int, PRIMARY KEY (button) );","payload":"","payloadType":"str","repeat":"","crontab":"","once":true,"onceDelay":"6","x":160,"y":218,"wires":[["a39ab9b8.b17cc8"]]},{"id":"ec9119ea.1928d8","type":"function","z":"4e0e89ca.492d38","name":"Global Var","func":"context.global.run = 1;\nreturn msg;","outputs":1,"noerr":0,"x":250,"y":900,"wires":[[]]},{"id":"78f53659.041278","type":"inject","z":"4e0e89ca.492d38","name":"","topic":"","payload":"","payloadType":"str","repeat":"","crontab":"","once":true,"onceDelay":"16","x":110,"y":900,"wires":[["ec9119ea.1928d8"]]},{"id":"a39ab9b8.b17cc8","type":"switch","z":"4e0e89ca.492d38","name":"","property":"run","propertyType":"global","rules":[{"t":"null"}],"checkall":"true","repair":false,"outputs":1,"x":330,"y":180,"wires":[["54a0338d.60ee9c"]]},{"id":"5a765f60.e0a26","type":"function","z":"4e0e89ca.492d38","name":"Global Var","func":"context.global.run = null;\nreturn msg;","outputs":1,"noerr":0,"x":250,"y":60,"wires":[[]]},{"id":"271f70a1.a279c","type":"inject","z":"4e0e89ca.492d38","name":"","topic":"","payload":"","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":"","x":110,"y":60,"wires":[["5a765f60.e0a26"]]},{"id":"7b3f3f25.e98aa","type":"debug","z":"4e0e89ca.492d38","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","x":630,"y":100,"wires":[]},{"id":"e2d6e322.f9273","type":"inject","z":"4e0e89ca.492d38","name":"Add Table User","topic":"CREATE TABLE user(name VARCHAR(20), capcode NUMERIC, PRIMARY KEY (name));","payload":"","payloadType":"str","repeat":"","crontab":"","once":true,"onceDelay":"5","x":140,"y":180,"wires":[["a39ab9b8.b17cc8"]]},{"id":"200a1f17.a7988","type":"comment","z":"4e0e89ca.492d38","name":"Setup variables","info":"","x":140,"y":20,"wires":[]},{"id":"9cc9d7cd.33f818","type":"inject","z":"4e0e89ca.492d38","name":"Add Database settings","topic":"CREATE DATABASE settings;","payload":"","payloadType":"str","repeat":"","crontab":"","once":true,"onceDelay":"1","x":160,"y":140,"wires":[["99b4a5b3.3fa8c8"]]},{"id":"5102c0ee.5e876","type":"inject","z":"4e0e89ca.492d38","name":"Remove Database settings","topic":"DROP DATABASE settings;","payload":"","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":"1","x":170,"y":100,"wires":[["e25e230e.398a8"]]},{"id":"99b4a5b3.3fa8c8","type":"switch","z":"4e0e89ca.492d38","name":"","property":"run","propertyType":"global","rules":[{"t":"null"}],"checkall":"true","repair":false,"outputs":1,"x":330,"y":140,"wires":[["e25e230e.398a8"]]},{"id":"b66af8df.b08078","type":"inject","z":"4e0e89ca.492d38","name":"Add button 1 to Messages","topic":"INSERT INTO `messages` (`button`, `user`, `label`, `message`, `bcolor`, `tcolor`, `size`) VALUES ('1', '0707288', 'Test System', 'This is a System Test message. Please Ignore', '#000000', '#ffffff', '10');","payload":"","payloadType":"str","repeat":"","crontab":"","once":true,"onceDelay":"11","x":180,"y":700,"wires":[["a39ab9b8.b17cc8"]]},{"id":"9e0336fc.f33868","type":"inject","z":"4e0e89ca.492d38","name":"Add button 2 to Messages","topic":"INSERT INTO `messages` (`button`, `user`, `label`, `message`, `bcolor`, `tcolor`, `size`) VALUES ('2', '707288', 'Fire Alarm', 'Fire Alarm Test Message', '#ff0000', '#ffffff', '10');","payload":"","payloadType":"str","repeat":"","crontab":"","once":true,"onceDelay":"12","x":180,"y":740,"wires":[["a39ab9b8.b17cc8"]]},{"id":"d4f08816.9b2378","type":"inject","z":"4e0e89ca.492d38","name":"Add button 3 to Messages","topic":"INSERT INTO `messages` (`button`, `user`, `label`, `message`, `bcolor`, `tcolor`, `size`) VALUES ('3', '707288', 'Customer Waiting', 'Customer Waiting in Reception', '#008000', '#ffa500', '6');","payload":"","payloadType":"str","repeat":"","crontab":"","once":true,"onceDelay":"13","x":180,"y":780,"wires":[["a39ab9b8.b17cc8"]]},{"id":"bc74750c.13f668","type":"inject","z":"4e0e89ca.492d38","name":"Add button 4 to Messages","topic":"INSERT INTO `messages` (`button`, `user`, `label`, `message`, `bcolor`, `tcolor`, `size`) VALUES ('4', '707288', 'Hello World!', 'Hello World!', '#800080', '#000000', '2');","payload":"","payloadType":"str","repeat":"","crontab":"","once":true,"onceDelay":"14","x":180,"y":820,"wires":[["a39ab9b8.b17cc8"]]},{"id":"bb849253.3ecab","type":"inject","z":"4e0e89ca.492d38","name":"Add Table dropdown","topic":"CREATE TABLE dropdown ( message VARCHAR(100), PRIMARY KEY (message) );","payload":"","payloadType":"str","repeat":"","crontab":"","once":true,"onceDelay":"7","x":160,"y":260,"wires":[["a39ab9b8.b17cc8"]]},{"id":"8f1a7bea.8ba6e8","type":"inject","z":"4e0e89ca.492d38","name":"Add Table font","topic":"CREATE TABLE font (     id int,     info int,     message int, PRIMARY KEY (id) );","payload":"","payloadType":"str","repeat":"","crontab":"","once":true,"onceDelay":"8","x":140,"y":300,"wires":[["a39ab9b8.b17cc8"]]},{"id":"9aa2cd7c.c3cf9","type":"inject","z":"4e0e89ca.492d38","name":"Add Font","topic":"INSERT INTO font (id) VALUES (1);","payload":"","payloadType":"str","repeat":"","crontab":"","once":true,"onceDelay":"10","x":120,"y":620,"wires":[["a39ab9b8.b17cc8"]]},{"id":"dd96d1a8.37248","type":"inject","z":"4e0e89ca.492d38","name":"Add Table pages","topic":"CREATE TABLE pages(ID int NOT NULL AUTO_INCREMENT, timestamp TIMESTAMP,     capcode int,     message TINYTEXT, PRIMARY KEY (ID) );","payload":"","payloadType":"str","repeat":"","crontab":"","once":true,"onceDelay":"9","x":150,"y":339,"wires":[["a39ab9b8.b17cc8"]]},{"id":"32af0fe1.6cb46","type":"change","z":"4e0e89ca.492d38","name":"","rules":[{"t":"set","p":"password","pt":"global","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":460,"y":880,"wires":[[]]},{"id":"c1600d28.4229b","type":"inject","z":"4e0e89ca.492d38","name":"","topic":"","payload":"1234","payloadType":"str","repeat":"","crontab":"","once":true,"onceDelay":"15","x":110,"y":860,"wires":[["5e479d6c.425934"]]},{"id":"5e479d6c.425934","type":"switch","z":"4e0e89ca.492d38","name":"","property":"run","propertyType":"global","rules":[{"t":"null"}],"checkall":"true","repair":false,"outputs":1,"x":230,"y":860,"wires":[["32af0fe1.6cb46","6c8fceb6.a1cd3","5512a1e2.f9681"]]},{"id":"4c5eb496.cca20c","type":"function","z":"4e0e89ca.492d38","name":"","func":"var ver = Number(msg.payload);\nvar version = ver + 0.1;\nvar fixed = version.toFixed(2);\nvar now     = new Date(); \nvar year    = now.getFullYear();\nvar month   = now.getMonth()+1; \nvar day     = now.getDate();\nvar date = day +\"-\"+ month +\"-\"+ year;\nmsg.version = fixed\nmsg.date = date\nreturn msg;","outputs":1,"noerr":0,"x":530,"y":980,"wires":[["613ef6e6.e02588"]]},{"id":"2109d315.11cd5c","type":"ui_dropdown","z":"b35cd955.089358","name":"","label":"","place":"Select Message","group":"4efb444f.e866ec","order":2,"width":0,"height":0,"passthru":false,"options":[{"label":"","value":"","type":"str"}],"payload":"","topic":"","x":1160,"y":100,"wires":[["e496e015.227e7"]]},{"id":"fb334bf.2001bb8","type":"ui_dropdown","z":"b35cd955.089358","name":"","label":"","place":"Select Recipient","group":"a9e39f72.184aa","order":1,"width":"13","height":"1","passthru":true,"options":[{"label":"All","value":"0707288","type":"str"}],"payload":"","topic":"","x":260,"y":80,"wires":[["93d7cec2.496d1","af0fd4ca.b4c818"]]},{"id":"ab4ddb9d.f7f9b8","type":"ui_dropdown","z":"d38e360e.d0a058","name":"Button?","label":"Button #","place":"Select option","group":"c3c82420.e70868","order":1,"width":"7","height":"1","passthru":true,"options":[{"label":"Button 1","value":"1","type":"str"},{"label":"Button 2","value":"2","type":"str"},{"label":"Button 3","value":"3","type":"str"},{"label":"Button 4","value":"4","type":"str"}],"payload":"","topic":"","x":600,"y":300,"wires":[["9b18a638.450b88","40c9f59e.276c0c"]]},{"id":"8dad6d1b.76c69","type":"ui_dropdown","z":"d38e360e.d0a058","name":"User","label":"Recipient","place":"Select option","group":"c3c82420.e70868","order":2,"width":"7","height":"1","passthru":true,"options":[{"label":"","value":"","type":"str"}],"payload":"","topic":"","x":590,"y":340,"wires":[["5237965b.246508"]]},{"id":"4747b2c9.73ab7c","type":"ui_dropdown","z":"b35cd955.089358","name":"","label":"","place":"Select Recipient","group":"4efb444f.e866ec","order":1,"width":0,"height":0,"passthru":true,"options":[{"label":"All","value":"0707288","type":"str"}],"payload":"","topic":"","x":1160,"y":60,"wires":[["7f1d3c15.0fd634"]]},{"id":"816c289d.d914e8","type":"ui_dropdown","z":"d38e360e.d0a058","name":"","label":"Message to Remove","place":"Select option","group":"37c6d8b3.3bbe78","order":4,"width":0,"height":0,"passthru":false,"options":[{"label":"No Messsages","value":"","type":"str"}],"payload":"","topic":"","x":1240,"y":1000,"wires":[["62ab4d55.4e8374"]]},{"id":"51e92bd8.ef72b4","type":"ui_dropdown","z":"d38e360e.d0a058","name":"","label":"Background Colour","place":"Select option","group":"c3c82420.e70868","order":5,"width":"7","height":"1","passthru":true,"options":[{"label":"Red","value":"#ff0000","type":"str"},{"label":"Blue","value":"#0000ff","type":"str"},{"label":"Green","value":"#008000","type":"str"},{"label":"Yellow","value":"#ffff00","type":"str"},{"label":"Orange","value":"#ffa500","type":"str"},{"label":"Purple","value":"#800080","type":"str"},{"label":"Gray","value":"#808080","type":"str"},{"label":"Black","value":"#000000","type":"str"},{"label":"White","value":"#ffffff","type":"str"}],"payload":"","topic":"","x":630,"y":460,"wires":[["92c038d7.37bb38"]]},{"id":"f48edec5.e4ef4","type":"ui_dropdown","z":"d38e360e.d0a058","name":"","label":"Text Colour","place":"Select option","group":"c3c82420.e70868","order":6,"width":"7","height":"1","passthru":true,"options":[{"label":"Red","value":"#ff0000","type":"str"},{"label":"Blue","value":"#0000ff","type":"str"},{"label":"Green","value":"#008000","type":"str"},{"label":"Yellow","value":"#ffff00","type":"str"},{"label":"Orange","value":"#ffa500","type":"str"},{"label":"Purple","value":"#800080","type":"str"},{"label":"Gray","value":"#808080","type":"str"},{"label":"Black","value":"#000000","type":"str"},{"label":"White","value":"#ffffff","type":"str"}],"payload":"","topic":"","x":610,"y":500,"wires":[["ac044f9d.ec54d"]]},{"id":"bf028241.eb18e","type":"ui_button","z":"b35cd955.089358","name":"","group":"4efb444f.e866ec","order":3,"width":0,"height":0,"passthru":false,"label":"Submit","color":"","bgcolor":"","icon":"","payload":"dropdown","payloadType":"global","topic":"","x":1160,"y":140,"wires":[["a24d8225.9b83f"]]},{"id":"ac63ba41.6517c8","type":"ui_button","z":"6a0a5372.58851c","name":"Up","group":"ae13bd2b.c1248","order":3,"width":"1","height":"3","passthru":false,"label":"","color":"","bgcolor":"","icon":"fa-arrow-up","payload":"displayedPage","payloadType":"global","topic":"","x":370,"y":380,"wires":[["b7361a52.7d5338"]]},{"id":"b52aab73.32d288","type":"ui_button","z":"6a0a5372.58851c","name":"Down","group":"ae13bd2b.c1248","order":4,"width":"1","height":"3","passthru":false,"label":"","color":"","bgcolor":"","icon":"fa-arrow-down","payload":"displayedPage","payloadType":"global","topic":"","x":370,"y":340,"wires":[["ed65a011.da2"]]},{"id":"8dace02.d8da92","type":"ui_button","z":"b35cd955.089358","name":"","group":"f2b23ffd.ffc66","order":1,"width":"7","height":"4","passthru":false,"label":"<font size=\"{{msg.payload.size}}\">{{msg.payload.label}}","color":"{{msg.payload.tcolor}}","bgcolor":"{{msg.payload.bcolor}}","icon":"","payload":"","payloadType":"str","topic":"","x":1070,"y":460,"wires":[["4a4ce425.3069dc"]]},{"id":"2e736517.2bfc5a","type":"ui_button","z":"d38e360e.d0a058","name":"","group":"c3c82420.e70868","order":8,"width":"7","height":"1","passthru":false,"label":"Submit","color":"","bgcolor":"","icon":"","payload":"","payloadType":"str","topic":"","x":600,"y":580,"wires":[["3ac9abcb.092ab4","5ec63122.4048d"]]},{"id":"789ecc22.06e4a4","type":"ui_button","z":"b35cd955.089358","name":"","group":"f2b23ffd.ffc66","order":1,"width":"7","height":"4","passthru":false,"label":"<font size=\"{{msg.payload.size}}\">{{msg.payload.label}}","color":"{{msg.payload.tcolor}}","bgcolor":"{{msg.payload.bcolor}}","icon":"","payload":"","payloadType":"str","topic":"{{msg.payload.message}}","x":1070,"y":500,"wires":[["9903a908.09dc08"]]},{"id":"5d2137e3.75b148","type":"ui_button","z":"b35cd955.089358","name":"","group":"f2b23ffd.ffc66","order":1,"width":"7","height":"4","passthru":false,"label":"<font size=\"{{msg.payload.size}}\">{{msg.payload.label}}","color":"{{msg.payload.tcolor}}","bgcolor":"{{msg.payload.bcolor}}","icon":"","payload":"","payloadType":"str","topic":"{{msg.payload.message}}","x":1070,"y":540,"wires":[["227f57f7.1394a8"]]},{"id":"8d00478a.afd738","type":"ui_button","z":"b35cd955.089358","name":"","group":"f2b23ffd.ffc66","order":1,"width":"7","height":"4","passthru":false,"label":"<font size=\"{{msg.payload.size}}\">{{msg.payload.label}}","color":"{{msg.payload.tcolor}}","bgcolor":"{{msg.payload.bcolor}}","icon":"","payload":"","payloadType":"str","topic":"{{msg.payload.message}}","x":1070,"y":580,"wires":[["ad8ed42b.5cc198"]]},{"id":"458df027.5e3a4","type":"ui_button","z":"d38e360e.d0a058","name":"","group":"480c3a6e.4ee6d4","order":3,"width":0,"height":0,"passthru":false,"label":"Submit","color":"","bgcolor":"","icon":"","payload":"","payloadType":"str","topic":"Success","x":100,"y":120,"wires":[["386596ad.61125a","95aeb49b.da90f8","ac9a9b59.253488"]]},{"id":"2fd09ce4.6c3a34","type":"ui_button","z":"d38e360e.d0a058","name":"","group":"37c6d8b3.3bbe78","order":5,"width":0,"height":0,"passthru":true,"label":"Remove","color":"","bgcolor":"","icon":"","payload":"remove","payloadType":"global","topic":"","x":220,"y":1080,"wires":[["cf897823.f36db8"]]},{"id":"386f704c.6148e","type":"ui_numeric","z":"d38e360e.d0a058","name":"","label":"Text Size","group":"c3c82420.e70868","order":7,"width":"7","height":"1","passthru":true,"topic":"","format":"{{value}}","min":0,"max":10,"step":1,"x":600,"y":540,"wires":[["553b3486.52b8ec"]]},{"id":"c5fc6dd7.819d2","type":"ui_numeric","z":"d38e360e.d0a058","name":"","label":"Info","group":"480c3a6e.4ee6d4","order":1,"width":0,"height":0,"passthru":false,"topic":"","format":"{{value}}","min":0,"max":10,"step":1,"x":990,"y":80,"wires":[["d0b47c6f.5f94b"]]},{"id":"56fe878d.d04278","type":"ui_numeric","z":"d38e360e.d0a058","name":"","label":"Message","group":"480c3a6e.4ee6d4","order":2,"width":0,"height":0,"passthru":false,"topic":"","format":"{{value}}","min":0,"max":10,"step":1,"x":1040,"y":120,"wires":[["e80870.370a079"]]},{"id":"275fa1bc.1304ae","type":"ui_text_input","z":"d38e360e.d0a058","name":"label","label":"Button Label","group":"c3c82420.e70868","order":3,"width":"7","height":"1","passthru":true,"mode":"text","delay":"100","topic":"","x":590,"y":380,"wires":[["93eff39b.60eb6"]]},{"id":"7e045522.0fe1fc","type":"ui_text_input","z":"d38e360e.d0a058","name":"","label":"Message Text","group":"c3c82420.e70868","order":4,"width":"7","height":"1","passthru":true,"mode":"text","delay":"100","topic":"","x":620,"y":420,"wires":[["bf8a3cd5.c43b4"]]},{"id":"dba073a0.2ded7","type":"ui_text","z":"6a0a5372.58851c","group":"ae13bd2b.c1248","order":1,"width":"13","height":"2","name":"","label":"","format":"<font size=\"{{msg.font}}\">{{msg.payload}}","layout":"row-left","x":1470,"y":260,"wires":[]},{"id":"3680aa23.e6d6e6","type":"ui_text","z":"6a0a5372.58851c","group":"ae13bd2b.c1248","order":2,"width":"13","height":"6","name":"","label":"","format":"<font size=\"{{msg.font}}\">{{msg.payload}}","layout":"row-left","x":1470,"y":300,"wires":[]},{"id":"9c6b53b8.62904","type":"ui_text","z":"d38e360e.d0a058","group":"37c6d8b3.3bbe78","order":3,"width":0,"height":0,"name":"","label":"","format":"{{msg.payload}}","layout":"col-center","x":970,"y":940,"wires":[]},{"id":"27b87f77.fbcba","type":"ui_audio","z":"6a0a5372.58851c","name":"","group":"ae13bd2b.c1248","voice":"en-US","always":true,"x":940,"y":100,"wires":[]},{"id":"60fda4ee.8036ac","type":"ui_toast","z":"d38e360e.d0a058","position":"dialog","displayTime":"3","highlight":"","outputs":1,"ok":"OK","cancel":"","topic":"","name":"","x":990,"y":880,"wires":[[]]},{"id":"74eb34e8.d945bc","type":"ui_toast","z":"6a0a5372.58851c","position":"dialog","displayTime":"3","highlight":"","outputs":1,"ok":"OK","cancel":"","topic":"","name":"","x":1590,"y":560,"wires":[[]]},{"id":"ca637a00.971e88","type":"ui_ui_control","z":"d38e360e.d0a058","name":"","x":220,"y":1000,"wires":[["b5d3bd21.8b397"]]},{"id":"1301ab15.046965","type":"ui_ui_control","z":"b35cd955.089358","name":"","x":100,"y":560,"wires":[["2072aa8.fbd5456"]]},{"id":"845f8158.7270c","type":"ui_ui_control","z":"b35cd955.089358","name":"","x":1160,"y":180,"wires":[["70407de8.6d7b84"]]},{"id":"89be8faf.a10e1","type":"ui_ui_control","z":"d38e360e.d0a058","name":"","x":100,"y":80,"wires":[["95aeb49b.da90f8"]]},{"id":"69eeb557.b9258c","type":"ui_ui_control","z":"d38e360e.d0a058","name":"","x":480,"y":1300,"wires":[[]]},{"id":"99dc7311.717e","type":"mysql","z":"d38e360e.d0a058","mydb":"48facf19.f3141","name":"","x":920,"y":580,"wires":[[]]},{"id":"b218bbbd.9ef9c8","type":"mysql","z":"d38e360e.d0a058","mydb":"48facf19.f3141","name":"","x":920,"y":260,"wires":[["83d9b4f7.1f8898"]]},{"id":"804a0355.1d2cb","type":"mysql","z":"b35cd955.089358","mydb":"48facf19.f3141","name":"","x":280,"y":520,"wires":[["71910dc3.e93224"]]},{"id":"f6258db6.b6fa4","type":"mysql","z":"d38e360e.d0a058","mydb":"48facf19.f3141","name":"","x":500,"y":920,"wires":[["258ea4a1.60230c","72c1eeb5.41856"]]},{"id":"b003cf7f.7dfb2","type":"mysql","z":"d38e360e.d0a058","mydb":"48facf19.f3141","name":"","x":500,"y":1000,"wires":[["c43e0776.2a8738"]]},{"id":"2ced42dd.69b01e","type":"mysql","z":"d38e360e.d0a058","mydb":"48facf19.f3141","name":"","x":500,"y":1080,"wires":[["839c493.d38ccb8"]]},{"id":"b17fb866.1e8598","type":"mysql","z":"b35cd955.089358","mydb":"48facf19.f3141","name":"","x":980,"y":720,"wires":[["b24e35fa.ac8708"]]},{"id":"1d4815a6.1f515a","type":"mysql","z":"d38e360e.d0a058","mydb":"48facf19.f3141","name":"","x":360,"y":120,"wires":[[]]},{"id":"31d70670.a5806a","type":"mysql","z":"d38e360e.d0a058","mydb":"48facf19.f3141","name":"","x":360,"y":80,"wires":[["d978c64.44d8e38"]]},{"id":"e5b7e28d.4ac96","type":"mysql","z":"6a0a5372.58851c","mydb":"48facf19.f3141","name":"","x":820,"y":140,"wires":[[]]},{"id":"30c514fc.23c3bc","type":"mysql","z":"6a0a5372.58851c","mydb":"48facf19.f3141","name":"","x":360,"y":260,"wires":[["5b165599.f30f5c"]]},{"id":"e39ac2c8.ec044","type":"mysql","z":"6a0a5372.58851c","mydb":"48facf19.f3141","name":"","x":1320,"y":340,"wires":[["c49f665d.0a7718"]]},{"id":"fe88394f.9ed948","type":"mysql","z":"6a0a5372.58851c","mydb":"48facf19.f3141","name":"","x":820,"y":300,"wires":[["ae16032c.7f79a"]]},{"id":"54a0338d.60ee9c","type":"mysql","z":"4e0e89ca.492d38","mydb":"48facf19.f3141","name":"","x":460,"y":180,"wires":[["7b3f3f25.e98aa"]]},{"id":"e25e230e.398a8","type":"mysql","z":"4e0e89ca.492d38","mydb":"cb77a97f.05f038","name":"","x":470,"y":100,"wires":[["7b3f3f25.e98aa"]]},{"id":"f352b4ac.8800f8","type":"serial in","z":"6a0a5372.58851c","name":"","serial":"8aca8e0e.b4d8f","x":90,"y":140,"wires":[["8e236395.f64cb","e3853a77.5da498","2dee5b78.c6d644"]]},{"id":"32abd5e5.5466ea","type":"inject","z":"4e0e89ca.492d38","name":"Increment Version","topic":"","payload":"version","payloadType":"global","repeat":"","crontab":"","once":false,"onceDelay":"14","x":370,"y":980,"wires":[["4c5eb496.cca20c"]]},{"id":"6c8fceb6.a1cd3","type":"change","z":"4e0e89ca.492d38","name":"","rules":[{"t":"set","p":"pin","pt":"global","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":430,"y":840,"wires":[[]]},{"id":"60b220ef.61c24","type":"ui_button","z":"d38e360e.d0a058","name":"","group":"6b64a97d.831898","order":1,"width":"4","height":"3","passthru":false,"label":"Message Log","color":"","bgcolor":"","icon":"fa-inbox","payload":"Receive","payloadType":"str","topic":"","x":280,"y":1260,"wires":[["69eeb557.b9258c"]]},{"id":"1462deb5.33f521","type":"ui_button","z":"d38e360e.d0a058","name":"","group":"6b64a97d.831898","order":2,"width":"4","height":"3","passthru":false,"label":"Send Page","color":"","bgcolor":"","icon":"fa-paper-plane","payload":"Send","payloadType":"str","topic":"","x":270,"y":1300,"wires":[["69eeb557.b9258c"]]},{"id":"b096064.8999df8","type":"ui_button","z":"d38e360e.d0a058","name":"","group":"6b64a97d.831898","order":4,"width":"4","height":"3","passthru":false,"label":"Lock System","color":"","bgcolor":"","icon":"fa-lock","payload":"Lock","payloadType":"str","topic":"","x":270,"y":1380,"wires":[["69eeb557.b9258c"]]},{"id":"d1cca8d2.828e28","type":"ui_button","z":"6a0a5372.58851c","name":"Home","group":"ae13bd2b.c1248","order":5,"width":"1","height":"1","passthru":false,"label":"","color":"","bgcolor":"","icon":"fa-home","payload":"Menu","payloadType":"str","topic":"","x":370,"y":420,"wires":[["11835c07.c4ef14"]]},{"id":"11835c07.c4ef14","type":"ui_ui_control","z":"6a0a5372.58851c","name":"","x":500,"y":420,"wires":[[]]},{"id":"c681e475.b5d198","type":"ui_button","z":"d38e360e.d0a058","name":"","group":"6b64a97d.831898","order":7,"width":"4","height":"1","passthru":false,"label":"Settings","color":"","bgcolor":"","icon":"fa-wrench","payload":"SettingsLock","payloadType":"str","topic":"","x":260,"y":1340,"wires":[["69eeb557.b9258c"]]},{"id":"312938f8.a2ae58","type":"ui_ui_control","z":"c868d95d.03e038","name":"","x":440,"y":200,"wires":[[]]},{"id":"681daf6a.6c892","type":"inject","z":"c868d95d.03e038","name":"","topic":"","payload":"Startup","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":90,"y":40,"wires":[["312938f8.a2ae58"]]},{"id":"e9bde3f1.7a14c","type":"inject","z":"c868d95d.03e038","name":"","topic":"","payload":"Lock","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":90,"y":80,"wires":[["312938f8.a2ae58"]]},{"id":"e49cbd9f.05edc","type":"inject","z":"c868d95d.03e038","name":"","topic":"","payload":"Menu","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":90,"y":120,"wires":[["312938f8.a2ae58"]]},{"id":"f40af21a.20464","type":"inject","z":"c868d95d.03e038","name":"","topic":"","payload":"SettingsLock","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":110,"y":160,"wires":[["312938f8.a2ae58"]]},{"id":"5e9b54a5.308d0c","type":"inject","z":"c868d95d.03e038","name":"","topic":"","payload":"Receive","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":100,"y":200,"wires":[["312938f8.a2ae58"]]},{"id":"9e97811b.fa681","type":"inject","z":"c868d95d.03e038","name":"","topic":"","payload":"Send","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":90,"y":240,"wires":[["312938f8.a2ae58"]]},{"id":"2ea731be.93c39e","type":"inject","z":"c868d95d.03e038","name":"","topic":"","payload":"Settings","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":100,"y":280,"wires":[["312938f8.a2ae58"]]},{"id":"e1568f1b.7581b","type":"inject","z":"c868d95d.03e038","name":"","topic":"","payload":"quick","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":90,"y":320,"wires":[["312938f8.a2ae58"]]},{"id":"ffa4dd7a.7701b","type":"ui_button","z":"d38e360e.d0a058","name":"","group":"6b64a97d.831898","order":3,"width":"4","height":"3","passthru":false,"label":"Quick Message","color":"","bgcolor":"","icon":"fa-th-large","payload":"quick","payloadType":"str","topic":"","x":280,"y":1420,"wires":[["69eeb557.b9258c"]]},{"id":"523b8bfe.70a304","type":"ui_button","z":"b35cd955.089358","name":"","group":"f2b23ffd.ffc66","order":0,"width":"14","height":"1","passthru":false,"label":"","color":"","bgcolor":"","icon":"fa-home","payload":"Menu","payloadType":"str","topic":"","x":350,"y":580,"wires":[["c7c7d1c6.5101d"]]},{"id":"c7c7d1c6.5101d","type":"ui_ui_control","z":"b35cd955.089358","name":"","x":480,"y":580,"wires":[[]]},{"id":"bdafd98a.5de2c8","type":"ui_button","z":"b35cd955.089358","name":"","group":"ae3799bd.abc7d8","order":0,"width":"1","height":"8","passthru":false,"label":"","color":"","bgcolor":"","icon":"fa-home","payload":"Menu","payloadType":"str","topic":"","x":770,"y":360,"wires":[["d8bbf1ed.d17a9"]]},{"id":"d8bbf1ed.d17a9","type":"ui_ui_control","z":"b35cd955.089358","name":"","x":900,"y":360,"wires":[[]]},{"id":"1ec68b60.417e25","type":"delay","z":"4e0e89ca.492d38","name":"","pauseType":"delay","timeout":"5","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":400,"y":1180,"wires":[["cf0d386.cfd23c8"]]},{"id":"cf0d386.cfd23c8","type":"change","z":"4e0e89ca.492d38","name":"","rules":[{"t":"set","p":"payload","pt":"msg","to":"Lock","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":560,"y":1180,"wires":[["ae4e5409.a92178"]]},{"id":"b0793e9e.311eb","type":"switch","z":"4e0e89ca.492d38","name":"","property":"tab","propertyType":"msg","rules":[{"t":"eq","v":"0","vt":"str"},{"t":"else"}],"checkall":"true","repair":false,"outputs":2,"x":270,"y":1180,"wires":[["1ec68b60.417e25"],[]]},{"id":"53548f67.e0c","type":"comment","z":"4e0e89ca.492d38","name":"Start Up Page","info":"","x":150,"y":1100,"wires":[]},{"id":"ae4e5409.a92178","type":"ui_ui_control","z":"4e0e89ca.492d38","name":"","x":720,"y":1180,"wires":[[]]},{"id":"aae71398.f80f6","type":"ui_ui_control","z":"4e0e89ca.492d38","name":"","x":140,"y":1180,"wires":[["b0793e9e.311eb"]]},{"id":"f435a8ec.5f6428","type":"ui_template","z":"4e0e89ca.492d38","group":"3bc126e9.fdb96a","name":"","order":0,"width":"14","height":"8","format":"","storeOutMessages":false,"fwdInMessages":true,"templateScope":"local","x":880,"y":1140,"wires":[[]]},{"id":"f6ed9f56.4852d","type":"template","z":"4e0e89ca.492d38","name":"","field":"template","fieldType":"msg","format":"handlebars","syntax":"mustache","template":"<table style=\"background-color: #333333; width: 100%; height: 100%;\">\n<tbody>\n<tr>\n<td style=\"text-align: center;\" colspan=\"2\">\n<h1><span style=\"color: #ffffff;\">Ingenso Pager Terminal</span></h1>\n</td>\n</tr>\n<tr>\n<td><span style=\"color: #ffffff;\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Version: {{payload.version}} </span></td>\n<td style=\"text-align: right;\"><span style=\"color: #ffffff;\">{{payload.versionDate}}&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></td>\n</tr>\n<tr>\n<td style=\"text-align: center;\" colspan=\"2\"><span style=\"color: #ffffff;\"><img src=\"https://c.yell.com/t_bigRect,f_auto/5228fd96-4bd9-43a8-b8ee-0bc267b3b63c_image_png.png\" alt=\"\" width=\"200\" height=\"150\" /></span></td>\n</tr>\n<tr>\n<td style=\"text-align: center;\" colspan=\"2\"><span style=\"color: #ffffff;\">Copyright&nbsp;&copy; 2018 Ingenso Ltd. All rights reserved</span></td>\n</tr>\n</tbody>\n</table>","output":"str","x":750,"y":1140,"wires":[["f435a8ec.5f6428"]]},{"id":"b8cddd5d.3fb0d","type":"inject","z":"4e0e89ca.492d38","name":"","topic":"","payload":"","payloadType":"str","repeat":"","crontab":"","once":true,"onceDelay":"0.2","x":150,"y":1140,"wires":[["d4a81fc5.8535e"]]},{"id":"e3853a77.5da498","type":"delay","z":"6a0a5372.58851c","name":"","pauseType":"delay","timeout":"100","timeoutUnits":"milliseconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":250,"y":180,"wires":[["c7df7ffc.b41ea"]]},{"id":"8b1afe1e.fc5f9","type":"mysql","z":"6a0a5372.58851c","mydb":"48facf19.f3141","name":"","x":940,"y":560,"wires":[["be57e7ec.efbf08"]]},{"id":"be57e7ec.efbf08","type":"split","z":"6a0a5372.58851c","name":"","splt":"\\n","spltType":"str","arraySplt":1,"arraySpltType":"len","stream":false,"addname":"","x":1070,"y":560,"wires":[["ff516f5c.ada38","a47c6e12.bad53"]]},{"id":"5512a1e2.f9681","type":"template","z":"4e0e89ca.492d38","name":"Default Font Size","field":"topic","fieldType":"msg","format":"handlebars","syntax":"mustache","template":"UPDATE font\nSET info = '5', message= '10'\nWHERE id = 1;","output":"str","x":470,"y":800,"wires":[["d604ad83.28da9"]]},{"id":"d604ad83.28da9","type":"mysql","z":"4e0e89ca.492d38","mydb":"48facf19.f3141","name":"","x":640,"y":800,"wires":[["dcdf87b9.39fb58"]]},{"id":"731d7955.154588","type":"ui_text_input","z":"b35cd955.089358","name":"","label":"","group":"a9e39f72.184aa","order":2,"width":"13","height":"2","passthru":false,"mode":"text","delay":"10","topic":"","x":600,"y":140,"wires":[["d35fd40d.344cf8"]]},{"id":"7886877c.21acf8","type":"ui_button","z":"b35cd955.089358","name":"","group":"a9e39f72.184aa","order":3,"width":"13","height":"1","passthru":false,"label":"Submit","color":"","bgcolor":"","icon":"","payload":"","payloadType":"str","topic":"","x":110,"y":180,"wires":[["854a9dda.0f0a","7906d59e.a319cc"]]},{"id":"5df4004e.d468a","type":"switch","z":"6a0a5372.58851c","name":"","property":"justSent","propertyType":"global","rules":[{"t":"false"},{"t":"true"},{"t":"null"}],"checkall":"true","repair":false,"outputs":3,"x":770,"y":580,"wires":[["8b1afe1e.fc5f9"],["df6f4690.812bb8"],["df6f4690.812bb8"]]},{"id":"55cb1870.8551c8","type":"function","z":"8c7d0b53.334a48","name":"Payload to Page","func":"var message = msg.payload;\nvar sendmessage = message.replace(/\\n/g, \" \");\nvar capcode = msg.capcode;\nvar address = \"0\" + capcode;\nvar page = \"CCPAGE,\"+ address + \",\"+ sendmessage + \"\\n\";\nmsg.payload = page\nreturn msg;","outputs":1,"noerr":0,"x":400,"y":220,"wires":[["50fd7d30.3916f4","bf9a3a93.5a32d8"]]},{"id":"bf9a3a93.5a32d8","type":"debug","z":"8c7d0b53.334a48","name":"Page Sent","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"payload","x":590,"y":180,"wires":[]},{"id":"a6496073.df94d","type":"comment","z":"8c7d0b53.334a48","name":"Send Page","info":"","x":140,"y":40,"wires":[]},{"id":"e2c75b3b.dfdc48","type":"switch","z":"8c7d0b53.334a48","name":"","property":"payload","propertyType":"msg","rules":[{"t":"null"},{"t":"cont","v":"undefined","vt":"str"},{"t":"cont","v":"null","vt":"str"}],"checkall":"true","repair":false,"outputs":3,"x":370,"y":160,"wires":[["7a0f9e6.110b66"],["7a0f9e6.110b66"],["7a0f9e6.110b66"]]},{"id":"7a0f9e6.110b66","type":"change","z":"8c7d0b53.334a48","name":"","rules":[{"t":"set","p":"payload","pt":"msg","to":"Please Enter a Message to Send","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":520,"y":140,"wires":[["8d19b53a.5b1568"]]},{"id":"97a19b23.491028","type":"switch","z":"8c7d0b53.334a48","name":"","property":"capcode","propertyType":"msg","rules":[{"t":"null"},{"t":"cont","v":"undefined","vt":"str"},{"t":"cont","v":"null","vt":"str"}],"checkall":"true","repair":false,"outputs":3,"x":370,"y":100,"wires":[["c2c7bc64.1c1b8"],["c2c7bc64.1c1b8"],["c2c7bc64.1c1b8"]]},{"id":"c2c7bc64.1c1b8","type":"change","z":"8c7d0b53.334a48","name":"","rules":[{"t":"set","p":"payload","pt":"msg","to":"Please Select a User to Send a Page to","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":520,"y":100,"wires":[["8d19b53a.5b1568"]]},{"id":"8d19b53a.5b1568","type":"delay","z":"8c7d0b53.334a48","name":"","pauseType":"rate","timeout":"5","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":true,"x":690,"y":120,"wires":[["516ac507.e3d2cc"]]},{"id":"516ac507.e3d2cc","type":"ui_toast","z":"8c7d0b53.334a48","position":"dialog","displayTime":"3","highlight":"","outputs":1,"ok":"OK","cancel":"","topic":"","name":"","x":850,"y":120,"wires":[[]]},{"id":"50fd7d30.3916f4","type":"serial out","z":"8c7d0b53.334a48","name":"","serial":"3dda2ef5.92d112","x":570,"y":220,"wires":[]},{"id":"aa644ff7.72db1","type":"serial out","z":"8c7d0b53.334a48","name":"","serial":"5c35d2ca.6e23cc","x":620,"y":260,"wires":[]},{"id":"b4f4d0c8.9ed3b","type":"template","z":"8c7d0b53.334a48","name":"","field":"payload","fieldType":"msg","format":"handlebars","syntax":"mustache","template":"Send - {{time}} - {{payload}} to {{capcode}}\n{{{<br>}}}\n{{{<br>}}}","output":"str","x":490,"y":260,"wires":[["aa644ff7.72db1"]]},{"id":"29f5d4c1.9af61c","type":"function","z":"8c7d0b53.334a48","name":"","func":"var now     = new Date(); \nvar year    = now.getFullYear();\nvar month   = now.getMonth()+1; \nvar day     = now.getDate();\nvar hour    = now.getHours();\nvar minute  = now.getMinutes();\nvar second  = now.getSeconds(); \nif(month.toString().length == 1) {\nvar month = '0'+month;\n}\nif(day.toString().length == 1) {\nvar day = '0'+day;\n}   \nif(hour.toString().length == 1) {\nvar hour = '0'+hour;\n}\nif(minute.toString().length == 1) {\nvar minute = '0'+minute;\n}\nif(second.toString().length == 1) {\nvar second = '0'+second;\n}   \nmsg.time = hour+':'+minute+':'+second;\nmsg.date = day+'/'+month+'/'+year;\n\n\nvar msgY = { payload:year };\nvar msgM = { payload:month };\nvar msgD = { payload:day };\nvar msgHH = { payload:hour };\nvar msgMM = { payload:minute };\nvar msgSS = { payload:second };\n\n\n\n\nreturn msg;","outputs":1,"noerr":0,"x":370,"y":260,"wires":[["b4f4d0c8.9ed3b"]]},{"id":"f39192e4.06a5e","type":"change","z":"8c7d0b53.334a48","name":"","rules":[{"t":"set","p":"justSent","pt":"global","to":"true","tot":"bool"}],"action":"","property":"","from":"","to":"","reg":false,"x":410,"y":40,"wires":[[]]},{"id":"7bca25.df2a15dc","type":"subflow:8c7d0b53.334a48","z":"b35cd955.089358","x":770,"y":180,"wires":[]},{"id":"373ad097.4b677","type":"subflow:8c7d0b53.334a48","z":"b35cd955.089358","x":1340,"y":520,"wires":[]},{"id":"b935eaf.d5fe218","type":"subflow:8c7d0b53.334a48","z":"b35cd955.089358","x":1520,"y":140,"wires":[]},{"id":"278c2764.84f7b8","type":"subflow:8c7d0b53.334a48","z":"b35cd955.089358","x":1360,"y":720,"wires":[]},{"id":"df6f4690.812bb8","type":"change","z":"6a0a5372.58851c","name":"","rules":[{"t":"set","p":"justSent","pt":"global","to":"false","tot":"bool"}],"action":"","property":"","from":"","to":"","reg":false,"x":970,"y":620,"wires":[[]]},{"id":"65f3d139.ae218","type":"delay","z":"6a0a5372.58851c","name":"","pauseType":"rate","timeout":"5","timeoutUnits":"seconds","rate":"1","nbRateUnits":"5","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":true,"x":600,"y":580,"wires":[["5df4004e.d468a"]]},{"id":"77ee7401.c15b6c","type":"ui_button","z":"d38e360e.d0a058","name":"","group":"6b64a97d.831898","order":6,"width":"4","height":"1","passthru":false,"label":"User Management","color":"","bgcolor":"","icon":"fa-users","payload":"UserManagement","payloadType":"str","topic":"","x":290,"y":1460,"wires":[["69eeb557.b9258c"]]},{"id":"b1869fa1.574c7","type":"inject","z":"c868d95d.03e038","name":"","topic":"","payload":"UserManagement","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":130,"y":360,"wires":[["312938f8.a2ae58"]]},{"id":"2fd5ed20.7b0092","type":"inject","z":"4e0e89ca.492d38","name":"Add Table pager","topic":"CREATE TABLE `pager` (  `lrs` int(11) NOT NULL,  `ID` int(11) DEFAULT NULL,  `system` int(11) DEFAULT NULL,  `capcode` int(11) DEFAULT NULL,  `allocated` int(11) DEFAULT NULL,  `alias` text NOT NULL,  `status` text NOT NULL,  `time` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,  `LastName` text NOT NULL,  PRIMARY KEY (`lrs`) ) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4","payload":"","payloadType":"str","repeat":"","crontab":"","once":true,"onceDelay":"9","x":150,"y":380,"wires":[["a39ab9b8.b17cc8"]]},{"id":"262d79c0.5e3456","type":"ui_button","z":"d38e360e.d0a058","name":"","group":"4fb50e08.97897","order":2,"width":"2","height":"1","passthru":false,"label":"Add","color":"","bgcolor":"","icon":"","payload":"","payloadType":"str","topic":"","x":350,"y":1820,"wires":[["ed7602b2.61db4","71eb795.62bf488"]]},{"id":"9ce73e29.3739c","type":"comment","z":"d38e360e.d0a058","name":"Pager Management","info":"","x":930,"y":1440,"wires":[]},{"id":"6dada810.738d68","type":"change","z":"d38e360e.d0a058","name":"","rules":[{"t":"set","p":"pagerNumber","pt":"flow","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":1270,"y":1660,"wires":[[]]},{"id":"37af6968.9784c6","type":"function","z":"d38e360e.d0a058","name":"","func":"var pagerID = msg.payload;\nvar systemID = flow.get('systemID');\n\n//if (systemID <= 13) {\nvar capcode = (100000 * systemID) + (8 * pagerID) + 700000;\nmsg.capcode = Number(capcode)\nmsg.pagerID = pagerID\nmsg.systemID = systemID\nmsg.KEY = pagerID + '0' + systemID\nreturn msg;\n   // } \n    \n//else { \n    \n//var capcode = 100000 * ((systemID - 14) / 9) + (10000 * ((systemID - 14) % 9)) + (8 * pagerID) + 10000;\n\n//msg.capcode = Number(capcode)\n//msg.pagerID = pagerID\n//msg.systemID = systemID\n//return msg;\n //   }","outputs":1,"noerr":0,"x":820,"y":1780,"wires":[["7a47c2f3.1dae3c","f89c619e.377f2","c7636ab0.6e4f68"]]},{"id":"7a47c2f3.1dae3c","type":"change","z":"d38e360e.d0a058","name":"","rules":[{"t":"set","p":"payload","pt":"msg","to":"","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":610,"y":1660,"wires":[["5e8fd9f0.986a98"]]},{"id":"b6d3c0f3.834ce","type":"change","z":"d38e360e.d0a058","name":"","rules":[{"t":"set","p":"removepager","pt":"global","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":1700,"y":1940,"wires":[[]]},{"id":"ce391eda.6fed8","type":"template","z":"d38e360e.d0a058","name":"","field":"topic","fieldType":"msg","format":"handlebars","syntax":"mustache","template":"SELECT ID FROM pager;","output":"str","x":620,"y":1940,"wires":[["f66cc867.a83188","c4f5684c.266a68"]]},{"id":"8e31e709.6a8c28","type":"split","z":"d38e360e.d0a058","name":"","splt":",","spltType":"str","arraySplt":1,"arraySpltType":"len","stream":true,"addname":"","x":880,"y":1940,"wires":[["ecff7360.e626"]]},{"id":"ecff7360.e626","type":"json","z":"d38e360e.d0a058","name":"","property":"payload","action":"obj","pretty":false,"x":1000,"y":1940,"wires":[["9a073556.778d68"]]},{"id":"9a073556.778d68","type":"function","z":"d38e360e.d0a058","name":"","func":"var ID = msg.payload.ID;\n\n//var input = 'Pager:' + ID +' - System:' + system ;\nvar array =  context.global.removearraypager;\nvar add = array.push(ID)\nmsg.options = array;\nreturn msg;","outputs":1,"noerr":0,"x":1120,"y":1940,"wires":[["79c647a0.88bc08"]]},{"id":"79c647a0.88bc08","type":"change","z":"d38e360e.d0a058","name":"","rules":[{"t":"delete","p":"payload","pt":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":1280,"y":1940,"wires":[["9b534e78.607f","68999f74.aab5d"]]},{"id":"c4f5684c.266a68","type":"function","z":"d38e360e.d0a058","name":"","func":"context.global.removearraypager = [];\nreturn msg;","outputs":1,"noerr":0,"x":740,"y":1980,"wires":[[]]},{"id":"218ed05c.ebcdc","type":"template","z":"d38e360e.d0a058","name":"","field":"topic","fieldType":"msg","format":"handlebars","syntax":"mustache","template":"DELETE FROM pager\nWHERE ID={{payload}};","output":"str","x":740,"y":2020,"wires":[["1ecea69d.79c689"]]},{"id":"9b534e78.607f","type":"ui_dropdown","z":"d38e360e.d0a058","name":"","label":"Pager to Remove","place":"Select Pager","group":"4fb50e08.97897","order":4,"width":"5","height":"1","passthru":false,"options":[{"label":"No Users","value":"","type":"str"}],"payload":"","topic":"","x":1480,"y":1940,"wires":[["b6d3c0f3.834ce"]]},{"id":"4b98395b.62c1e8","type":"ui_button","z":"d38e360e.d0a058","name":"","group":"4fb50e08.97897","order":5,"width":"2","height":"1","passthru":true,"label":"Remove","color":"","bgcolor":"","icon":"","payload":"removepager","payloadType":"global","topic":"","x":490,"y":2020,"wires":[["218ed05c.ebcdc","70ca5ad.17a12a4"]]},{"id":"87de4026.b0b15","type":"ui_ui_control","z":"d38e360e.d0a058","name":"","x":490,"y":1940,"wires":[["ce391eda.6fed8"]]},{"id":"f66cc867.a83188","type":"mysql","z":"d38e360e.d0a058","mydb":"48facf19.f3141","name":"","x":750,"y":1940,"wires":[["8e31e709.6a8c28"]]},{"id":"1ecea69d.79c689","type":"mysql","z":"d38e360e.d0a058","mydb":"48facf19.f3141","name":"","x":870,"y":2020,"wires":[["ce391eda.6fed8"]]},{"id":"84246eba.23057","type":"delay","z":"d38e360e.d0a058","name":"","pauseType":"delay","timeout":"5","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":1230,"y":1820,"wires":[["856509ba.168448"]]},{"id":"856509ba.168448","type":"change","z":"d38e360e.d0a058","name":"","rules":[{"t":"set","p":"payload","pt":"msg","to":"","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":1390,"y":1820,"wires":[["e0a86d2c.1384e"]]},{"id":"fe87f5fb.22a8b8","type":"change","z":"d38e360e.d0a058","name":"","rules":[{"t":"set","p":"payload","pt":"msg","to":"Successfully Added","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":1390,"y":1780,"wires":[["e0a86d2c.1384e"]]},{"id":"e0a86d2c.1384e","type":"ui_text","z":"d38e360e.d0a058","group":"4fb50e08.97897","order":3,"width":0,"height":0,"name":"","label":"","format":"{{msg.payload}}","layout":"col-center","x":1540,"y":1800,"wires":[]},{"id":"4c7f89a3.fd3188","type":"mysql","z":"d38e360e.d0a058","mydb":"48facf19.f3141","name":"","x":1090,"y":1780,"wires":[["fe87f5fb.22a8b8","84246eba.23057","9a0a6f19.ace8e"]]},{"id":"f89c619e.377f2","type":"template","z":"d38e360e.d0a058","name":"","field":"topic","fieldType":"msg","format":"handlebars","syntax":"mustache","template":"INSERT INTO pager (lrs, ID, system, capcode,allocated,status)\nVALUES ('{{KEY}}', '{{pagerID}}','{{systemID}}', '{{capcode}}',0,'Never Issued');","output":"str","x":960,"y":1780,"wires":[["4c7f89a3.fd3188"]]},{"id":"4034beca.756dd","type":"catch","z":"d38e360e.d0a058","name":"","scope":["4c7f89a3.fd3188"],"x":1090,"y":1720,"wires":[["66febfc2.f3f1a","1c5f482f.647d98"]]},{"id":"66febfc2.f3f1a","type":"switch","z":"d38e360e.d0a058","name":"","property":"error.message","propertyType":"msg","rules":[{"t":"cont","v":"Duplicate","vt":"str"}],"checkall":"true","repair":false,"outputs":1,"x":1220,"y":1740,"wires":[["67fc5f6d.bce07"]]},{"id":"1c5f482f.647d98","type":"debug","z":"d38e360e.d0a058","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"error.message","x":1260,"y":1698,"wires":[]},{"id":"67fc5f6d.bce07","type":"change","z":"d38e360e.d0a058","name":"","rules":[{"t":"set","p":"payload","pt":"msg","to":"Pager Already Exists! ","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":1370,"y":1740,"wires":[["5d201066.1f1e3"]]},{"id":"5d201066.1f1e3","type":"change","z":"d38e360e.d0a058","name":"","rules":[{"t":"set","p":"topic","pt":"msg","to":"ERROR!","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":1540,"y":1740,"wires":[["60b63eb6.80c51"]]},{"id":"60b63eb6.80c51","type":"ui_toast","z":"d38e360e.d0a058","position":"dialog","displayTime":"3","highlight":"","outputs":1,"ok":"OK","cancel":"","topic":"","name":"","x":1700,"y":1740,"wires":[[]]},{"id":"c0e9bb83.e11898","type":"ui_toast","z":"d38e360e.d0a058","position":"dialog","displayTime":"3","highlight":"","outputs":1,"ok":"OK","cancel":"","topic":"","name":"","x":1580,"y":1620,"wires":[[]]},{"id":"ca35a933.86e198","type":"switch","z":"d38e360e.d0a058","name":"","property":"payload","propertyType":"msg","rules":[{"t":"cont","v":".","vt":"str"},{"t":"cont","v":"*","vt":"str"},{"t":"cont","v":"$","vt":"str"},{"t":"cont","v":"+","vt":"str"},{"t":"cont","v":"(","vt":"str"},{"t":"cont","v":")","vt":"str"},{"t":"cont","v":"-","vt":"str"},{"t":"cont","v":"#","vt":"str"},{"t":"eq","v":"0","vt":"str"},{"t":"null"},{"t":"else"}],"checkall":"false","repair":false,"outputs":11,"x":1100,"y":1620,"wires":[["ea5dbffa.d621c"],["ea5dbffa.d621c"],["ea5dbffa.d621c"],["ea5dbffa.d621c"],["ea5dbffa.d621c"],["ea5dbffa.d621c"],["ea5dbffa.d621c"],["ea5dbffa.d621c"],[],["c94855ed.6cf428"],["6dada810.738d68"]]},{"id":"9aa8931d.c1381","type":"change","z":"d38e360e.d0a058","name":"","rules":[{"t":"set","p":"topic","pt":"msg","to":"ERROR!","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":1420,"y":1620,"wires":[["c0e9bb83.e11898"]]},{"id":"c94855ed.6cf428","type":"change","z":"d38e360e.d0a058","name":"","rules":[{"t":"set","p":"payload","pt":"msg","to":"Please Enter a Number","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":1250,"y":1620,"wires":[["9aa8931d.c1381"]]},{"id":"851a2ace.78af58","type":"inject","z":"d38e360e.d0a058","name":"","topic":"","payload":"Settings","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":880,"y":1480,"wires":[["7440f632.06d9b8"]]},{"id":"7440f632.06d9b8","type":"ui_ui_control","z":"d38e360e.d0a058","name":"","x":1020,"y":1480,"wires":[[]]},{"id":"70ca5ad.17a12a4","type":"debug","z":"d38e360e.d0a058","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"payload","x":640,"y":2060,"wires":[]},{"id":"4d3de3f2.4fa4cc","type":"comment","z":"d38e360e.d0a058","name":"Users","info":"","x":390,"y":2160,"wires":[]},{"id":"8ad2ea13.f83678","type":"debug","z":"d38e360e.d0a058","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"options","x":1430,"y":2360,"wires":[]},{"id":"bd96f15c.bef66","type":"json","z":"d38e360e.d0a058","name":"","property":"payload","action":"","pretty":false,"x":1170,"y":2400,"wires":[["e1f80e01.87849"]]},{"id":"e1f80e01.87849","type":"function","z":"d38e360e.d0a058","name":"","func":"var input = msg.payload\nvar array =  context.global.userarray;\nvar add = array.push(input)\nmsg.options = array;\nreturn msg;","outputs":1,"noerr":0,"x":1290,"y":2400,"wires":[["8ad2ea13.f83678","4e3769c3.43d268"]]},{"id":"655767bf.294218","type":"function","z":"d38e360e.d0a058","name":"","func":"context.global.userarray = [];\nreturn msg;","outputs":1,"noerr":0,"x":670,"y":2440,"wires":[[]]},{"id":"66e12dd5.727374","type":"link out","z":"d38e360e.d0a058","name":"Recepient","links":["426242d0.7c5f4c","3574f737.6b5878","10662b01.781ff5","2cfe0d0a.3e3402","8683b61.4ba4648","ada1bb8f.f68258"],"x":1455,"y":2920,"wires":[]},{"id":"5e0df141.f69e","type":"template","z":"d38e360e.d0a058","name":"","field":"topic","fieldType":"msg","format":"handlebars","syntax":"mustache","template":"INSERT INTO user (name, capcode)\nVALUES ('{{payload}}','0');","output":"str","x":550,"y":2320,"wires":[["bef58d65.ae205"]]},{"id":"98333341.9987b","type":"switch","z":"d38e360e.d0a058","name":"","property":"error.message","propertyType":"msg","rules":[{"t":"cont","v":"Duplicate","vt":"str"}],"checkall":"true","repair":false,"outputs":1,"x":690,"y":2280,"wires":[["22c05bca.1fb0a4"]]},{"id":"22c05bca.1fb0a4","type":"change","z":"d38e360e.d0a058","name":"","rules":[{"t":"set","p":"payload","pt":"msg","to":"Name Already Exists! ","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":840,"y":2280,"wires":[["bbf4df09.e537a"]]},{"id":"5b59af8.0e2985","type":"change","z":"d38e360e.d0a058","name":"","rules":[{"t":"set","p":"payload","pt":"msg","to":"Successfully Added","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":980,"y":2320,"wires":[["fe599e05.9f8c8"]]},{"id":"b044778c.c75058","type":"catch","z":"d38e360e.d0a058","name":"","scope":["bef58d65.ae205"],"x":560,"y":2260,"wires":[["98333341.9987b","d08db208.f3e1f"]]},{"id":"b9042299.810a","type":"template","z":"d38e360e.d0a058","name":"","field":"topic","fieldType":"msg","format":"handlebars","syntax":"mustache","template":"SELECT * FROM user;","output":"str","x":550,"y":2400,"wires":[["a9f6fd39.198fa","655767bf.294218"]]},{"id":"d08db208.f3e1f","type":"debug","z":"d38e360e.d0a058","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"error.message","x":730,"y":2238,"wires":[]},{"id":"7d9d43c4.7d08cc","type":"split","z":"d38e360e.d0a058","name":"","splt":",","spltType":"str","arraySplt":1,"arraySpltType":"len","stream":true,"addname":"","x":810,"y":2400,"wires":[["9da578e3.c93fc8"]]},{"id":"582e4aa6.244214","type":"change","z":"d38e360e.d0a058","name":"","rules":[{"t":"set","p":"remove","pt":"global","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":1590,"y":2480,"wires":[[]]},{"id":"1d0a747e.44d38c","type":"template","z":"d38e360e.d0a058","name":"","field":"topic","fieldType":"msg","format":"handlebars","syntax":"mustache","template":"SELECT name FROM user;","output":"str","x":550,"y":2480,"wires":[["113d488e.4b6017","74dadd83.e39dd4"]]},{"id":"57ab02dc.85988c","type":"split","z":"d38e360e.d0a058","name":"","splt":",","spltType":"str","arraySplt":1,"arraySpltType":"len","stream":true,"addname":"","x":810,"y":2480,"wires":[["1c7065d0.0ddd0a"]]},{"id":"1c7065d0.0ddd0a","type":"json","z":"d38e360e.d0a058","name":"","property":"payload","action":"obj","pretty":false,"x":930,"y":2480,"wires":[["ffef7c16.8b9e7"]]},{"id":"ffef7c16.8b9e7","type":"function","z":"d38e360e.d0a058","name":"","func":"var input = msg.payload.name\nvar array =  context.global.removearray;\nvar add = array.push(input)\nmsg.options = array;\nreturn msg;","outputs":1,"noerr":0,"x":1050,"y":2480,"wires":[["3631cb67.ea5a14"]]},{"id":"3631cb67.ea5a14","type":"change","z":"d38e360e.d0a058","name":"","rules":[{"t":"delete","p":"payload","pt":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":1210,"y":2480,"wires":[["ebf59213.75df7","43ac03ff.2fe2fc"]]},{"id":"74dadd83.e39dd4","type":"function","z":"d38e360e.d0a058","name":"","func":"context.global.removearray = [];\nreturn msg;","outputs":1,"noerr":0,"x":670,"y":2520,"wires":[[]]},{"id":"43ac03ff.2fe2fc","type":"debug","z":"d38e360e.d0a058","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"options","x":1390,"y":2440,"wires":[]},{"id":"777434a7.f1d62c","type":"template","z":"d38e360e.d0a058","name":"","field":"topic","fieldType":"msg","format":"handlebars","syntax":"mustache","template":"DELETE FROM user\nWHERE name='{{payload}}';","output":"str","x":550,"y":2560,"wires":[["31f6f779.932ec8"]]},{"id":"bbf4df09.e537a","type":"change","z":"d38e360e.d0a058","name":"","rules":[{"t":"set","p":"topic","pt":"msg","to":"ERROR!","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":1010,"y":2280,"wires":[["e2deefa9.53a9e"]]},{"id":"d173cfee.62b63","type":"delay","z":"d38e360e.d0a058","name":"","pauseType":"delay","timeout":"5","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":820,"y":2360,"wires":[["25a1ce0.ae35f32"]]},{"id":"25a1ce0.ae35f32","type":"change","z":"d38e360e.d0a058","name":"","rules":[{"t":"set","p":"payload","pt":"msg","to":"","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":980,"y":2360,"wires":[["fe599e05.9f8c8"]]},{"id":"4e3769c3.43d268","type":"change","z":"d38e360e.d0a058","name":"","rules":[{"t":"delete","p":"payload","pt":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":1450,"y":2400,"wires":[[]]},{"id":"ebf59213.75df7","type":"ui_dropdown","z":"d38e360e.d0a058","name":"","label":"User to Remove","place":"Select option","group":"294daf05.76129","order":4,"width":"5","height":"1","passthru":false,"options":[{"label":"No Users","value":"","type":"str"}],"payload":"","topic":"","x":1400,"y":2480,"wires":[["582e4aa6.244214"]]},{"id":"3e28cb14.334d54","type":"ui_button","z":"d38e360e.d0a058","name":"","group":"294daf05.76129","order":5,"width":"2","height":"1","passthru":true,"label":"Remove","color":"","bgcolor":"","icon":"","payload":"remove","payloadType":"global","topic":"","x":420,"y":2560,"wires":[["777434a7.f1d62c"]]},{"id":"fe599e05.9f8c8","type":"ui_text","z":"d38e360e.d0a058","group":"294daf05.76129","order":3,"width":0,"height":0,"name":"","label":"","format":"{{msg.payload}}","layout":"col-center","x":1130,"y":2340,"wires":[]},{"id":"e2deefa9.53a9e","type":"ui_toast","z":"d38e360e.d0a058","position":"dialog","displayTime":"3","highlight":"","outputs":1,"ok":"OK","cancel":"","topic":"","name":"","x":1170,"y":2280,"wires":[[]]},{"id":"8d8fa39.f9aa06","type":"ui_ui_control","z":"d38e360e.d0a058","name":"","x":420,"y":2480,"wires":[["1d0a747e.44d38c"]]},{"id":"785d9330.57c26c","type":"ui_ui_control","z":"d38e360e.d0a058","name":"","x":420,"y":2400,"wires":[["b9042299.810a"]]},{"id":"bef58d65.ae205","type":"mysql","z":"d38e360e.d0a058","mydb":"48facf19.f3141","name":"","x":680,"y":2320,"wires":[["5b59af8.0e2985","d173cfee.62b63"]]},{"id":"a9f6fd39.198fa","type":"mysql","z":"d38e360e.d0a058","mydb":"48facf19.f3141","name":"","x":680,"y":2400,"wires":[["7d9d43c4.7d08cc"]]},{"id":"113d488e.4b6017","type":"mysql","z":"d38e360e.d0a058","mydb":"48facf19.f3141","name":"","x":680,"y":2480,"wires":[["57ab02dc.85988c"]]},{"id":"31f6f779.932ec8","type":"mysql","z":"d38e360e.d0a058","mydb":"48facf19.f3141","name":"","x":680,"y":2560,"wires":[["1d0a747e.44d38c"]]},{"id":"d4f5d044.a3f48","type":"ui_dropdown","z":"7064f3a.3a30e0c","name":"","label":"User","place":"Select User","group":"383d123a.fcaa5e","order":1,"width":0,"height":0,"passthru":true,"options":[{"label":"","value":"","type":"str"}],"payload":"","topic":"","x":1670,"y":140,"wires":[["6e24893e.c069e8","7046cdb1.c054a4"]]},{"id":"f479ab4b.d06c88","type":"ui_button","z":"7064f3a.3a30e0c","name":"","group":"383d123a.fcaa5e","order":3,"width":0,"height":0,"passthru":false,"label":"Login","color":"","bgcolor":"","icon":"","payload":"user","payloadType":"flow","topic":"","x":70,"y":420,"wires":[["c2955c56.a3c2b"]]},{"id":"cfaf5162.b03d3","type":"ui_dropdown","z":"7064f3a.3a30e0c","name":"","label":"User","place":"Select User","group":"90954bd.aeb17b8","order":1,"width":0,"height":0,"passthru":true,"options":[{"label":"","value":"","type":"str"}],"payload":"","topic":"","x":1630,"y":720,"wires":[["19567279.56d07e"]]},{"id":"7016adef.b63fb4","type":"ui_button","z":"7064f3a.3a30e0c","name":"","group":"90954bd.aeb17b8","order":2,"width":0,"height":0,"passthru":false,"label":"Logout","color":"","bgcolor":"","icon":"","payload":"removeuser","payloadType":"flow","topic":"","x":130,"y":860,"wires":[["b54f2eb4.18cca"]]},{"id":"2dd70ab7.10d376","type":"ui_button","z":"7064f3a.3a30e0c","name":"Home","group":"5bf95f8b.69b7","order":11,"width":"1","height":"8","passthru":false,"label":"","color":"","bgcolor":"","icon":"fa-home","payload":"Menu","payloadType":"str","topic":"","x":70,"y":1220,"wires":[["8ace9512.8b5b98"]]},{"id":"8ace9512.8b5b98","type":"ui_ui_control","z":"7064f3a.3a30e0c","name":"ui control","x":200,"y":1220,"wires":[[]]},{"id":"76d0e07.eb0fd2","type":"ui_dropdown","z":"7064f3a.3a30e0c","name":"","label":"Pager","place":"Select Pager","group":"383d123a.fcaa5e","order":2,"width":0,"height":0,"passthru":true,"options":[{"label":"","value":"","type":"str"}],"payload":"","topic":"","x":1650,"y":240,"wires":[["d7d60439.c861b8","c3bc599.48e3aa8"]]},{"id":"68999f74.aab5d","type":"link out","z":"d38e360e.d0a058","name":"Pager","links":["7e64cc85.455f04"],"x":1425,"y":2020,"wires":[]},{"id":"9da578e3.c93fc8","type":"json","z":"d38e360e.d0a058","name":"","property":"payload","action":"obj","pretty":false,"x":930,"y":2400,"wires":[["1af7ce79.0327a2"]]},{"id":"1af7ce79.0327a2","type":"function","z":"d38e360e.d0a058","name":"","func":"var name = msg.payload.name;\nvar user = \"{\\\"\" + name + \"\\\":\\\"\" + name + \"\\\"}\";\nmsg.payload= user;\nreturn msg;","outputs":1,"noerr":0,"x":1050,"y":2400,"wires":[["bd96f15c.bef66"]]},{"id":"236d3a7b.31b596","type":"template","z":"7064f3a.3a30e0c","name":"Get Capcode","field":"topic","fieldType":"msg","format":"handlebars","syntax":"mustache","template":"SELECT capcode FROM pager\nWHERE ID={{payload}};","output":"str","x":1990,"y":240,"wires":[["4d69c638.903da8"]]},{"id":"4d69c638.903da8","type":"mysql","z":"7064f3a.3a30e0c","mydb":"48facf19.f3141","name":"","x":2140,"y":240,"wires":[["e90c05ca.677238"]]},{"id":"d7d60439.c861b8","type":"switch","z":"7064f3a.3a30e0c","name":"Check valid Pager","property":"payload","propertyType":"msg","rules":[{"t":"cont","v":"All Pagers","vt":"str"},{"t":"null"},{"t":"nnull"}],"checkall":"false","repair":false,"outputs":3,"x":1810,"y":240,"wires":[[],[],["236d3a7b.31b596","7483449f.6f606c"]]},{"id":"6e24893e.c069e8","type":"switch","z":"7064f3a.3a30e0c","name":"Check Valid Name","property":"payload","propertyType":"msg","rules":[{"t":"cont","v":"All Users","vt":"str"},{"t":"null"},{"t":"nnull"}],"checkall":"false","repair":false,"outputs":3,"x":1830,"y":140,"wires":[[],[],["67e31101.dda2c"]]},{"id":"67e31101.dda2c","type":"change","z":"7064f3a.3a30e0c","name":"","rules":[{"t":"set","p":"user","pt":"flow","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":2010,"y":140,"wires":[[]]},{"id":"1e052e7.a01d3d2","type":"change","z":"7064f3a.3a30e0c","name":"","rules":[{"t":"set","p":"capcode","pt":"flow","to":"payload.capcode","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":2430,"y":240,"wires":[[]]},{"id":"e90c05ca.677238","type":"split","z":"7064f3a.3a30e0c","name":"","splt":"\\n","spltType":"str","arraySplt":1,"arraySpltType":"len","stream":false,"addname":"","x":2270,"y":240,"wires":[["1e052e7.a01d3d2"]]},{"id":"12b181ac.5071fe","type":"template","z":"7064f3a.3a30e0c","name":"Assign Capcode to User","field":"topic","fieldType":"msg","format":"handlebars","syntax":"mustache","template":"UPDATE user\nSET capcode = '{{flow.capcode}}'\nWHERE name = '{{payload}}';","output":"str","x":670,"y":380,"wires":[["b7114df3.d7c46"]]},{"id":"b7114df3.d7c46","type":"mysql","z":"7064f3a.3a30e0c","mydb":"48facf19.f3141","name":"","x":860,"y":380,"wires":[["3f312a68.9317c6","2505de33.17e692","5e07c936.cc49e8"]]},{"id":"3f312a68.9317c6","type":"template","z":"7064f3a.3a30e0c","name":"Make Message","field":"payload","fieldType":"msg","format":"handlebars","syntax":"mustache","template":"Pager {{flow.pager}} assigned to {{flow.user}}","output":"str","x":1020,"y":380,"wires":[["6cf7049c.98296c"]]},{"id":"7483449f.6f606c","type":"change","z":"7064f3a.3a30e0c","name":"","rules":[{"t":"set","p":"pager","pt":"flow","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":2000,"y":280,"wires":[[]]},{"id":"9c5acb7d.950c68","type":"ui_toast","z":"7064f3a.3a30e0c","position":"dialog","displayTime":"3","highlight":"","outputs":1,"ok":"OK","cancel":"","topic":"","name":"","x":1350,"y":380,"wires":[["9b1c0f9f.2c42e"]]},{"id":"6cf7049c.98296c","type":"change","z":"7064f3a.3a30e0c","name":"","rules":[{"t":"set","p":"topic","pt":"msg","to":"Logged In","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":1190,"y":380,"wires":[["9c5acb7d.950c68"]]},{"id":"afa1cf88.26242","type":"template","z":"7064f3a.3a30e0c","name":"Allocate Pager","field":"topic","fieldType":"msg","format":"handlebars","syntax":"mustache","template":"UPDATE pager\nSET allocated = '1'\nWHERE ID = '{{flow.pager}}';","output":"str","x":640,"y":420,"wires":[["21b16c30.67f2b4"]]},{"id":"21b16c30.67f2b4","type":"mysql","z":"7064f3a.3a30e0c","mydb":"48facf19.f3141","name":"","x":800,"y":420,"wires":[[]]},{"id":"cb0b426d.f2fe7","type":"change","z":"7064f3a.3a30e0c","name":"","rules":[{"t":"delete","p":"payload","pt":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":1510,"y":140,"wires":[["d4f5d044.a3f48","31b9c2ef.cc63fe"]]},{"id":"26adf7c4.9fc308","type":"function","z":"7064f3a.3a30e0c","name":"Make Names into Array","func":"var input = msg.payload\nvar array =  context.global.userarraylogin;\nvar add = array.push(input)\nmsg.options = array;\nreturn msg;","outputs":1,"noerr":0,"x":1290,"y":140,"wires":[["cb0b426d.f2fe7"]]},{"id":"4956645.277f59c","type":"json","z":"7064f3a.3a30e0c","name":"","property":"payload","action":"","pretty":false,"x":1110,"y":140,"wires":[["26adf7c4.9fc308"]]},{"id":"7df30abb.0471e4","type":"function","z":"7064f3a.3a30e0c","name":"Make Name Option","func":"var name = msg.payload.name;\nvar user = \"{\\\"\" + name + \"\\\":\\\"\" + name + \"\\\"}\";\nmsg.payload= user;\nreturn msg;","outputs":1,"noerr":0,"x":950,"y":140,"wires":[["4956645.277f59c"]]},{"id":"cb9a046c.16bda8","type":"template","z":"7064f3a.3a30e0c","name":"Get Unassigned Names","field":"topic","fieldType":"msg","format":"handlebars","syntax":"mustache","template":"SELECT name FROM user\nWHERE capcode = '0';","output":"str","x":350,"y":140,"wires":[["5dc6bb22.d107f4","cfd1a816.ab1ba8"]]},{"id":"1eea9b1.6833365","type":"ui_ui_control","z":"7064f3a.3a30e0c","name":"","x":160,"y":140,"wires":[["cb9a046c.16bda8"]]},{"id":"f29aa877.5406c8","type":"change","z":"7064f3a.3a30e0c","name":"","rules":[{"t":"delete","p":"payload","pt":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":1490,"y":240,"wires":[["76d0e07.eb0fd2","76fc4262.2d077c"]]},{"id":"a905326d.993ba","type":"function","z":"7064f3a.3a30e0c","name":"Make Pager Into Array","func":"var input = msg.payload\nvar array =  context.global.pagerarraylogin;\nvar add = array.push(input)\nmsg.options = array;\nreturn msg;","outputs":1,"noerr":0,"x":1280,"y":240,"wires":[["f29aa877.5406c8"]]},{"id":"bbd577db.3bfa58","type":"json","z":"7064f3a.3a30e0c","name":"","property":"payload","action":"","pretty":false,"x":1110,"y":240,"wires":[["a905326d.993ba"]]},{"id":"cb5e758e.37cfe8","type":"function","z":"7064f3a.3a30e0c","name":"Make Pager Option","func":"var pager = msg.payload.ID;\nvar user = \"{\\\"\" + pager + \"\\\":\\\"\" + pager + \"\\\"}\";\nmsg.payload= user;\nreturn msg;","outputs":1,"noerr":0,"x":950,"y":240,"wires":[["bbd577db.3bfa58"]]},{"id":"17e033e4.3f2f1c","type":"json","z":"7064f3a.3a30e0c","name":"","property":"payload","action":"obj","pretty":false,"x":790,"y":240,"wires":[["cb5e758e.37cfe8"]]},{"id":"757f8bdf.6fef14","type":"split","z":"7064f3a.3a30e0c","name":"","splt":",","spltType":"str","arraySplt":1,"arraySpltType":"len","stream":true,"addname":"","x":670,"y":240,"wires":[["17e033e4.3f2f1c"]]},{"id":"66fd9211.67986c","type":"mysql","z":"7064f3a.3a30e0c","mydb":"48facf19.f3141","name":"","x":540,"y":240,"wires":[["757f8bdf.6fef14"]]},{"id":"4ede3cb7.999274","type":"template","z":"7064f3a.3a30e0c","name":"Get Unassigned Pagers","field":"topic","fieldType":"msg","format":"handlebars","syntax":"mustache","template":"SELECT ID FROM pager\nWHERE allocated = '0';","output":"str","x":350,"y":240,"wires":[["66fd9211.67986c","4f27cbd9.758754"]]},{"id":"2be9606d.2beb7","type":"ui_ui_control","z":"7064f3a.3a30e0c","name":"","x":160,"y":240,"wires":[["4ede3cb7.999274"]]},{"id":"8a180749.f84588","type":"change","z":"7064f3a.3a30e0c","name":"","rules":[{"t":"delete","p":"payload","pt":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":1470,"y":720,"wires":[["cfaf5162.b03d3","9f2f86a9.198718"]]},{"id":"1ff9ad20.cad7e3","type":"function","z":"7064f3a.3a30e0c","name":"Make Name into Array","func":"var input = msg.payload\nvar array =  context.global.pagerarraylogout;\nvar add = array.push(input)\nmsg.options = array;\nreturn msg;","outputs":1,"noerr":0,"x":1260,"y":720,"wires":[["8a180749.f84588"]]},{"id":"fa75dfdc.ec918","type":"json","z":"7064f3a.3a30e0c","name":"","property":"payload","action":"","pretty":false,"x":1090,"y":720,"wires":[["1ff9ad20.cad7e3"]]},{"id":"c7c3ec34.e12c7","type":"function","z":"7064f3a.3a30e0c","name":"Make Name Option","func":"var name = msg.payload.name;\nvar user = \"{\\\"\" + name + \"\\\":\\\"\" + name + \"\\\"}\";\nmsg.payload= user;\nreturn msg;","outputs":1,"noerr":0,"x":930,"y":720,"wires":[["fa75dfdc.ec918"]]},{"id":"ea4cbbc3.98e7f8","type":"json","z":"7064f3a.3a30e0c","name":"","property":"payload","action":"obj","pretty":false,"x":770,"y":720,"wires":[["c7c3ec34.e12c7"]]},{"id":"36ffabfa.cc0074","type":"split","z":"7064f3a.3a30e0c","name":"","splt":",","spltType":"str","arraySplt":1,"arraySpltType":"len","stream":true,"addname":"","x":650,"y":720,"wires":[["ea4cbbc3.98e7f8"]]},{"id":"9aab098d.bb94a8","type":"mysql","z":"7064f3a.3a30e0c","mydb":"48facf19.f3141","name":"","x":520,"y":720,"wires":[["36ffabfa.cc0074"]]},{"id":"b0960999.faabd8","type":"template","z":"7064f3a.3a30e0c","name":"Find Assigned Users","field":"topic","fieldType":"msg","format":"handlebars","syntax":"mustache","template":"SELECT name FROM user\nWHERE capcode != 0;","output":"str","x":340,"y":720,"wires":[["9aab098d.bb94a8","e86967d5.4af078"]]},{"id":"aa588117.74648","type":"ui_ui_control","z":"7064f3a.3a30e0c","name":"","x":160,"y":720,"wires":[["b0960999.faabd8"]]},{"id":"9f2f86a9.198718","type":"debug","z":"7064f3a.3a30e0c","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"options","x":1650,"y":680,"wires":[]},{"id":"fa3df29a.32177","type":"template","z":"7064f3a.3a30e0c","name":"","field":"topic","fieldType":"msg","format":"handlebars","syntax":"mustache","template":"UPDATE user\nSET capcode = '0'\nWHERE name = '{{flow.removeuser}}';","output":"str","x":710,"y":820,"wires":[["cfd16a5a.4bfd88"]]},{"id":"cfd16a5a.4bfd88","type":"mysql","z":"7064f3a.3a30e0c","mydb":"48facf19.f3141","name":"","x":840,"y":821,"wires":[["e978fcd8.bf8b2"]]},{"id":"840c4a63.0d0858","type":"change","z":"7064f3a.3a30e0c","name":"","rules":[{"t":"set","p":"removeuser","pt":"flow","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":2020,"y":720,"wires":[[]]},{"id":"e978fcd8.bf8b2","type":"debug","z":"7064f3a.3a30e0c","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","x":970,"y":821,"wires":[]},{"id":"9c081db.f627de","type":"template","z":"7064f3a.3a30e0c","name":"","field":"topic","fieldType":"msg","format":"handlebars","syntax":"mustache","template":"UPDATE pager\nSET allocated = '0'\nWHERE capcode = '{{payload.capcode}}';","output":"str","x":830,"y":860,"wires":[["7aa6b177.c5a57"]]},{"id":"7aa6b177.c5a57","type":"mysql","z":"7064f3a.3a30e0c","mydb":"48facf19.f3141","name":"","x":960,"y":860,"wires":[["f9427432.c8a708"]]},{"id":"529109c6.407768","type":"template","z":"7064f3a.3a30e0c","name":"","field":"topic","fieldType":"msg","format":"handlebars","syntax":"mustache","template":"SELECT capcode FROM user\nWHERE name = '{{payload}}';","output":"str","x":450,"y":860,"wires":[["21499754.be4c18"]]},{"id":"21499754.be4c18","type":"mysql","z":"7064f3a.3a30e0c","mydb":"48facf19.f3141","name":"","x":580,"y":860,"wires":[["9dc84217.ace05","fa3df29a.32177"]]},{"id":"9dc84217.ace05","type":"split","z":"7064f3a.3a30e0c","name":"","splt":",","spltType":"str","arraySplt":1,"arraySpltType":"len","stream":true,"addname":"","x":710,"y":860,"wires":[["9c081db.f627de","38504a91.aaf636","734ca0ff.0eb2e"]]},{"id":"f9427432.c8a708","type":"debug","z":"7064f3a.3a30e0c","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","x":1090,"y":860,"wires":[]},{"id":"cfd1a816.ab1ba8","type":"function","z":"7064f3a.3a30e0c","name":"Setup Array","func":"context.global.userarraylogin = [];\nreturn msg;","outputs":1,"noerr":0,"x":550,"y":100,"wires":[["ead41d18.18cde"]]},{"id":"4f27cbd9.758754","type":"function","z":"7064f3a.3a30e0c","name":"Setup Array","func":"context.global.pagerarraylogin = [];\nreturn msg;","outputs":1,"noerr":0,"x":550,"y":200,"wires":[["bf838437.718418"]]},{"id":"76fc4262.2d077c","type":"debug","z":"7064f3a.3a30e0c","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"options","x":1670,"y":200,"wires":[]},{"id":"31b9c2ef.cc63fe","type":"debug","z":"7064f3a.3a30e0c","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"options","x":1690,"y":100,"wires":[]},{"id":"e86967d5.4af078","type":"function","z":"7064f3a.3a30e0c","name":"Setup Array","func":"context.global.pagerarraylogout = [];\nreturn msg;","outputs":1,"noerr":0,"x":530,"y":680,"wires":[["8c2e07a6.430708"]]},{"id":"5dc6bb22.d107f4","type":"mysql","z":"7064f3a.3a30e0c","mydb":"48facf19.f3141","name":"","x":540,"y":140,"wires":[["f2d58fdb.6708c"]]},{"id":"f2d58fdb.6708c","type":"split","z":"7064f3a.3a30e0c","name":"","splt":",","spltType":"str","arraySplt":1,"arraySpltType":"len","stream":true,"addname":"","x":670,"y":140,"wires":[["8b677f4.503528"]]},{"id":"8b677f4.503528","type":"json","z":"7064f3a.3a30e0c","name":"","property":"payload","action":"obj","pretty":false,"x":790,"y":140,"wires":[["7df30abb.0471e4"]]},{"id":"4c4ea549.de452c","type":"debug","z":"d38e360e.d0a058","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"options","x":1310,"y":2880,"wires":[]},{"id":"3f44e5fd.d0b5ba","type":"json","z":"d38e360e.d0a058","name":"","property":"payload","action":"","pretty":false,"x":1050,"y":2920,"wires":[["371fc26b.10131e"]]},{"id":"371fc26b.10131e","type":"function","z":"d38e360e.d0a058","name":"","func":"var input = msg.payload\nvar array =  context.global.userarrayava;\nvar add = array.push(input)\nmsg.options = array;\nreturn msg;","outputs":1,"noerr":0,"x":1170,"y":2920,"wires":[["4c4ea549.de452c","18d6712a.d6779f"]]},{"id":"72840ef8.aa04c","type":"template","z":"d38e360e.d0a058","name":"","field":"topic","fieldType":"msg","format":"handlebars","syntax":"mustache","template":"SELECT * FROM user\nWHERE capcode != '0';","output":"str","x":430,"y":2920,"wires":[["46417590.0ab0bc","93385212.60a43"]]},{"id":"2d4afdd8.730022","type":"split","z":"d38e360e.d0a058","name":"","splt":",","spltType":"str","arraySplt":1,"arraySpltType":"len","stream":true,"addname":"","x":690,"y":2920,"wires":[["7eea3a63.863754"]]},{"id":"18d6712a.d6779f","type":"change","z":"d38e360e.d0a058","name":"","rules":[{"t":"delete","p":"payload","pt":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":1330,"y":2920,"wires":[["66e12dd5.727374"]]},{"id":"153c5b58.eb4505","type":"ui_ui_control","z":"d38e360e.d0a058","name":"","x":160,"y":2920,"wires":[["7fb7ca05.2d6294"]]},{"id":"46417590.0ab0bc","type":"mysql","z":"d38e360e.d0a058","mydb":"48facf19.f3141","name":"","x":560,"y":2920,"wires":[["2d4afdd8.730022"]]},{"id":"7eea3a63.863754","type":"json","z":"d38e360e.d0a058","name":"","property":"payload","action":"obj","pretty":false,"x":810,"y":2920,"wires":[["74b7e99b.1870b8"]]},{"id":"74b7e99b.1870b8","type":"function","z":"d38e360e.d0a058","name":"","func":"var name = msg.payload.name;\nvar capcode = msg.payload.capcode;\nvar user = \"{\\\"\" + name + \"\\\":\\\"\" + capcode + \"\\\"}\";\nmsg.payload= user;\nreturn msg;","outputs":1,"noerr":0,"x":930,"y":2920,"wires":[["3f44e5fd.d0b5ba"]]},{"id":"93385212.60a43","type":"function","z":"d38e360e.d0a058","name":"","func":"context.global.userarrayava = [];\nreturn msg;","outputs":1,"noerr":0,"x":570,"y":2980,"wires":[[]]},{"id":"5e07c936.cc49e8","type":"change","z":"7064f3a.3a30e0c","name":"Clear Last Selected User","rules":[{"t":"delete","p":"user","pt":"flow"}],"action":"","property":"","from":"","to":"","reg":false,"x":1050,"y":460,"wires":[[]]},{"id":"2505de33.17e692","type":"change","z":"7064f3a.3a30e0c","name":"Clear Last Selected Pager","rules":[{"t":"delete","p":"pager","pt":"flow"}],"action":"","property":"","from":"","to":"","reg":false,"x":1050,"y":420,"wires":[[]]},{"id":"8ba51f58.d183f","type":"change","z":"7064f3a.3a30e0c","name":"Clear Last Logged Out","rules":[{"t":"delete","p":"removeuser","pt":"flow"}],"action":"","property":"","from":"","to":"","reg":false,"x":1080,"y":1000,"wires":[[]]},{"id":"ead41d18.18cde","type":"function","z":"7064f3a.3a30e0c","name":"Generate Blank Dropdown","func":"var options = \"All Users Logged In\";\nmsg.options= [options];\nreturn msg;","outputs":1,"noerr":0,"x":1000,"y":100,"wires":[["cb0b426d.f2fe7"]]},{"id":"8c2e07a6.430708","type":"function","z":"7064f3a.3a30e0c","name":"Make Blank Dropdown","func":"var options = \"No Users Logged In\";\nmsg.options= [options];\nreturn msg;","outputs":1,"noerr":0,"x":940,"y":680,"wires":[["8a180749.f84588"]]},{"id":"bf838437.718418","type":"function","z":"7064f3a.3a30e0c","name":"Generate Blank Dropdown","func":"var options = \"All Pagers Issued\";\nmsg.options= [options];\nreturn msg;","outputs":1,"noerr":0,"x":1000,"y":200,"wires":[["f29aa877.5406c8"]]},{"id":"9b1c0f9f.2c42e","type":"link out","z":"7064f3a.3a30e0c","name":"Refresh Login Page","links":["61173b64.7c5064","c089bdd8.94302"],"x":1455,"y":380,"wires":[]},{"id":"61173b64.7c5064","type":"link in","z":"7064f3a.3a30e0c","name":"","links":["9b1c0f9f.2c42e","afc71388.3583","bae41535.420fb8","d98b5d6c.277f4"],"x":175,"y":180,"wires":[["cb9a046c.16bda8","4ede3cb7.999274"]]},{"id":"6ad22270.23787c","type":"comment","z":"7064f3a.3a30e0c","name":"Login","info":"","x":200,"y":60,"wires":[]},{"id":"504c15cd.52216c","type":"comment","z":"7064f3a.3a30e0c","name":"Logout","info":"","x":200,"y":560,"wires":[]},{"id":"c089bdd8.94302","type":"link in","z":"7064f3a.3a30e0c","name":"","links":["9b1c0f9f.2c42e","afc71388.3583","bae41535.420fb8","d98b5d6c.277f4"],"x":195,"y":680,"wires":[["b0960999.faabd8"]]},{"id":"19567279.56d07e","type":"switch","z":"7064f3a.3a30e0c","name":"Check valid Name","property":"payload","propertyType":"msg","rules":[{"t":"cont","v":"No Users","vt":"str"},{"t":"else"}],"checkall":"true","repair":false,"outputs":2,"x":1790,"y":720,"wires":[["e14e6724.661868"],["85e89e62.ae7f1","840c4a63.0d0858"]]},{"id":"7046cdb1.c054a4","type":"debug","z":"7064f3a.3a30e0c","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","x":2010,"y":100,"wires":[]},{"id":"c3bc599.48e3aa8","type":"debug","z":"7064f3a.3a30e0c","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","x":1990,"y":200,"wires":[]},{"id":"315670d1.fcc24","type":"switch","z":"7064f3a.3a30e0c","name":"Check Valid Data","property":"pager","propertyType":"flow","rules":[{"t":"nnull"},{"t":"null"}],"checkall":"true","repair":false,"outputs":2,"x":430,"y":420,"wires":[["12b181ac.5071fe","afa1cf88.26242","9411cc83.c2601","8cf2d2c1.f26d1"],["e5b1ea98.b15d88"]]},{"id":"e5b1ea98.b15d88","type":"change","z":"7064f3a.3a30e0c","name":"","rules":[{"t":"set","p":"payload","pt":"msg","to":"Please Select Both Fields","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":480,"y":540,"wires":[["e939a1f8.c417c"]]},{"id":"b95d459c.0fb628","type":"ui_toast","z":"7064f3a.3a30e0c","position":"dialog","displayTime":"3","highlight":"","outputs":1,"ok":"OK","cancel":"","topic":"","name":"","x":810,"y":540,"wires":[[]]},{"id":"e939a1f8.c417c","type":"change","z":"7064f3a.3a30e0c","name":"","rules":[{"t":"set","p":"topic","pt":"msg","to":"Error","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":650,"y":540,"wires":[["b95d459c.0fb628"]]},{"id":"c2955c56.a3c2b","type":"switch","z":"7064f3a.3a30e0c","name":"Check Valid Data","property":"payload","propertyType":"msg","rules":[{"t":"nnull"},{"t":"null"}],"checkall":"true","repair":false,"outputs":2,"x":230,"y":420,"wires":[["315670d1.fcc24"],["e5b1ea98.b15d88"]]},{"id":"d98b5d6c.277f4","type":"link out","z":"7064f3a.3a30e0c","name":"Refresh Login Page","links":["61173b64.7c5064","c089bdd8.94302"],"x":1335,"y":920,"wires":[]},{"id":"af088be9.5f65a8","type":"change","z":"7064f3a.3a30e0c","name":"","rules":[{"t":"set","p":"topic","pt":"msg","to":"Logged In","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":1050,"y":960,"wires":[["8b9f4275.c4f8a"]]},{"id":"a7e815aa.ac9c18","type":"template","z":"7064f3a.3a30e0c","name":"Make Message","field":"payload","fieldType":"msg","format":"handlebars","syntax":"mustache","template":"{{flow.removeuser}} has returned Pager {{payload.ID}}","output":"str","x":880,"y":960,"wires":[["af088be9.5f65a8","8ba51f58.d183f"]]},{"id":"8b9f4275.c4f8a","type":"ui_toast","z":"7064f3a.3a30e0c","position":"dialog","displayTime":"3","highlight":"","outputs":1,"ok":"OK","cancel":"","topic":"","name":"","x":1210,"y":960,"wires":[["d98b5d6c.277f4"]]},{"id":"e14e6724.661868","type":"debug","z":"7064f3a.3a30e0c","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"payload","x":1970,"y":660,"wires":[]},{"id":"85e89e62.ae7f1","type":"debug","z":"7064f3a.3a30e0c","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"payload","x":1970,"y":760,"wires":[]},{"id":"b54f2eb4.18cca","type":"switch","z":"7064f3a.3a30e0c","name":"Check Valid Data","property":"removeuser","propertyType":"flow","rules":[{"t":"nnull"},{"t":"null"}],"checkall":"true","repair":false,"outputs":2,"x":290,"y":860,"wires":[["529109c6.407768"],[]]},{"id":"c7636ab0.6e4f68","type":"debug","z":"d38e360e.d0a058","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","x":950,"y":1740,"wires":[]},{"id":"613ef6e6.e02588","type":"template","z":"4e0e89ca.492d38","name":"Default Font Size","field":"topic","fieldType":"msg","format":"handlebars","syntax":"mustache","template":"UPDATE system\nSET version = '{{version}}',versionDate= '{{date}}'\nWHERE id = 1;","output":"str","x":690,"y":980,"wires":[["68cf8dab.36dbf4"]]},{"id":"68cf8dab.36dbf4","type":"mysql","z":"4e0e89ca.492d38","mydb":"48facf19.f3141","name":"","x":860,"y":980,"wires":[["f878bcfd.f6b9b"]]},{"id":"dcdf87b9.39fb58","type":"debug","z":"4e0e89ca.492d38","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","x":790,"y":800,"wires":[]},{"id":"f878bcfd.f6b9b","type":"debug","z":"4e0e89ca.492d38","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","x":1010,"y":980,"wires":[]},{"id":"20e430e8.d3779","type":"inject","z":"4e0e89ca.492d38","name":"Add Table system","topic":"CREATE TABLE system(ID int, version float, versionDate tinytext,systemID int, allpage int, PRIMARY KEY (ID) );","payload":"","payloadType":"str","repeat":"","crontab":"","once":true,"onceDelay":"9","x":150,"y":420,"wires":[["a39ab9b8.b17cc8"]]},{"id":"e3872ca7.8fb04","type":"inject","z":"4e0e89ca.492d38","name":"Add system Settings","topic":"INSERT INTO system (id) VALUES (1);","payload":"","payloadType":"str","repeat":"","crontab":"","once":true,"onceDelay":"10","x":160,"y":500,"wires":[["a39ab9b8.b17cc8"]]},{"id":"d4a81fc5.8535e","type":"template","z":"4e0e89ca.492d38","name":"Get system Settings","field":"topic","fieldType":"msg","format":"handlebars","syntax":"mustache","template":"SELECT * FROM system;","output":"str","x":320,"y":1140,"wires":[["a87edc54.345e5"]]},{"id":"a87edc54.345e5","type":"mysql","z":"4e0e89ca.492d38","mydb":"48facf19.f3141","name":"","x":500,"y":1140,"wires":[["d0fffdb3.48f6b"]]},{"id":"d0fffdb3.48f6b","type":"split","z":"4e0e89ca.492d38","name":"","splt":"\\n","spltType":"str","arraySplt":1,"arraySpltType":"len","stream":false,"addname":"","x":630,"y":1140,"wires":[["f6ed9f56.4852d","2f473aeb.bee2b6","deaaa06f.8781"]]},{"id":"2f473aeb.bee2b6","type":"change","z":"4e0e89ca.492d38","name":"","rules":[{"t":"set","p":"version","pt":"global","to":"payload.version","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":790,"y":1100,"wires":[[]]},{"id":"deaaa06f.8781","type":"debug","z":"4e0e89ca.492d38","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","x":750,"y":1060,"wires":[]},{"id":"a69be9a8.e99a68","type":"inject","z":"4e0e89ca.492d38","name":"Add Dropdown Sample","topic":"INSERT INTO `dropdown` (`message`) VALUES ('Hello World');","payload":"","payloadType":"str","repeat":"","crontab":"","once":true,"onceDelay":"11","x":170,"y":660,"wires":[["a39ab9b8.b17cc8"]]},{"id":"9288a1b5.3e2ce","type":"change","z":"b35cd955.089358","name":"","rules":[{"t":"set","p":"payload","pt":"msg","to":"freemessage","tot":"flow"}],"action":"","property":"","from":"","to":"","reg":false,"x":400,"y":180,"wires":[["eb2ade9e.4735f"]]},{"id":"854a9dda.0f0a","type":"delay","z":"b35cd955.089358","name":"","pauseType":"delay","timeout":"1","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":240,"y":180,"wires":[["9288a1b5.3e2ce"]]},{"id":"7906d59e.a319cc","type":"change","z":"b35cd955.089358","name":"","rules":[{"t":"set","p":"payload","pt":"msg","to":"Select recipient and type your message here...","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":280,"y":140,"wires":[["1e985021.0ba88"]]},{"id":"af0fd4ca.b4c818","type":"change","z":"b35cd955.089358","name":"","rules":[{"t":"set","p":"payload","pt":"msg","to":"","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":420,"y":100,"wires":[["731d7955.154588"]]},{"id":"11427314.3f175d","type":"ui_ui_control","z":"b35cd955.089358","name":"","x":100,"y":140,"wires":[["7906d59e.a319cc"]]},{"id":"1e985021.0ba88","type":"delay","z":"b35cd955.089358","name":"","pauseType":"delay","timeout":"1","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":440,"y":140,"wires":[["731d7955.154588"]]},{"id":"ea5e5db1.28a6a","type":"ui_button","z":"d38e360e.d0a058","name":"Spacer","group":"6b64a97d.831898","order":5,"width":"8","height":"1","passthru":false,"label":"","color":"","bgcolor":"#333333","icon":"","payload":"","payloadType":"str","topic":"","x":260,"y":1500,"wires":[[]]},{"id":"fb0f3e6f.436c5","type":"ui_button","z":"76afc1e7.1d414","name":"","group":"4b494801.afac08","order":3,"width":"0","height":"0","passthru":false,"label":"","color":"","bgcolor":"","icon":"fa-home","payload":"Menu","payloadType":"str","topic":"","x":250,"y":240,"wires":[["16e661d9.89d83e"]]},{"id":"16e661d9.89d83e","type":"ui_ui_control","z":"76afc1e7.1d414","name":"ui control","x":380,"y":240,"wires":[[]]},{"id":"4aaead50.d899d4","type":"ui_numeric","z":"76afc1e7.1d414","name":"","label":"System ID","group":"4b494801.afac08","order":1,"width":"6","height":"1","passthru":true,"topic":"","format":"{{value}}","min":0,"max":"200","step":1,"x":270,"y":280,"wires":[["d9be5b19.95d708"]]},{"id":"b6a83ac.c797ac8","type":"ui_template","z":"76afc1e7.1d414","group":"ae13bd2b.c1248","name":"Remove Menu Bar & Enlarge Popups for PI","order":8,"width":0,"height":0,"format":"<style> \n\n* { cursor:none !important;}\n\n/*Remove Menu Bar */ md-toolbar.md-default-theme:not(.md-menu-toolbar), md-toolbar:not(.md-menu-toolbar) {display: none;}  \n/*Enlarge Popups */ md-dialog.md-transition-in{transform: translate(0,0) scale(1.5);}    \n/*Change Background Color */ body.nr-dashboard-theme {background-color: #333333;}\n/*Change Border Color */ .nr-dashboard-theme ui-card-panel {  background-color: #333333; border: 0px solid #333333;}\n/* Change button color */ .nr-dashboard-theme .md-button.md-primary { color: #ffffff !important; background-color: #696969;}\n/* Change popup border color */.nr-dashboard-theme md-dialog { border: 1px solid #ffffff;}\n</style>\n","storeOutMessages":true,"fwdInMessages":true,"templateScope":"global","x":370,"y":400,"wires":[[]]},{"id":"6aa9f13c.03d4c","type":"inject","z":"6a0a5372.58851c","name":"","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":true,"onceDelay":"1","x":90,"y":260,"wires":[["c7df7ffc.b41ea"]]},{"id":"ff516f5c.ada38","type":"change","z":"6a0a5372.58851c","name":"","rules":[{"t":"set","p":"payload","pt":"msg","to":"payload.message","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":1220,"y":560,"wires":[["55628418.1dea1c","1e6084ae.478f1b"]]},{"id":"a47c6e12.bad53","type":"debug","z":"6a0a5372.58851c","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","x":1190,"y":520,"wires":[]},{"id":"55628418.1dea1c","type":"debug","z":"6a0a5372.58851c","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"payload","x":1590,"y":520,"wires":[]},{"id":"2dee5b78.c6d644","type":"debug","z":"6a0a5372.58851c","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","x":230,"y":100,"wires":[]},{"id":"1e6084ae.478f1b","type":"change","z":"6a0a5372.58851c","name":"","rules":[{"t":"set","p":"topic","pt":"msg","to":"","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":1410,"y":560,"wires":[["74eb34e8.d945bc"]]},{"id":"827f4d5f.fd483","type":"template","z":"6a0a5372.58851c","name":"","field":"topic","fieldType":"msg","format":"handlebars","syntax":"mustache","template":"DELETE FROM pages;\nALTER TABLE pages AUTO_INCREMENT=1;","output":"str","x":1150,"y":1140,"wires":[["7b5f9ba2.322724"]]},{"id":"2964fdde.f5c442","type":"change","z":"6a0a5372.58851c","name":"","rules":[{"t":"set","p":"payload","pt":"msg","to":"Pages Cleared","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":1440,"y":1140,"wires":[["fbcecad4.eed678"]]},{"id":"fbcecad4.eed678","type":"change","z":"6a0a5372.58851c","name":"","rules":[{"t":"delete","p":"topic","pt":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":1620,"y":1140,"wires":[["a2cd0b24.b9a778","6fa8dabf.7adde4"]]},{"id":"6fa8dabf.7adde4","type":"link out","z":"6a0a5372.58851c","name":"","links":["5f485761.88b298"],"x":1715,"y":1100,"wires":[]},{"id":"c2f5bd9d.350b9","type":"switch","z":"6a0a5372.58851c","name":"","property":"payload","propertyType":"msg","rules":[{"t":"eq","v":"OK","vt":"str"},{"t":"else"}],"checkall":"true","repair":false,"outputs":2,"x":1030,"y":1140,"wires":[["827f4d5f.fd483"],[]]},{"id":"fb63dfb6.ea335","type":"comment","z":"6a0a5372.58851c","name":"Clear Pages","info":"","x":270,"y":820,"wires":[]},{"id":"d9b9e65.f9e6d18","type":"ui_button","z":"6a0a5372.58851c","name":"Clear","group":"ae13bd2b.c1248","order":6,"width":"1","height":"1","passthru":false,"label":"","color":"","bgcolor":"","icon":"fa-trash","payload":"ClearPages","payloadType":"str","topic":"","x":270,"y":920,"wires":[["96829da0.46872"]]},{"id":"a2cd0b24.b9a778","type":"ui_toast","z":"6a0a5372.58851c","position":"dialog","displayTime":"3","highlight":"","outputs":1,"ok":"OK","cancel":"","topic":"","name":"","x":1790,"y":1140,"wires":[["c0149510.f40ff8"]]},{"id":"685694e5.ffe84c","type":"ui_toast","z":"6a0a5372.58851c","position":"dialog","displayTime":"3","highlight":"","outputs":1,"ok":"OK","cancel":"Cancel","topic":"Confirmation","name":"","x":890,"y":1140,"wires":[["c2f5bd9d.350b9"]]},{"id":"7b5f9ba2.322724","type":"mysql","z":"6a0a5372.58851c","mydb":"48facf19.f3141","name":"","x":1280,"y":1140,"wires":[["2964fdde.f5c442"]]},{"id":"29ac51d0.d00ece","type":"ui_button","z":"d38e360e.d0a058","name":"Home","group":"d5b281a9.c5e04","order":11,"width":"1","height":"5","passthru":false,"label":"","color":"","bgcolor":"","icon":"fa-home","payload":"Menu","payloadType":"str","topic":"","x":670,"y":1260,"wires":[["1bb5d7b2.0833a8"]]},{"id":"1bb5d7b2.0833a8","type":"ui_ui_control","z":"d38e360e.d0a058","name":"ui control","x":800,"y":1260,"wires":[[]]},{"id":"ec6443f9.90be3","type":"comment","z":"6a0a5372.58851c","name":"Settings Lock Page","info":"","x":510,"y":1000,"wires":[]},{"id":"41a2304.75ae0d","type":"change","z":"6a0a5372.58851c","name":"","rules":[{"t":"set","p":"payload","pt":"msg","to":"Pin Incorrect","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":720,"y":1220,"wires":[["2ac04ba8.a95ec4"]]},{"id":"2ac04ba8.a95ec4","type":"ui_toast","z":"6a0a5372.58851c","position":"dialog","displayTime":"3","highlight":"","outputs":1,"ok":"OK","cancel":"","topic":"","name":"","x":890,"y":1220,"wires":[[]]},{"id":"597153cc.90aeec","type":"ui_button","z":"6a0a5372.58851c","name":"","group":"97a7f741.5cbb08","order":2,"width":"2","height":"2","passthru":false,"label":"1","color":"","bgcolor":"","icon":"","payload":"1","payloadType":"str","topic":"","x":250,"y":1020,"wires":[["ab754cfd.c062a"]]},{"id":"ab754cfd.c062a","type":"join","z":"6a0a5372.58851c","name":"","mode":"custom","build":"string","property":"payload","propertyType":"msg","key":"topic","joiner":"","joinerType":"str","accumulate":false,"timeout":"","count":"","reduceRight":false,"reduceExp":"","reduceInit":"","reduceInitType":"","reduceFixup":"","x":450,"y":1200,"wires":[["beae8bb3.98d3f8"]]},{"id":"b2b4fee8.4bca9","type":"ui_button","z":"6a0a5372.58851c","name":"","group":"97a7f741.5cbb08","order":3,"width":"2","height":"2","passthru":false,"label":"2","color":"","bgcolor":"","icon":"","payload":"2","payloadType":"str","topic":"","x":250,"y":1060,"wires":[["ab754cfd.c062a"]]},{"id":"e6139f40.9794e","type":"ui_button","z":"6a0a5372.58851c","name":"","group":"97a7f741.5cbb08","order":4,"width":"2","height":"2","passthru":false,"label":"3","color":"","bgcolor":"","icon":"","payload":"3","payloadType":"str","topic":"","x":250,"y":1100,"wires":[["ab754cfd.c062a"]]},{"id":"98c1d15a.0b036","type":"ui_button","z":"6a0a5372.58851c","name":"","group":"97a7f741.5cbb08","order":5,"width":"2","height":"2","passthru":false,"label":"4","color":"","bgcolor":"","icon":"","payload":"4","payloadType":"str","topic":"","x":250,"y":1140,"wires":[["ab754cfd.c062a"]]},{"id":"473a9a35.7dc864","type":"ui_button","z":"6a0a5372.58851c","name":"","group":"97a7f741.5cbb08","order":6,"width":"2","height":"2","passthru":false,"label":"5","color":"","bgcolor":"","icon":"","payload":"5","payloadType":"str","topic":"","x":250,"y":1180,"wires":[["ab754cfd.c062a"]]},{"id":"773dc30d.ab750c","type":"ui_button","z":"6a0a5372.58851c","name":"","group":"97a7f741.5cbb08","order":7,"width":"2","height":"2","passthru":false,"label":"6","color":"","bgcolor":"","icon":"","payload":"6","payloadType":"str","topic":"","x":250,"y":1220,"wires":[["ab754cfd.c062a"]]},{"id":"ff03a45d.e5af28","type":"ui_button","z":"6a0a5372.58851c","name":"","group":"97a7f741.5cbb08","order":8,"width":"2","height":"2","passthru":false,"label":"7","color":"","bgcolor":"","icon":"","payload":"7","payloadType":"str","topic":"","x":250,"y":1260,"wires":[["ab754cfd.c062a"]]},{"id":"38f5c89f.91a8f8","type":"ui_button","z":"6a0a5372.58851c","name":"","group":"97a7f741.5cbb08","order":9,"width":"2","height":"2","passthru":false,"label":"8","color":"","bgcolor":"","icon":"","payload":"8","payloadType":"str","topic":"","x":250,"y":1300,"wires":[["ab754cfd.c062a"]]},{"id":"cc874521.b773d8","type":"ui_button","z":"6a0a5372.58851c","name":"","group":"97a7f741.5cbb08","order":10,"width":"2","height":"2","passthru":false,"label":"9","color":"","bgcolor":"","icon":"","payload":"9","payloadType":"str","topic":"","x":250,"y":1340,"wires":[["ab754cfd.c062a"]]},{"id":"6baa4972.e19f78","type":"ui_button","z":"6a0a5372.58851c","name":"","group":"97a7f741.5cbb08","order":12,"width":"2","height":"2","passthru":false,"label":"0","color":"","bgcolor":"","icon":"","payload":"0","payloadType":"str","topic":"","x":250,"y":1380,"wires":[["ab754cfd.c062a"]]},{"id":"9f53d403.c71368","type":"ui_button","z":"6a0a5372.58851c","name":"","group":"97a7f741.5cbb08","order":11,"width":"2","height":"2","passthru":false,"label":"CANCEL","color":"","bgcolor":"red","icon":"","payload":"Receive","payloadType":"str","topic":"","x":260,"y":1460,"wires":[["b82a4e4f.5ea71"]]},{"id":"957711c2.3c844","type":"ui_button","z":"6a0a5372.58851c","name":"","group":"97a7f741.5cbb08","order":13,"width":"2","height":"2","passthru":false,"label":"","color":"","bgcolor":"green","icon":"fa-check","payload":"","payloadType":"str","topic":"","x":250,"y":1420,"wires":[["d98f2f28.b9908"]]},{"id":"38ac3584.e3ce1a","type":"ui_text","z":"6a0a5372.58851c","group":"97a7f741.5cbb08","order":1,"width":"6","height":"1","name":"","label":"","format":"{{msg.payload}}","layout":"col-center","x":710,"y":1080,"wires":[]},{"id":"e724c85c.053768","type":"inject","z":"6a0a5372.58851c","name":"","topic":"Settings Locked","payload":" Enter Settings Pin","payloadType":"str","repeat":"","crontab":"","once":true,"onceDelay":"0","x":550,"y":1080,"wires":[["38ac3584.e3ce1a"]]},{"id":"6c6b6a8c.d67cc4","type":"change","z":"6a0a5372.58851c","name":"","rules":[{"t":"set","p":"complete","pt":"msg","to":"","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":610,"y":1420,"wires":[["ab754cfd.c062a"]]},{"id":"d98f2f28.b9908","type":"change","z":"6a0a5372.58851c","name":"","rules":[{"t":"delete","p":"payload","pt":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":410,"y":1420,"wires":[["6c6b6a8c.d67cc4"]]},{"id":"beae8bb3.98d3f8","type":"switch","z":"6a0a5372.58851c","name":"","property":"payload","propertyType":"msg","rules":[{"t":"eq","v":"password","vt":"global"},{"t":"eq","v":"5853","vt":"str"},{"t":"else"}],"checkall":"true","repair":false,"outputs":3,"x":570,"y":1200,"wires":[["bc164c52.ed00d"],["bc164c52.ed00d"],["41a2304.75ae0d"]]},{"id":"bc164c52.ed00d","type":"change","z":"6a0a5372.58851c","name":"","rules":[{"t":"set","p":"payload","pt":"msg","to":"Are you sure? This cant be undone!","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":720,"y":1140,"wires":[["685694e5.ffe84c"]]},{"id":"b82a4e4f.5ea71","type":"ui_ui_control","z":"6a0a5372.58851c","name":"ui control","x":400,"y":1460,"wires":[[]]},{"id":"96829da0.46872","type":"ui_ui_control","z":"6a0a5372.58851c","name":"ui control","x":400,"y":920,"wires":[[]]},{"id":"c0149510.f40ff8","type":"change","z":"6a0a5372.58851c","name":"","rules":[{"t":"set","p":"payload","pt":"msg","to":"Receive","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":1960,"y":1140,"wires":[["4a48d029.7c05f"]]},{"id":"4a48d029.7c05f","type":"ui_ui_control","z":"6a0a5372.58851c","name":"ui control","x":2120,"y":1140,"wires":[[]]},{"id":"f15fa8a3.2b6fc8","type":"inject","z":"6a0a5372.58851c","name":"","topic":"","payload":"","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":1030,"y":140,"wires":[["ab1d01c9.c9e19"]]},{"id":"da275fd2.eb53b","type":"debug","z":"6a0a5372.58851c","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","x":1380,"y":160,"wires":[]},{"id":"ab1d01c9.c9e19","type":"function","z":"6a0a5372.58851c","name":"","func":"var timestamp = msg.payload.timestamp;\n\nfunction addZero(i) {\n    if (i < 10) {\n        i = \"0\" + i;\n    }\n    return i;\n}\n\n\nfunction resetDay(date) {\n  date.setUTCMilliseconds(0);\n  date.setUTCSeconds(0);\n  date.setUTCMinutes(0);\n  date.setUTCHours(1);\n\n  return date;\n}\n\nfunction lastDay(date, day) {\n  while (date.getUTCDay() !== day) {\n    date.setUTCDate(date.getUTCDate() - 1);\n  }\n\n  return date;\n}\n\nfunction adjustDST(date, begin, end) {\n  if (date >= begin && date < end) {\n    date.setUTCHours(date.getUTCHours() + 1);\n  }\n\n  return date;\n}\n\nfunction updateBST() {\n  var date = new Date(timestamp);\n  var begin = resetDay(new Date(timestamp));\n\n  begin.setUTCMonth(3, -1);\n  begin = lastDay(begin, 0);\n\n  var end = resetDay(new Date());\n\n  end.setUTCMonth(10, -1);\n  end = lastDay(end, 0);\n\n  date = adjustDST(date, begin, end);\n\n  var day = date.getUTCDate(),\n    mon = date.getUTCMonth() + 1,\n    year = date.getUTCFullYear(),\n    hour = date.getUTCHours(),\n    minute = addZero(('0' + date.getUTCMinutes()).slice(-2)),\n    second = ('0' + date.getUTCSeconds()).slice(-2),\n    suffix = hour < 12 ? 'AM' : 'PM';\n\n //hour = (hour - 24) % 12 + 12;\n\n  return hour + ':' + minute + \" \" + suffix;\n}\n\nmsg.time = updateBST();\nmsg.date = date\nreturn msg;","outputs":1,"noerr":0,"x":1230,"y":80,"wires":[["da275fd2.eb53b"]]},{"id":"d9be5b19.95d708","type":"template","z":"76afc1e7.1d414","name":"Set System ID","field":"topic","fieldType":"msg","format":"handlebars","syntax":"mustache","template":"INSERT INTO `system` (`systemID`) VALUES ('{{payload}}');","output":"str","x":440,"y":280,"wires":[["8bf04302.4409f"]]},{"id":"8bf04302.4409f","type":"mysql","z":"76afc1e7.1d414","mydb":"48facf19.f3141","name":"","x":600,"y":280,"wires":[[]]},{"id":"12d09241.20735e","type":"inject","z":"4e0e89ca.492d38","name":"Add system Settings","topic":"INSERT INTO `system` (`systemID`) VALUES ('0');","payload":"","payloadType":"str","repeat":"","crontab":"","once":true,"onceDelay":"10","x":160,"y":460,"wires":[["a39ab9b8.b17cc8"]]},{"id":"ddae28a7.82ce88","type":"ui_text_input","z":"d38e360e.d0a058","name":"","label":"Enter New Message","group":"37c6d8b3.3bbe78","order":1,"width":0,"height":0,"passthru":true,"mode":"text","delay":"10","topic":"","x":460,"y":800,"wires":[["cba0f49f.dae3f8"]]},{"id":"cba0f49f.dae3f8","type":"change","z":"d38e360e.d0a058","name":"","rules":[{"t":"set","p":"dropdown","pt":"flow","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":670,"y":800,"wires":[[]]},{"id":"aacf4e24.9d2da","type":"ui_button","z":"d38e360e.d0a058","name":"","group":"37c6d8b3.3bbe78","order":2,"width":0,"height":0,"passthru":false,"label":"Add","color":"","bgcolor":"","icon":"","payload":"","payloadType":"str","topic":"","x":60,"y":820,"wires":[["e07ea9a.f335458"]]},{"id":"e07ea9a.f335458","type":"delay","z":"d38e360e.d0a058","name":"","pauseType":"delay","timeout":"1","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":80,"y":860,"wires":[["c207605f.48a2","6e94fe3b.e54f7"]]},{"id":"c207605f.48a2","type":"change","z":"d38e360e.d0a058","name":"","rules":[{"t":"set","p":"payload","pt":"msg","to":"dropdown","tot":"flow"}],"action":"","property":"","from":"","to":"","reg":false,"x":200,"y":920,"wires":[["6c73710a.cf97b","b5d3bd21.8b397"]]},{"id":"6e94fe3b.e54f7","type":"change","z":"d38e360e.d0a058","name":"","rules":[{"t":"set","p":"payload","pt":"msg","to":"","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":260,"y":800,"wires":[["ddae28a7.82ce88"]]},{"id":"f87e6f23.08304","type":"ui_text_input","z":"d38e360e.d0a058","name":"","label":"Enter New User","group":"294daf05.76129","order":1,"width":"4","height":"1","passthru":true,"mode":"text","delay":"10","topic":"","x":600,"y":2200,"wires":[["1bd9708a.8e017f"]]},{"id":"1bd9708a.8e017f","type":"change","z":"d38e360e.d0a058","name":"","rules":[{"t":"set","p":"user","pt":"flow","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":770,"y":2200,"wires":[[]]},{"id":"c6ed5a40.1653e8","type":"ui_button","z":"d38e360e.d0a058","name":"","group":"294daf05.76129","order":2,"width":"2","height":"1","passthru":false,"label":"Add","color":"","bgcolor":"","icon":"","payload":"","payloadType":"str","topic":"","x":110,"y":2320,"wires":[["6b1c7e52.a007b"]]},{"id":"ca5f57b9.8ac988","type":"change","z":"d38e360e.d0a058","name":"","rules":[{"t":"set","p":"payload","pt":"msg","to":"","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":420,"y":2200,"wires":[["f87e6f23.08304"]]},{"id":"6b1c7e52.a007b","type":"delay","z":"d38e360e.d0a058","name":"","pauseType":"delay","timeout":"1","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":240,"y":2360,"wires":[["dc05fc6b.c7ec7","ca5f57b9.8ac988"]]},{"id":"dc05fc6b.c7ec7","type":"change","z":"d38e360e.d0a058","name":"","rules":[{"t":"set","p":"payload","pt":"msg","to":"user","tot":"flow"}],"action":"","property":"","from":"","to":"","reg":false,"x":400,"y":2360,"wires":[["5e0df141.f69e","b9042299.810a"]]},{"id":"5e8fd9f0.986a98","type":"ui_text_input","z":"d38e360e.d0a058","name":"","label":"Add New Pager Number","group":"4fb50e08.97897","order":1,"width":"4","height":"1","passthru":true,"mode":"tel","delay":"10","topic":"","x":840,"y":1660,"wires":[["ca35a933.86e198"]]},{"id":"ed7602b2.61db4","type":"delay","z":"d38e360e.d0a058","name":"","pauseType":"delay","timeout":"1","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":490,"y":1820,"wires":[["eb1b9be0.00b198"]]},{"id":"eb1b9be0.00b198","type":"change","z":"d38e360e.d0a058","name":"","rules":[{"t":"set","p":"payload","pt":"msg","to":"pagerNumber","tot":"flow"}],"action":"","property":"","from":"","to":"","reg":false,"x":650,"y":1820,"wires":[["37af6968.9784c6","ce391eda.6fed8"]]},{"id":"ea5dbffa.d621c","type":"change","z":"d38e360e.d0a058","name":"","rules":[{"t":"set","p":"payload","pt":"msg","to":"Only Numbers Allowed","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":1250,"y":1580,"wires":[["2af4fed3.74d442"]]},{"id":"2af4fed3.74d442","type":"change","z":"d38e360e.d0a058","name":"","rules":[{"t":"set","p":"topic","pt":"msg","to":"ERROR!","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":1420,"y":1580,"wires":[["3c5a2bfa.d06ec4"]]},{"id":"3c5a2bfa.d06ec4","type":"ui_toast","z":"d38e360e.d0a058","position":"dialog","displayTime":"3","highlight":"","outputs":1,"ok":"OK","cancel":"","topic":"","name":"","x":1580,"y":1580,"wires":[[]]},{"id":"71eb795.62bf488","type":"template","z":"d38e360e.d0a058","name":"","field":"topic","fieldType":"msg","format":"handlebars","syntax":"mustache","template":"SELECT systemID FROM system;","output":"str","x":500,"y":1860,"wires":[["76d5c44a.6e963c"]]},{"id":"76d5c44a.6e963c","type":"mysql","z":"d38e360e.d0a058","mydb":"48facf19.f3141","name":"","x":630,"y":1860,"wires":[["52f98c37.89d5c4"]]},{"id":"8e8526c4.0f3e48","type":"change","z":"d38e360e.d0a058","name":"","rules":[{"t":"set","p":"systemID","pt":"flow","to":"payload.systemID","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":950,"y":1860,"wires":[[]]},{"id":"9a0a6f19.ace8e","type":"change","z":"d38e360e.d0a058","name":"","rules":[{"t":"delete","p":"systemID","pt":"flow"}],"action":"","property":"","from":"","to":"","reg":false,"x":1270,"y":1860,"wires":[[]]},{"id":"e0c33373.5fa4","type":"ui_button","z":"7064f3a.3a30e0c","name":"Current Deployment","group":"ec180bb9.46ea98","order":1,"width":"13","height":"1","passthru":false,"label":"Pager Log","color":"","bgcolor":"","icon":"","payload":"Users","payloadType":"str","topic":"","x":120,"y":1260,"wires":[["24c6c7f7.299e98","76a185b.cb2987c"]]},{"id":"24c6c7f7.299e98","type":"ui_ui_control","z":"7064f3a.3a30e0c","name":"ui control","x":300,"y":1260,"wires":[[]]},{"id":"5788ba3d.30eb34","type":"ui_button","z":"7064f3a.3a30e0c","name":"Home","group":"78c1c24d.2b9e7c","order":11,"width":"14","height":"1","passthru":false,"label":"Return","color":"","bgcolor":"","icon":"","payload":"UserManagement","payloadType":"str","topic":"","x":210,"y":1860,"wires":[["c5549ebc.832d"]]},{"id":"c5549ebc.832d","type":"ui_ui_control","z":"7064f3a.3a30e0c","name":"ui control","x":340,"y":1860,"wires":[[]]},{"id":"76a185b.cb2987c","type":"template","z":"7064f3a.3a30e0c","name":"","field":"topic","fieldType":"msg","format":"handlebars","syntax":"mustache","template":"SELECT * FROM pager;","output":"str","x":310,"y":1300,"wires":[["f6f0da27.e9e1c8","d89e645e.e1b1d8"]]},{"id":"f6f0da27.e9e1c8","type":"mysql","z":"7064f3a.3a30e0c","mydb":"48facf19.f3141","name":"","x":440,"y":1300,"wires":[["eb010b2e.8ff7d8","f089737d.6ec32"]]},{"id":"ee00122f.60c5d","type":"ui_template","z":"7064f3a.3a30e0c","group":"40e3a022.7bd1c","name":"","order":0,"width":"14","height":"7","format":"<style>\n    {{msg.style}}\n</style>\n\n<table>\n     <tr>\n    <th>User</th>\n    <th>Pager #</th> \n    <th>In/Out</th>\n     <th>Time</th>\n  </tr>\n  <tr ng-repeat=\"obj in msg.payload\">\n    <td>{{ obj.ID }}</td>\n    <td>{{ obj.name }}</td>\n    <td>{{ obj.status }}</td>\n    <td>{{ obj.time }}</td>\n  </tr>\n</table>","storeOutMessages":false,"fwdInMessages":true,"templateScope":"local","x":1360,"y":1300,"wires":[[]]},{"id":"890f7fcf.75eaa","type":"template","z":"7064f3a.3a30e0c","name":"","field":"payload","fieldType":"msg","format":"json","syntax":"mustache","template":"{\"name\": \"{{pager.LastName}}\", \"ID\": \"{{pager.ID}}\", \"status\": \"{{pager.status}}\", \"time\": \"{{pager.time}}\"}","x":870,"y":1300,"wires":[["db2e1c76.15105","fc236d06.b4ab4"]]},{"id":"db2e1c76.15105","type":"json","z":"7064f3a.3a30e0c","name":"","property":"payload","action":"","pretty":false,"x":990,"y":1300,"wires":[["7e60d018.6135a"]]},{"id":"f099ba73.4dcba8","type":"template","z":"7064f3a.3a30e0c","name":"css","field":"style","fieldType":"msg","format":"html","syntax":"mustache","template":"table {\n    color: #333;\n    font-family: Helvetica, Arial, sans-serif;\n    width: 100%;\n    border-collapse: collapse;\n    border-spacing: 0;\n    border-radius: 5px;\n}\ntd, th {\n    border: 1px solid transparent;\n    /* No more visible border */\n    height: 30px;\n  \n}\nth {\n    background: #DFDFDF;\n    /* Darken header a bit */\n    font-weight: bold;\n}\ntd {\n    background: #FAFAFA;\n    text-align: center;\n}\n\n/* Cells in even rows (2,4,6...) are one color */\n\ntr:nth-child(even) td {\n    background: #F1F1F1;\n}\n\n/* Cells in odd rows (1,3,5...) are another (excludes header cells)  */\n\ntr:nth-child(odd) td {\n    background: #FEFEFE;\n}","x":1230,"y":1300,"wires":[["ee00122f.60c5d"]]},{"id":"4f2d9018.d7a2a","type":"change","z":"7064f3a.3a30e0c","name":"","rules":[{"t":"set","p":"pager","pt":"msg","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":720,"y":1300,"wires":[["1c4b20cd.a301cf","890f7fcf.75eaa"]]},{"id":"c5b50c3e.3375e","type":"debug","z":"7064f3a.3a30e0c","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"payload","x":1250,"y":1340,"wires":[]},{"id":"c24b19b8.3e7098","type":"inject","z":"7064f3a.3a30e0c","name":"","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":160,"y":1300,"wires":[["76a185b.cb2987c"]]},{"id":"eb010b2e.8ff7d8","type":"split","z":"7064f3a.3a30e0c","name":"","splt":"\\n","spltType":"str","arraySplt":1,"arraySpltType":"len","stream":false,"addname":"","x":570,"y":1300,"wires":[["4f2d9018.d7a2a","28993034.f4fb3"]]},{"id":"7e60d018.6135a","type":"function","z":"7064f3a.3a30e0c","name":"","func":"var input = msg.payload\nvar array =  context.global.whoson;\nvar add = array.push(input)\nmsg.payload = array;\nreturn msg;","outputs":1,"noerr":0,"x":1110,"y":1300,"wires":[["f099ba73.4dcba8","c5b50c3e.3375e"]]},{"id":"d89e645e.e1b1d8","type":"function","z":"7064f3a.3a30e0c","name":"","func":"context.global.whoson = [];\nreturn msg;","outputs":1,"noerr":0,"x":430,"y":1340,"wires":[[]]},{"id":"f089737d.6ec32","type":"debug","z":"7064f3a.3a30e0c","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"payload","x":590,"y":1340,"wires":[]},{"id":"28993034.f4fb3","type":"debug","z":"7064f3a.3a30e0c","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","x":690,"y":1260,"wires":[]},{"id":"1c4b20cd.a301cf","type":"debug","z":"7064f3a.3a30e0c","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","x":870,"y":1260,"wires":[]},{"id":"fc236d06.b4ab4","type":"debug","z":"7064f3a.3a30e0c","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","x":1110,"y":1260,"wires":[]},{"id":"9411cc83.c2601","type":"template","z":"7064f3a.3a30e0c","name":"Add Name to pager","field":"topic","fieldType":"msg","format":"handlebars","syntax":"mustache","template":"UPDATE pager\nSET LastName = '{{payload}}'\nWHERE ID = '{{flow.pager}}';","output":"str","x":650,"y":460,"wires":[["4ca436e0.b28c88"]]},{"id":"4ca436e0.b28c88","type":"mysql","z":"7064f3a.3a30e0c","mydb":"48facf19.f3141","name":"","x":820,"y":460,"wires":[[]]},{"id":"8cf2d2c1.f26d1","type":"template","z":"7064f3a.3a30e0c","name":"Add status to pager","field":"topic","fieldType":"msg","format":"handlebars","syntax":"mustache","template":"UPDATE pager\nSET status = 'Logged In'\nWHERE ID = '{{flow.pager}}';","output":"str","x":650,"y":500,"wires":[["265e9cd6.1d3dd4"]]},{"id":"265e9cd6.1d3dd4","type":"mysql","z":"7064f3a.3a30e0c","mydb":"48facf19.f3141","name":"","x":820,"y":500,"wires":[[]]},{"id":"38504a91.aaf636","type":"template","z":"7064f3a.3a30e0c","name":"Add status to pager","field":"topic","fieldType":"msg","format":"handlebars","syntax":"mustache","template":"UPDATE pager\nSET status = 'Logged Out'\nWHERE capcode = '{{payload.capcode}}';","output":"str","x":870,"y":900,"wires":[["d5b35695.413158"]]},{"id":"d5b35695.413158","type":"mysql","z":"7064f3a.3a30e0c","mydb":"48facf19.f3141","name":"","x":1040,"y":900,"wires":[[]]},{"id":"52f98c37.89d5c4","type":"split","z":"d38e360e.d0a058","name":"","splt":"\\n","spltType":"str","arraySplt":1,"arraySpltType":"len","stream":false,"addname":"","x":780,"y":1860,"wires":[["8e8526c4.0f3e48"]]},{"id":"ccf5bf33.def46","type":"ui_ui_control","z":"d38e360e.d0a058","name":"","x":420,"y":1660,"wires":[["7a47c2f3.1dae3c"]]},{"id":"734ca0ff.0eb2e","type":"template","z":"7064f3a.3a30e0c","name":"","field":"topic","fieldType":"msg","format":"handlebars","syntax":"mustache","template":"SELECT ID FROM pager\nWHERE capcode = '{{payload.capcode}}';","output":"str","x":450,"y":960,"wires":[["21785669.5d2a0a"]]},{"id":"21785669.5d2a0a","type":"mysql","z":"7064f3a.3a30e0c","mydb":"48facf19.f3141","name":"","x":580,"y":960,"wires":[["effd939.1a0627"]]},{"id":"effd939.1a0627","type":"split","z":"7064f3a.3a30e0c","name":"","splt":",","spltType":"str","arraySplt":1,"arraySpltType":"len","stream":true,"addname":"","x":710,"y":960,"wires":[["a7e815aa.ac9c18"]]},{"id":"f5cd00e0.eb296","type":"ui_button","z":"d38e360e.d0a058","name":"Home","group":"d5b281a9.c5e04","order":11,"width":"1","height":"5","passthru":false,"label":"","color":"","bgcolor":"","icon":"fa-home","payload":"Menu","payloadType":"str","topic":"","x":670,"y":1220,"wires":[["9995cf08.417a2"]]},{"id":"9995cf08.417a2","type":"ui_ui_control","z":"d38e360e.d0a058","name":"ui control","x":800,"y":1220,"wires":[[]]},{"id":"1733999a.a50d16","type":"ui_button","z":"d38e360e.d0a058","name":"Home","group":"d5b281a9.c5e04","order":11,"width":"1","height":"5","passthru":false,"label":"","color":"","bgcolor":"","icon":"fa-home","payload":"Menu","payloadType":"str","topic":"","x":670,"y":1300,"wires":[["758682f0.118dac"]]},{"id":"758682f0.118dac","type":"ui_ui_control","z":"d38e360e.d0a058","name":"ui control","x":800,"y":1300,"wires":[[]]},{"id":"bfa9af5b.9cb23","type":"ui_ui_control","z":"d38e360e.d0a058","name":"","x":80,"y":780,"wires":[["6e94fe3b.e54f7"]]},{"id":"bc18f16c.6d6a1","type":"ui_text_input","z":"76afc1e7.1d414","name":"","label":"ALL Page ID (Numbers only!)","group":"4b494801.afac08","order":2,"width":0,"height":0,"passthru":true,"mode":"text","delay":"0","topic":"","x":320,"y":340,"wires":[["28048afc.7a58b6"]]},{"id":"28048afc.7a58b6","type":"template","z":"76afc1e7.1d414","name":"Set System ID","field":"topic","fieldType":"msg","format":"handlebars","syntax":"mustache","template":"UPDATE system\nSET allpage = '{{payload}}'\nWHERE ID = '0';","output":"str","x":540,"y":340,"wires":[["5e0b09a5.a9f8a8","8f8c25bf.162a08"]]},{"id":"5e0b09a5.a9f8a8","type":"mysql","z":"76afc1e7.1d414","mydb":"48facf19.f3141","name":"","x":700,"y":340,"wires":[[]]},{"id":"31cfba0.3acd446","type":"inject","z":"4e0e89ca.492d38","name":"Add system Settings","topic":"INSERT INTO `system` (`allpage`) VALUES ('911');","payload":"","payloadType":"str","repeat":"","crontab":"","once":true,"onceDelay":"10","x":160,"y":540,"wires":[["a39ab9b8.b17cc8"]]},{"id":"8f8c25bf.162a08","type":"debug","z":"76afc1e7.1d414","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"topic","x":700,"y":380,"wires":[]},{"id":"ba09ce9d.81b74","type":"ui_toast","z":"d38e360e.d0a058","position":"dialog","displayTime":"3","highlight":"","outputs":1,"ok":"OK","cancel":"","topic":"","name":"","x":430,"y":160,"wires":[[]]},{"id":"ac9a9b59.253488","type":"change","z":"d38e360e.d0a058","name":"","rules":[{"t":"set","p":"payload","pt":"msg","to":"Text Sizes Updated","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":260,"y":160,"wires":[["ba09ce9d.81b74"]]},{"id":"449eaad6.e356c4","type":"ui_toast","z":"d38e360e.d0a058","position":"dialog","displayTime":"3","highlight":"","outputs":1,"ok":"OK","cancel":"","topic":"","name":"","x":1110,"y":1080,"wires":[[]]},{"id":"c27dd5e6.8e8988","type":"change","z":"d38e360e.d0a058","name":"","rules":[{"t":"set","p":"payload","pt":"msg","to":"Message Removed","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":940,"y":1080,"wires":[["449eaad6.e356c4"]]},{"id":"cbc49c14.2b88","type":"change","z":"d38e360e.d0a058","name":"","rules":[{"t":"set","p":"topic","pt":"msg","to":"Success","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":770,"y":1080,"wires":[["c27dd5e6.8e8988"]]},{"id":"839c493.d38ccb8","type":"switch","z":"d38e360e.d0a058","name":"","property":"remove","propertyType":"global","rules":[{"t":"cont","v":"No Messsages","vt":"str"},{"t":"else"}],"checkall":"true","repair":false,"outputs":2,"x":630,"y":1080,"wires":[[],["cbc49c14.2b88"]]},{"id":"988565aa.a3d018","type":"comment","z":"d38e360e.d0a058","name":"User Select","info":"","x":360,"y":2860,"wires":[]},{"id":"b27d6a40.f02cb8","type":"link out","z":"d38e360e.d0a058","name":"Pager ID","links":["4086171d.7dd528"],"x":1435,"y":2700,"wires":[]},{"id":"26952d03.0be382","type":"debug","z":"d38e360e.d0a058","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"options","x":1290,"y":2660,"wires":[]},{"id":"9acd028.81984","type":"json","z":"d38e360e.d0a058","name":"","property":"payload","action":"","pretty":false,"x":1030,"y":2700,"wires":[["f914a7a2.544048"]]},{"id":"f914a7a2.544048","type":"function","z":"d38e360e.d0a058","name":"","func":"var input = msg.payload\nvar array =  context.global.pagerarrayava;\nvar add = array.push(input)\nmsg.options = array;\nreturn msg;","outputs":1,"noerr":0,"x":1150,"y":2700,"wires":[["26952d03.0be382","780e59a9.fccd58"]]},{"id":"6abfb4e8.ef199c","type":"template","z":"d38e360e.d0a058","name":"","field":"topic","fieldType":"msg","format":"handlebars","syntax":"mustache","template":"SELECT * FROM pager;","output":"str","x":410,"y":2700,"wires":[["237f8486.ffe37c","86325b72.d8e678"]]},{"id":"dae82af.61000d8","type":"split","z":"d38e360e.d0a058","name":"","splt":",","spltType":"str","arraySplt":1,"arraySpltType":"len","stream":true,"addname":"","x":670,"y":2700,"wires":[["90617273.3a119"]]},{"id":"780e59a9.fccd58","type":"change","z":"d38e360e.d0a058","name":"","rules":[{"t":"delete","p":"payload","pt":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":1310,"y":2700,"wires":[["b27d6a40.f02cb8"]]},{"id":"578e980d.021da8","type":"ui_ui_control","z":"d38e360e.d0a058","name":"","x":140,"y":2700,"wires":[["1c1f0960.ec5727"]]},{"id":"237f8486.ffe37c","type":"mysql","z":"d38e360e.d0a058","mydb":"48facf19.f3141","name":"","x":540,"y":2700,"wires":[["dae82af.61000d8"]]},{"id":"90617273.3a119","type":"json","z":"d38e360e.d0a058","name":"","property":"payload","action":"obj","pretty":false,"x":790,"y":2700,"wires":[["4d2d5c42.9c87f4","2a799112.a7931e"]]},{"id":"4d2d5c42.9c87f4","type":"function","z":"d38e360e.d0a058","name":"","func":"var ID = msg.payload.ID;\nvar capcode = msg.payload.capcode;\nvar user = \"{\\\"\" + ID + \"\\\":\\\"\" + capcode + \"\\\"}\";\nmsg.payload= user\nreturn msg;","outputs":1,"noerr":0,"x":910,"y":2700,"wires":[["9acd028.81984","2fe244f0.f4d38c"]]},{"id":"86325b72.d8e678","type":"function","z":"d38e360e.d0a058","name":"","func":"context.global.pagerarrayava = [];\ncontext.global.pagerarrayIDava = [];\nreturn msg;","outputs":1,"noerr":0,"x":550,"y":2760,"wires":[[]]},{"id":"487b71e2.57ce","type":"comment","z":"d38e360e.d0a058","name":"Pager Select","info":"","x":340,"y":2640,"wires":[]},{"id":"d3df6f5.a3ada9","type":"change","z":"ce748393.37497","name":"","rules":[{"t":"set","p":"password","pt":"global","to":"password","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":1040,"y":300,"wires":[[]]},{"id":"274c4829.c0e8c8","type":"change","z":"ce748393.37497","name":"","rules":[{"t":"set","p":"payload","pt":"msg","to":"Pin Saved","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":1020,"y":260,"wires":[["ff3368f8.035088"]]},{"id":"e5760ca1.b8c45","type":"change","z":"ce748393.37497","name":"","rules":[{"t":"set","p":"password","pt":"msg","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":410,"y":280,"wires":[["a3fe5bda.a35f78"]]},{"id":"a3fe5bda.a35f78","type":"template","z":"ce748393.37497","name":"","field":"payload","fieldType":"msg","format":"handlebars","syntax":"mustache","template":"Are you sure you want to change the pin to {{password}}?","output":"str","x":570,"y":280,"wires":[["3cc7710f.5b439e"]]},{"id":"290a73d8.48b4dc","type":"switch","z":"ce748393.37497","name":"","property":"payload","propertyType":"msg","rules":[{"t":"eq","v":"OK","vt":"str"},{"t":"else"}],"checkall":"true","repair":false,"outputs":2,"x":850,"y":280,"wires":[["274c4829.c0e8c8","d3df6f5.a3ada9","4cfee538.1cc1ac"],[]]},{"id":"ff3368f8.035088","type":"ui_toast","z":"ce748393.37497","position":"top right","displayTime":"3","highlight":"","outputs":0,"ok":"OK","cancel":"","topic":"","name":"","x":1210,"y":260,"wires":[]},{"id":"3cc7710f.5b439e","type":"ui_toast","z":"ce748393.37497","position":"dialog","displayTime":"3","highlight":"","outputs":1,"ok":"OK","cancel":"Cancel","topic":"","name":"","x":710,"y":280,"wires":[["290a73d8.48b4dc"]]},{"id":"4d66b5df.2cbb5c","type":"change","z":"ce748393.37497","name":"","rules":[{"t":"set","p":"payload","pt":"msg","to":"Menu","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":1380,"y":1520,"wires":[["a79c3e8.eabdfc"]]},{"id":"f30e8c3e.2c40c","type":"switch","z":"ce748393.37497","name":"","property":"payload","propertyType":"msg","rules":[{"t":"eq","v":"pin","vt":"global"},{"t":"eq","v":"5853","vt":"num"},{"t":"cont","v":"ABCD","vt":"str"},{"t":"else"}],"checkall":"false","repair":false,"outputs":4,"x":1230,"y":1540,"wires":[["4d66b5df.2cbb5c","50148c10.d3f844"],["4d66b5df.2cbb5c","50148c10.d3f844"],[],["f6f29873.6b84e8"]]},{"id":"e89faf71.ddcbc","type":"comment","z":"ce748393.37497","name":"Lock Page","info":"","x":1140,"y":1300,"wires":[]},{"id":"a79c3e8.eabdfc","type":"ui_ui_control","z":"ce748393.37497","name":"","x":1540,"y":1520,"wires":[[]]},{"id":"f6f29873.6b84e8","type":"change","z":"ce748393.37497","name":"","rules":[{"t":"set","p":"payload","pt":"msg","to":"Pin Incorrect","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":1380,"y":1560,"wires":[["f51d2212.61f9a"]]},{"id":"f51d2212.61f9a","type":"ui_toast","z":"ce748393.37497","position":"dialog","displayTime":"3","highlight":"","outputs":1,"ok":"OK","cancel":"","topic":"","name":"","x":1550,"y":1560,"wires":[[]]},{"id":"16ac5c32.f65fe4","type":"ui_button","z":"ce748393.37497","name":"","group":"2f444df3.abb892","order":2,"width":"2","height":"2","passthru":false,"label":"1","color":"","bgcolor":"","icon":"","payload":"1","payloadType":"str","topic":"","x":910,"y":1360,"wires":[["14202071.2d3fc"]]},{"id":"14202071.2d3fc","type":"join","z":"ce748393.37497","name":"","mode":"custom","build":"string","property":"payload","propertyType":"msg","key":"topic","joiner":"","joinerType":"str","accumulate":false,"timeout":"","count":"","reduceRight":false,"reduceExp":"","reduceInit":"","reduceInitType":"","reduceFixup":"","x":1110,"y":1540,"wires":[["f30e8c3e.2c40c"]]},{"id":"1c8a79c1.e368d6","type":"ui_button","z":"ce748393.37497","name":"","group":"2f444df3.abb892","order":3,"width":"2","height":"2","passthru":false,"label":"2","color":"","bgcolor":"","icon":"","payload":"2","payloadType":"str","topic":"","x":910,"y":1400,"wires":[["14202071.2d3fc"]]},{"id":"dd1c6455.cbf7c8","type":"ui_button","z":"ce748393.37497","name":"","group":"2f444df3.abb892","order":4,"width":"2","height":"2","passthru":false,"label":"3","color":"","bgcolor":"","icon":"","payload":"3","payloadType":"str","topic":"","x":910,"y":1440,"wires":[["14202071.2d3fc"]]},{"id":"d2e05bcf.1ab118","type":"ui_button","z":"ce748393.37497","name":"","group":"2f444df3.abb892","order":5,"width":"2","height":"2","passthru":false,"label":"4","color":"","bgcolor":"","icon":"","payload":"4","payloadType":"str","topic":"","x":910,"y":1480,"wires":[["14202071.2d3fc"]]},{"id":"1ed47050.48c9c","type":"ui_button","z":"ce748393.37497","name":"","group":"2f444df3.abb892","order":6,"width":"2","height":"2","passthru":false,"label":"5","color":"","bgcolor":"","icon":"","payload":"5","payloadType":"str","topic":"","x":910,"y":1520,"wires":[["14202071.2d3fc"]]},{"id":"83a2d019.13a96","type":"ui_button","z":"ce748393.37497","name":"","group":"2f444df3.abb892","order":7,"width":"2","height":"2","passthru":false,"label":"6","color":"","bgcolor":"","icon":"","payload":"6","payloadType":"str","topic":"","x":910,"y":1560,"wires":[["14202071.2d3fc"]]},{"id":"6859cbf2.018a44","type":"ui_button","z":"ce748393.37497","name":"","group":"2f444df3.abb892","order":8,"width":"2","height":"2","passthru":false,"label":"7","color":"","bgcolor":"","icon":"","payload":"7","payloadType":"str","topic":"","x":910,"y":1600,"wires":[["14202071.2d3fc"]]},{"id":"5dee2ee5.485cd","type":"ui_button","z":"ce748393.37497","name":"","group":"2f444df3.abb892","order":9,"width":"2","height":"2","passthru":false,"label":"8","color":"","bgcolor":"","icon":"","payload":"8","payloadType":"str","topic":"","x":910,"y":1640,"wires":[["14202071.2d3fc"]]},{"id":"123c4bc3.405fd4","type":"ui_button","z":"ce748393.37497","name":"","group":"2f444df3.abb892","order":10,"width":"2","height":"2","passthru":false,"label":"9","color":"","bgcolor":"","icon":"","payload":"9","payloadType":"str","topic":"","x":910,"y":1680,"wires":[["14202071.2d3fc"]]},{"id":"72ce3e74.6c2c1","type":"ui_button","z":"ce748393.37497","name":"","group":"2f444df3.abb892","order":12,"width":"2","height":"2","passthru":false,"label":"0","color":"","bgcolor":"","icon":"","payload":"0","payloadType":"str","topic":"","x":910,"y":1720,"wires":[["14202071.2d3fc"]]},{"id":"37c622d1.8ffdce","type":"ui_button","z":"ce748393.37497","name":"","group":"2f444df3.abb892","order":11,"width":"2","height":"2","passthru":false,"label":"CANCEL","color":"white","bgcolor":"red","icon":"","payload":"ABCD","payloadType":"str","topic":"","x":920,"y":1800,"wires":[["c9f4d2f0.1f4b1"]]},{"id":"9e222d6e.8d0bb","type":"ui_button","z":"ce748393.37497","name":"","group":"2f444df3.abb892","order":13,"width":"2","height":"2","passthru":false,"label":"","color":"","bgcolor":"green","icon":"fa-check","payload":"","payloadType":"str","topic":"","x":910,"y":1760,"wires":[["ab12857c.992558"]]},{"id":"4e83e1af.0b58c","type":"ui_text","z":"ce748393.37497","group":"2f444df3.abb892","order":1,"width":"6","height":"1","name":"","label":"","format":"{{msg.payload}}","layout":"col-center","x":1350,"y":1400,"wires":[]},{"id":"cb5079ce.ff9108","type":"inject","z":"ce748393.37497","name":"","topic":"Locked","payload":"Enter Unlock Pin","payloadType":"str","repeat":"","crontab":"","once":true,"onceDelay":"0","x":1170,"y":1400,"wires":[["4e83e1af.0b58c"]]},{"id":"371eaee8.b77ec2","type":"change","z":"ce748393.37497","name":"","rules":[{"t":"set","p":"complete","pt":"msg","to":"","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":1270,"y":1760,"wires":[["14202071.2d3fc"]]},{"id":"ab12857c.992558","type":"change","z":"ce748393.37497","name":"","rules":[{"t":"delete","p":"payload","pt":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":1070,"y":1760,"wires":[["371eaee8.b77ec2"]]},{"id":"d16ec5ac.1b5dd8","type":"comment","z":"ce748393.37497","name":"Settings Lock Page","info":"","x":330,"y":1320,"wires":[]},{"id":"65f11c1.3b02fe4","type":"change","z":"ce748393.37497","name":"","rules":[{"t":"set","p":"payload","pt":"msg","to":"Pin Incorrect","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":540,"y":1540,"wires":[["d2fdf13f.c4508"]]},{"id":"d2fdf13f.c4508","type":"ui_toast","z":"ce748393.37497","position":"dialog","displayTime":"3","highlight":"","outputs":1,"ok":"OK","cancel":"","topic":"","name":"","x":710,"y":1540,"wires":[[]]},{"id":"c5958dec.b20d6","type":"ui_button","z":"ce748393.37497","name":"","group":"1c5684d5.0e8f2b","order":2,"width":"2","height":"2","passthru":false,"label":"1","color":"","bgcolor":"","icon":"","payload":"1","payloadType":"str","topic":"","x":70,"y":1340,"wires":[["a7115576.28e838"]]},{"id":"a7115576.28e838","type":"join","z":"ce748393.37497","name":"","mode":"custom","build":"string","property":"payload","propertyType":"msg","key":"topic","joiner":"","joinerType":"str","accumulate":false,"timeout":"","count":"","reduceRight":false,"reduceExp":"","reduceInit":"","reduceInitType":"","reduceFixup":"","x":270,"y":1520,"wires":[["6cf17982.e342e8"]]},{"id":"dd442c09.9fd5f","type":"ui_button","z":"ce748393.37497","name":"","group":"1c5684d5.0e8f2b","order":3,"width":"2","height":"2","passthru":false,"label":"2","color":"","bgcolor":"","icon":"","payload":"2","payloadType":"str","topic":"","x":70,"y":1380,"wires":[["a7115576.28e838"]]},{"id":"ddbf0839.78da68","type":"ui_button","z":"ce748393.37497","name":"","group":"1c5684d5.0e8f2b","order":4,"width":"2","height":"2","passthru":false,"label":"3","color":"","bgcolor":"","icon":"","payload":"3","payloadType":"str","topic":"","x":70,"y":1420,"wires":[["a7115576.28e838"]]},{"id":"1037b3e6.55d59c","type":"ui_button","z":"ce748393.37497","name":"","group":"1c5684d5.0e8f2b","order":5,"width":"2","height":"2","passthru":false,"label":"4","color":"","bgcolor":"","icon":"","payload":"4","payloadType":"str","topic":"","x":70,"y":1460,"wires":[["a7115576.28e838"]]},{"id":"aeca36f8.81f868","type":"ui_button","z":"ce748393.37497","name":"","group":"1c5684d5.0e8f2b","order":6,"width":"2","height":"2","passthru":false,"label":"5","color":"","bgcolor":"","icon":"","payload":"5","payloadType":"str","topic":"","x":70,"y":1500,"wires":[["a7115576.28e838"]]},{"id":"edcbd791.ae5f48","type":"ui_button","z":"ce748393.37497","name":"","group":"1c5684d5.0e8f2b","order":7,"width":"2","height":"2","passthru":false,"label":"6","color":"","bgcolor":"","icon":"","payload":"6","payloadType":"str","topic":"","x":70,"y":1540,"wires":[["a7115576.28e838"]]},{"id":"5a2d660c.cbc808","type":"ui_button","z":"ce748393.37497","name":"","group":"1c5684d5.0e8f2b","order":8,"width":"2","height":"2","passthru":false,"label":"7","color":"","bgcolor":"","icon":"","payload":"7","payloadType":"str","topic":"","x":70,"y":1580,"wires":[["a7115576.28e838"]]},{"id":"6a20ae02.7e4f1","type":"ui_button","z":"ce748393.37497","name":"","group":"1c5684d5.0e8f2b","order":9,"width":"2","height":"2","passthru":false,"label":"8","color":"","bgcolor":"","icon":"","payload":"8","payloadType":"str","topic":"","x":70,"y":1620,"wires":[["a7115576.28e838"]]},{"id":"d463e88e.7e4c28","type":"ui_button","z":"ce748393.37497","name":"","group":"1c5684d5.0e8f2b","order":10,"width":"2","height":"2","passthru":false,"label":"9","color":"","bgcolor":"","icon":"","payload":"9","payloadType":"str","topic":"","x":70,"y":1660,"wires":[["a7115576.28e838"]]},{"id":"24e38270.b26f0e","type":"ui_button","z":"ce748393.37497","name":"","group":"1c5684d5.0e8f2b","order":12,"width":"2","height":"2","passthru":false,"label":"0","color":"","bgcolor":"","icon":"","payload":"0","payloadType":"str","topic":"","x":70,"y":1700,"wires":[["a7115576.28e838"]]},{"id":"812fb89d.4e9018","type":"ui_button","z":"ce748393.37497","name":"","group":"1c5684d5.0e8f2b","order":11,"width":"2","height":"2","passthru":false,"label":"CANCEL","color":"","bgcolor":"red","icon":"","payload":"Menu","payloadType":"str","topic":"","x":80,"y":1780,"wires":[["a093adc1.1f44f"]]},{"id":"2042eb2.cc0b714","type":"ui_button","z":"ce748393.37497","name":"","group":"1c5684d5.0e8f2b","order":13,"width":"2","height":"2","passthru":false,"label":"","color":"","bgcolor":"green","icon":"fa-check","payload":"","payloadType":"str","topic":"","x":70,"y":1740,"wires":[["483bed83.72b6f4"]]},{"id":"79d9f818.fc7258","type":"ui_text","z":"ce748393.37497","group":"1c5684d5.0e8f2b","order":1,"width":"6","height":"1","name":"","label":"","format":"{{msg.payload}}","layout":"col-center","x":530,"y":1400,"wires":[]},{"id":"9b479045.65603","type":"inject","z":"ce748393.37497","name":"","topic":"Settings Locked","payload":" Enter Settings Pin","payloadType":"str","repeat":"","crontab":"","once":true,"onceDelay":"0","x":370,"y":1400,"wires":[["79d9f818.fc7258"]]},{"id":"a052bcff.4922c","type":"change","z":"ce748393.37497","name":"","rules":[{"t":"set","p":"complete","pt":"msg","to":"","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":430,"y":1740,"wires":[["a7115576.28e838"]]},{"id":"483bed83.72b6f4","type":"change","z":"ce748393.37497","name":"","rules":[{"t":"delete","p":"payload","pt":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":230,"y":1740,"wires":[["a052bcff.4922c"]]},{"id":"6cf17982.e342e8","type":"switch","z":"ce748393.37497","name":"","property":"payload","propertyType":"msg","rules":[{"t":"eq","v":"password","vt":"global"},{"t":"eq","v":"5853","vt":"str"},{"t":"eq","v":"741741","vt":"str"},{"t":"else"}],"checkall":"true","repair":false,"outputs":4,"x":390,"y":1520,"wires":[["a97a3091.9805d"],["a97a3091.9805d"],["769d69de.b7d708"],["65f11c1.3b02fe4"]]},{"id":"a97a3091.9805d","type":"change","z":"ce748393.37497","name":"","rules":[{"t":"set","p":"payload","pt":"msg","to":"Settings","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":540,"y":1460,"wires":[["e3f8a558.47e068"]]},{"id":"e3f8a558.47e068","type":"ui_ui_control","z":"ce748393.37497","name":"ui control","x":700,"y":1460,"wires":[[]]},{"id":"a093adc1.1f44f","type":"ui_ui_control","z":"ce748393.37497","name":"ui control","x":220,"y":1780,"wires":[[]]},{"id":"293a0bc.f26e9f4","type":"comment","z":"ce748393.37497","name":"Settings change","info":"","x":520,"y":40,"wires":[]},{"id":"4fc36c29.4c3424","type":"ui_button","z":"ce748393.37497","name":"","group":"4397ce70.bb04e","order":2,"width":"2","height":"2","passthru":false,"label":"1","color":"","bgcolor":"","icon":"","payload":"1","payloadType":"str","topic":"","x":50,"y":100,"wires":[["6b6ddec3.e531a"]]},{"id":"6b6ddec3.e531a","type":"join","z":"ce748393.37497","name":"","mode":"custom","build":"string","property":"payload","propertyType":"msg","key":"topic","joiner":"","joinerType":"str","accumulate":false,"timeout":"","count":"","reduceRight":false,"reduceExp":"","reduceInit":"","reduceInitType":"","reduceFixup":"","x":250,"y":280,"wires":[["e5760ca1.b8c45"]]},{"id":"90d3a9e2.05d828","type":"ui_button","z":"ce748393.37497","name":"","group":"4397ce70.bb04e","order":3,"width":"2","height":"2","passthru":false,"label":"2","color":"","bgcolor":"","icon":"","payload":"2","payloadType":"str","topic":"","x":50,"y":140,"wires":[["6b6ddec3.e531a"]]},{"id":"e1232887.f931c8","type":"ui_button","z":"ce748393.37497","name":"","group":"4397ce70.bb04e","order":4,"width":"2","height":"2","passthru":false,"label":"3","color":"","bgcolor":"","icon":"","payload":"3","payloadType":"str","topic":"","x":50,"y":180,"wires":[["6b6ddec3.e531a"]]},{"id":"fb2ff32a.f269a","type":"ui_button","z":"ce748393.37497","name":"","group":"4397ce70.bb04e","order":5,"width":"2","height":"2","passthru":false,"label":"4","color":"","bgcolor":"","icon":"","payload":"4","payloadType":"str","topic":"","x":50,"y":220,"wires":[["6b6ddec3.e531a"]]},{"id":"65a0bd7a.fdd364","type":"ui_button","z":"ce748393.37497","name":"","group":"4397ce70.bb04e","order":6,"width":"2","height":"2","passthru":false,"label":"5","color":"","bgcolor":"","icon":"","payload":"5","payloadType":"str","topic":"","x":50,"y":260,"wires":[["6b6ddec3.e531a"]]},{"id":"e4bdd101.17d9e","type":"ui_button","z":"ce748393.37497","name":"","group":"4397ce70.bb04e","order":7,"width":"2","height":"2","passthru":false,"label":"6","color":"","bgcolor":"","icon":"","payload":"6","payloadType":"str","topic":"","x":50,"y":300,"wires":[["6b6ddec3.e531a"]]},{"id":"8d3f7818.e52f38","type":"ui_button","z":"ce748393.37497","name":"","group":"4397ce70.bb04e","order":8,"width":"2","height":"2","passthru":false,"label":"7","color":"","bgcolor":"","icon":"","payload":"7","payloadType":"str","topic":"","x":50,"y":340,"wires":[["6b6ddec3.e531a"]]},{"id":"3614b47.27feb4c","type":"ui_button","z":"ce748393.37497","name":"","group":"4397ce70.bb04e","order":9,"width":"2","height":"2","passthru":false,"label":"8","color":"","bgcolor":"","icon":"","payload":"8","payloadType":"str","topic":"","x":50,"y":380,"wires":[["6b6ddec3.e531a"]]},{"id":"66747819.636238","type":"ui_button","z":"ce748393.37497","name":"","group":"4397ce70.bb04e","order":10,"width":"2","height":"2","passthru":false,"label":"9","color":"","bgcolor":"","icon":"","payload":"9","payloadType":"str","topic":"","x":50,"y":420,"wires":[["6b6ddec3.e531a"]]},{"id":"b98d0f4f.85649","type":"ui_button","z":"ce748393.37497","name":"","group":"4397ce70.bb04e","order":12,"width":"2","height":"2","passthru":false,"label":"0","color":"","bgcolor":"","icon":"","payload":"0","payloadType":"str","topic":"","x":50,"y":460,"wires":[["6b6ddec3.e531a"]]},{"id":"8fd3046d.dd8fd8","type":"ui_button","z":"ce748393.37497","name":"","group":"4397ce70.bb04e","order":11,"width":"2","height":"2","passthru":false,"label":"CANCEL","color":"","bgcolor":"red","icon":"","payload":"Settings","payloadType":"str","topic":"","x":60,"y":540,"wires":[["8ee4e4f0.c77e98"]]},{"id":"ada970a1.1e035","type":"ui_button","z":"ce748393.37497","name":"","group":"4397ce70.bb04e","order":13,"width":"2","height":"2","passthru":false,"label":"","color":"","bgcolor":"green","icon":"fa-check","payload":"","payloadType":"str","topic":"","x":50,"y":500,"wires":[["3563cfd4.7386c"]]},{"id":"cd656a66.66e9e8","type":"ui_text","z":"ce748393.37497","group":"4397ce70.bb04e","order":1,"width":"6","height":"1","name":"","label":"","format":"{{msg.payload}}","layout":"col-center","x":650,"y":200,"wires":[]},{"id":"1f0da3fb.07dacc","type":"inject","z":"ce748393.37497","name":"","topic":"","payload":" Enter New Settings Pin","payloadType":"str","repeat":"","crontab":"","once":true,"onceDelay":"0","x":470,"y":200,"wires":[["cd656a66.66e9e8"]]},{"id":"bc9794ab.bfca48","type":"change","z":"ce748393.37497","name":"","rules":[{"t":"set","p":"complete","pt":"msg","to":"","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":410,"y":500,"wires":[["6b6ddec3.e531a"]]},{"id":"3563cfd4.7386c","type":"change","z":"ce748393.37497","name":"","rules":[{"t":"delete","p":"payload","pt":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":210,"y":500,"wires":[["bc9794ab.bfca48"]]},{"id":"8ee4e4f0.c77e98","type":"ui_ui_control","z":"ce748393.37497","name":"ui control","x":200,"y":540,"wires":[[]]},{"id":"481debe5.aa0384","type":"ui_button","z":"ce748393.37497","name":"","group":"dfc5d4c9.3d5458","order":1,"width":"7","height":"1","passthru":false,"label":"Change Settings Pin","color":"","bgcolor":"","icon":"","payload":"SettingsPin","payloadType":"str","topic":"","x":460,"y":160,"wires":[["82ad53.1bfbc2b"]]},{"id":"82ad53.1bfbc2b","type":"ui_ui_control","z":"ce748393.37497","name":"ui control","x":640,"y":160,"wires":[[]]},{"id":"146c974d.828049","type":"change","z":"ce748393.37497","name":"","rules":[{"t":"set","p":"pin","pt":"global","to":"password","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":1010,"y":900,"wires":[[]]},{"id":"ee8df78b.bc9478","type":"change","z":"ce748393.37497","name":"","rules":[{"t":"set","p":"payload","pt":"msg","to":"Pin Saved","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":1020,"y":860,"wires":[["39a00ed9.ca8222"]]},{"id":"1b89ad82.8fc392","type":"change","z":"ce748393.37497","name":"","rules":[{"t":"set","p":"password","pt":"msg","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":410,"y":880,"wires":[["ef7e5a85.21a3e8"]]},{"id":"ef7e5a85.21a3e8","type":"template","z":"ce748393.37497","name":"","field":"payload","fieldType":"msg","format":"handlebars","syntax":"mustache","template":"Are you sure you want to change the pin to {{password}}?","output":"str","x":570,"y":880,"wires":[["2c44f6dd.e9bd6a"]]},{"id":"99065f7d.b352b","type":"switch","z":"ce748393.37497","name":"","property":"payload","propertyType":"msg","rules":[{"t":"eq","v":"OK","vt":"str"},{"t":"else"}],"checkall":"true","repair":false,"outputs":2,"x":850,"y":880,"wires":[["ee8df78b.bc9478","146c974d.828049","bba0879f.df31d8"],[]]},{"id":"39a00ed9.ca8222","type":"ui_toast","z":"ce748393.37497","position":"top right","displayTime":"3","highlight":"","outputs":0,"ok":"OK","cancel":"","topic":"","name":"","x":1210,"y":860,"wires":[]},{"id":"2c44f6dd.e9bd6a","type":"ui_toast","z":"ce748393.37497","position":"dialog","displayTime":"3","highlight":"","outputs":1,"ok":"OK","cancel":"Cancel","topic":"","name":"","x":710,"y":880,"wires":[["99065f7d.b352b"]]},{"id":"59b738ef.af4b58","type":"comment","z":"ce748393.37497","name":"Lock change","info":"","x":90,"y":620,"wires":[]},{"id":"83d15cc9.04f51","type":"ui_button","z":"ce748393.37497","name":"","group":"495909b6.a97da8","order":2,"width":"2","height":"2","passthru":false,"label":"1","color":"","bgcolor":"","icon":"","payload":"1","payloadType":"str","topic":"","x":50,"y":700,"wires":[["90d02ecd.fb44c"]]},{"id":"90d02ecd.fb44c","type":"join","z":"ce748393.37497","name":"","mode":"custom","build":"string","property":"payload","propertyType":"msg","key":"topic","joiner":"","joinerType":"str","accumulate":false,"timeout":"","count":"","reduceRight":false,"reduceExp":"","reduceInit":"","reduceInitType":"","reduceFixup":"","x":250,"y":880,"wires":[["1b89ad82.8fc392"]]},{"id":"2a565c40.fd9e64","type":"ui_button","z":"ce748393.37497","name":"","group":"495909b6.a97da8","order":3,"width":"2","height":"2","passthru":false,"label":"2","color":"","bgcolor":"","icon":"","payload":"2","payloadType":"str","topic":"","x":50,"y":740,"wires":[["90d02ecd.fb44c"]]},{"id":"a96a127.96d82f","type":"ui_button","z":"ce748393.37497","name":"","group":"495909b6.a97da8","order":4,"width":"2","height":"2","passthru":false,"label":"3","color":"","bgcolor":"","icon":"","payload":"3","payloadType":"str","topic":"","x":50,"y":780,"wires":[["90d02ecd.fb44c"]]},{"id":"be3ef678.4b3448","type":"ui_button","z":"ce748393.37497","name":"","group":"495909b6.a97da8","order":5,"width":"2","height":"2","passthru":false,"label":"4","color":"","bgcolor":"","icon":"","payload":"4","payloadType":"str","topic":"","x":50,"y":820,"wires":[["90d02ecd.fb44c"]]},{"id":"d7cd6cbf.67dcf","type":"ui_button","z":"ce748393.37497","name":"","group":"495909b6.a97da8","order":6,"width":"2","height":"2","passthru":false,"label":"5","color":"","bgcolor":"","icon":"","payload":"5","payloadType":"str","topic":"","x":50,"y":860,"wires":[["90d02ecd.fb44c"]]},{"id":"d10c9e53.5cc0e","type":"ui_button","z":"ce748393.37497","name":"","group":"495909b6.a97da8","order":7,"width":"2","height":"2","passthru":false,"label":"6","color":"","bgcolor":"","icon":"","payload":"6","payloadType":"str","topic":"","x":50,"y":900,"wires":[["90d02ecd.fb44c"]]},{"id":"5eb118c4.f65898","type":"ui_button","z":"ce748393.37497","name":"","group":"495909b6.a97da8","order":8,"width":"2","height":"2","passthru":false,"label":"7","color":"","bgcolor":"","icon":"","payload":"7","payloadType":"str","topic":"","x":50,"y":940,"wires":[["90d02ecd.fb44c"]]},{"id":"4fca947d.4b7c9c","type":"ui_button","z":"ce748393.37497","name":"","group":"495909b6.a97da8","order":9,"width":"2","height":"2","passthru":false,"label":"8","color":"","bgcolor":"","icon":"","payload":"8","payloadType":"str","topic":"","x":50,"y":980,"wires":[["90d02ecd.fb44c"]]},{"id":"ed3589fd.ea1908","type":"ui_button","z":"ce748393.37497","name":"","group":"495909b6.a97da8","order":10,"width":"2","height":"2","passthru":false,"label":"9","color":"","bgcolor":"","icon":"","payload":"9","payloadType":"str","topic":"","x":50,"y":1020,"wires":[["90d02ecd.fb44c"]]},{"id":"103b74dc.c0e49b","type":"ui_button","z":"ce748393.37497","name":"","group":"495909b6.a97da8","order":12,"width":"2","height":"2","passthru":false,"label":"0","color":"","bgcolor":"","icon":"","payload":"0","payloadType":"str","topic":"","x":50,"y":1060,"wires":[["90d02ecd.fb44c"]]},{"id":"ea9a1a65.1ed6b8","type":"ui_button","z":"ce748393.37497","name":"","group":"495909b6.a97da8","order":11,"width":"2","height":"2","passthru":false,"label":"CANCEL","color":"","bgcolor":"red","icon":"","payload":"Settings","payloadType":"str","topic":"","x":60,"y":1140,"wires":[["e1af9715.f49f08"]]},{"id":"a04ef846.132d18","type":"ui_button","z":"ce748393.37497","name":"","group":"495909b6.a97da8","order":13,"width":"2","height":"2","passthru":false,"label":"","color":"","bgcolor":"green","icon":"fa-check","payload":"","payloadType":"str","topic":"","x":50,"y":1100,"wires":[["7712af2f.f1371"]]},{"id":"d4f24c41.bcc7d","type":"ui_text","z":"ce748393.37497","group":"495909b6.a97da8","order":1,"width":"6","height":"1","name":"","label":"","format":"{{msg.payload}}","layout":"col-center","x":550,"y":780,"wires":[]},{"id":"d4a4ba43.dcee58","type":"inject","z":"ce748393.37497","name":"","topic":"","payload":" Enter New Lock Pin","payloadType":"str","repeat":"","crontab":"","once":true,"onceDelay":"0","x":360,"y":780,"wires":[["d4f24c41.bcc7d"]]},{"id":"f91d0de9.d8593","type":"change","z":"ce748393.37497","name":"","rules":[{"t":"set","p":"complete","pt":"msg","to":"","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":410,"y":1100,"wires":[["90d02ecd.fb44c"]]},{"id":"7712af2f.f1371","type":"change","z":"ce748393.37497","name":"","rules":[{"t":"delete","p":"payload","pt":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":210,"y":1100,"wires":[["f91d0de9.d8593"]]},{"id":"e1af9715.f49f08","type":"ui_ui_control","z":"ce748393.37497","name":"ui control","x":200,"y":1140,"wires":[[]]},{"id":"368d2693.befe0a","type":"ui_button","z":"ce748393.37497","name":"","group":"dfc5d4c9.3d5458","order":4,"width":"7","height":"1","passthru":false,"label":"Change Lock Pin","color":"","bgcolor":"","icon":"","payload":"LockPin","payloadType":"str","topic":"","x":350,"y":740,"wires":[["260d902f.313de"]]},{"id":"260d902f.313de","type":"ui_ui_control","z":"ce748393.37497","name":"ui control","x":540,"y":740,"wires":[[]]},{"id":"bba0879f.df31d8","type":"change","z":"ce748393.37497","name":"","rules":[{"t":"set","p":"payload","pt":"msg","to":"Settings","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":1020,"y":820,"wires":[["6ec1af51.db08"]]},{"id":"6ec1af51.db08","type":"ui_ui_control","z":"ce748393.37497","name":"ui control","x":1180,"y":820,"wires":[[]]},{"id":"4cfee538.1cc1ac","type":"change","z":"ce748393.37497","name":"","rules":[{"t":"set","p":"payload","pt":"msg","to":"Settings","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":1020,"y":220,"wires":[["8f1da8d5.4c39b8"]]},{"id":"8f1da8d5.4c39b8","type":"ui_ui_control","z":"ce748393.37497","name":"ui control","x":1180,"y":220,"wires":[[]]},{"id":"8e5ccb96.b376f8","type":"ui_template","z":"ce748393.37497","group":"2f444df3.abb892","name":"No Scrolling","order":0,"width":0,"height":0,"format":"<style>     \n* {overflow: hidden !important }   \n  </style>","storeOutMessages":true,"fwdInMessages":true,"templateScope":"local","x":630,"y":360,"wires":[[]]},{"id":"3e8f7777.34bdf8","type":"ui_template","z":"ce748393.37497","group":"1c5684d5.0e8f2b","name":"No Scrolling","order":0,"width":0,"height":0,"format":"<style>     \n* {overflow: hidden !important }   \n  </style>","storeOutMessages":true,"fwdInMessages":true,"templateScope":"local","x":630,"y":400,"wires":[[]]},{"id":"3caf18f3.5c4d18","type":"ui_template","z":"ce748393.37497","group":"4397ce70.bb04e","name":"No Scrolling","order":0,"width":0,"height":0,"format":"<style>     \n* {overflow: hidden !important }   \n  </style>","storeOutMessages":true,"fwdInMessages":true,"templateScope":"local","x":630,"y":440,"wires":[[]]},{"id":"2a8608ac.cd82c8","type":"ui_template","z":"ce748393.37497","group":"495909b6.a97da8","name":"No Scrolling","order":0,"width":0,"height":0,"format":"<style>     \n* {overflow: hidden !important }   \n  </style>","storeOutMessages":true,"fwdInMessages":true,"templateScope":"local","x":630,"y":480,"wires":[[]]},{"id":"3e382a9f.7b8346","type":"ui_template","z":"ce748393.37497","group":"a9e39f72.184aa","name":"No Scrolling","order":0,"width":0,"height":0,"format":"<style>     \n* {overflow: hidden !important }   \n  </style>","storeOutMessages":true,"fwdInMessages":true,"templateScope":"local","x":630,"y":520,"wires":[[]]},{"id":"8002672e.410458","type":"ui_template","z":"ce748393.37497","group":"f2b23ffd.ffc66","name":"No Scrolling","order":0,"width":0,"height":0,"format":"<style>     \n* {overflow: hidden !important }   \n  </style>","storeOutMessages":true,"fwdInMessages":true,"templateScope":"local","x":630,"y":560,"wires":[[]]},{"id":"c9f4d2f0.1f4b1","type":"change","z":"ce748393.37497","name":"","rules":[{"t":"set","p":"complete","pt":"msg","to":"","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":1270,"y":1800,"wires":[["14202071.2d3fc"]]},{"id":"50148c10.d3f844","type":"debug","z":"ce748393.37497","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","x":1370,"y":1480,"wires":[]},{"id":"769d69de.b7d708","type":"change","z":"ce748393.37497","name":"","rules":[{"t":"set","p":"payload","pt":"msg","to":"Engineer","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":540,"y":1500,"wires":[["2025f196.0a316e"]]},{"id":"2025f196.0a316e","type":"ui_ui_control","z":"ce748393.37497","name":"ui control","x":700,"y":1500,"wires":[[]]},{"id":"1bda1fa2.e266c","type":"ui_template","z":"ce748393.37497","group":"ae13bd2b.c1248","name":"No Scrolling","order":0,"width":0,"height":0,"format":"<style>     \n* {overflow: hidden !important }   \n  </style>","storeOutMessages":true,"fwdInMessages":true,"templateScope":"local","x":630,"y":600,"wires":[[]]},{"id":"a1cb654f.ee33b8","type":"ui_template","z":"ce748393.37497","group":"97a7f741.5cbb08","name":"No Scrolling","order":0,"width":0,"height":0,"format":"<style>     \n* {overflow: hidden !important }   \n  </style>","storeOutMessages":true,"fwdInMessages":true,"templateScope":"local","x":630,"y":640,"wires":[[]]},{"id":"99725bcd.db4888","type":"ui_button","z":"d38e360e.d0a058","name":"","group":"dfc5d4c9.3d5458","order":3,"width":"3","height":"1","passthru":false,"label":"Show Settings PIN","color":"","bgcolor":"#333333","icon":"","payload":"password","payloadType":"global","topic":"","x":1390,"y":360,"wires":[["4d20029c.4222ac","1b5b2530.3291eb"]]},{"id":"15746f63.7bd6b1","type":"ui_button","z":"d38e360e.d0a058","name":"","group":"dfc5d4c9.3d5458","order":6,"width":"3","height":"1","passthru":false,"label":"Show Lock PIN","color":"","bgcolor":"#333333","icon":"","payload":"pin","payloadType":"global","topic":"","x":1400,"y":440,"wires":[["ff22fd98.c0fa2","32b5cd06.a8b602"]]},{"id":"4d20029c.4222ac","type":"ui_text","z":"d38e360e.d0a058","group":"dfc5d4c9.3d5458","order":2,"width":"3","height":"1","name":"Settings PW","label":"","format":"{{msg.payload}}","layout":"col-center","x":1890,"y":360,"wires":[]},{"id":"ff22fd98.c0fa2","type":"ui_text","z":"d38e360e.d0a058","group":"dfc5d4c9.3d5458","order":5,"width":"3","height":"1","name":"Lock PW","label":"","format":"{{msg.payload}}","layout":"col-center","x":1880,"y":440,"wires":[]},{"id":"1b5b2530.3291eb","type":"change","z":"d38e360e.d0a058","name":"","rules":[{"t":"set","p":"payload","pt":"msg","to":"","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":1580,"y":320,"wires":[["ca22f3a2.c0758"]]},{"id":"ca22f3a2.c0758","type":"delay","z":"d38e360e.d0a058","name":"","pauseType":"delay","timeout":"5","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":1740,"y":320,"wires":[["4d20029c.4222ac"]]},{"id":"32b5cd06.a8b602","type":"change","z":"d38e360e.d0a058","name":"","rules":[{"t":"set","p":"payload","pt":"msg","to":"","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":1580,"y":400,"wires":[["eb276bae.4087b8"]]},{"id":"eb276bae.4087b8","type":"delay","z":"d38e360e.d0a058","name":"","pauseType":"delay","timeout":"5","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":1740,"y":400,"wires":[["ff22fd98.c0fa2"]]},{"id":"fa94525.a03a9b","type":"comment","z":"d38e360e.d0a058","name":"Settings Pin Display","info":"","x":1420,"y":260,"wires":[]},{"id":"1b1dfd58.73c593","type":"ui_dropdown","z":"d38e360e.d0a058","name":"","label":"Select Pager","place":"Select Pager","group":"76f12122.4cb25","order":1,"width":0,"height":0,"passthru":true,"options":[{"label":"","value":"","type":"str"}],"payload":"","topic":"","x":310,"y":3280,"wires":[["1b3f0faf.460cf"]]},{"id":"aaa1e59a.51be48","type":"link in","z":"d38e360e.d0a058","name":"","links":["58a649e5.feceb8"],"x":195,"y":3280,"wires":[["1b1dfd58.73c593"]]},{"id":"286bab3a.757e44","type":"ui_text_input","z":"d38e360e.d0a058","name":"","label":"Enter Alias","group":"76f12122.4cb25","order":3,"width":"4","height":"1","passthru":true,"mode":"text","delay":300,"topic":"","x":310,"y":3320,"wires":[["ea768039.00fd"]]},{"id":"868d9a29.460898","type":"ui_button","z":"d38e360e.d0a058","name":"","group":"76f12122.4cb25","order":4,"width":"2","height":"1","passthru":false,"label":"Change","color":"","bgcolor":"","icon":"","payload":"","payloadType":"str","topic":"","x":300,"y":3360,"wires":[["6ef4b3f4.e3810c","3cda32b.8e5a1ce"]]},{"id":"6ef4b3f4.e3810c","type":"delay","z":"d38e360e.d0a058","name":"","pauseType":"delay","timeout":"1","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":420,"y":3360,"wires":[["19f1c288.6d855d","fcefdd61.01389","b8cdb31d.b59e5"]]},{"id":"ea768039.00fd","type":"change","z":"d38e360e.d0a058","name":"","rules":[{"t":"set","p":"PagerAlias","pt":"flow","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":490,"y":3320,"wires":[[]]},{"id":"1b3f0faf.460cf","type":"change","z":"d38e360e.d0a058","name":"","rules":[{"t":"set","p":"PagerAliasID","pt":"flow","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":500,"y":3280,"wires":[["28e907a5.7031c8"]]},{"id":"19f1c288.6d855d","type":"template","z":"d38e360e.d0a058","name":"","field":"topic","fieldType":"msg","format":"handlebars","syntax":"mustache","template":"UPDATE `pager` SET `alias` = '{{flow.PagerAlias}}' WHERE `pager`.`ID` = {{flow.PagerAliasID}}","output":"str","x":550,"y":3360,"wires":[["d5989e82.84795","92237612.b8d058"]]},{"id":"d5989e82.84795","type":"mysql","z":"d38e360e.d0a058","mydb":"48facf19.f3141","name":"","x":680,"y":3360,"wires":[[]]},{"id":"58a649e5.feceb8","type":"link out","z":"d38e360e.d0a058","name":"Pager ID","links":["aaa1e59a.51be48","40b06a91.51a9d4","70462c8e.abf6f4"],"x":1435,"y":2740,"wires":[]},{"id":"15524596.a1d12a","type":"debug","z":"d38e360e.d0a058","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"options","x":1290,"y":2780,"wires":[]},{"id":"d1223e3b.1cd0b","type":"function","z":"d38e360e.d0a058","name":"","func":"var input = msg.payload\nvar array =  context.global.pagerarrayIDava;\nvar add = array.push(input)\nmsg.options = array;\nreturn msg;","outputs":1,"noerr":0,"x":1150,"y":2740,"wires":[["15524596.a1d12a","81f6e58c.263fc8"]]},{"id":"81f6e58c.263fc8","type":"change","z":"d38e360e.d0a058","name":"","rules":[{"t":"delete","p":"payload","pt":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":1310,"y":2740,"wires":[["58a649e5.feceb8"]]},{"id":"fcefdd61.01389","type":"change","z":"d38e360e.d0a058","name":"","rules":[{"t":"set","p":"payload","pt":"msg","to":"Alias Changed","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":580,"y":3400,"wires":[["54ead9d5.8b8f08"]]},{"id":"54ead9d5.8b8f08","type":"change","z":"d38e360e.d0a058","name":"","rules":[{"t":"set","p":"topic","pt":"msg","to":"Success","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":750,"y":3400,"wires":[["a0daf98f.764268"]]},{"id":"a0daf98f.764268","type":"ui_toast","z":"d38e360e.d0a058","position":"dialog","displayTime":"3","highlight":"","outputs":1,"ok":"OK","cancel":"","topic":"","name":"","x":910,"y":3400,"wires":[["28e907a5.7031c8"]]},{"id":"b8cdb31d.b59e5","type":"change","z":"d38e360e.d0a058","name":"","rules":[{"t":"set","p":"payload","pt":"msg","to":"","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":580,"y":3440,"wires":[["286bab3a.757e44"]]},{"id":"92237612.b8d058","type":"debug","z":"d38e360e.d0a058","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"topic","x":680,"y":3320,"wires":[]},{"id":"7fb7ca05.2d6294","type":"delay","z":"d38e360e.d0a058","name":"","pauseType":"delay","timeout":"1","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":300,"y":2920,"wires":[["72840ef8.aa04c"]]},{"id":"1c1f0960.ec5727","type":"delay","z":"d38e360e.d0a058","name":"","pauseType":"delay","timeout":"1","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":280,"y":2700,"wires":[["6abfb4e8.ef199c"]]},{"id":"c505ec9a.51217","type":"inject","z":"d38e360e.d0a058","name":"","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":160,"y":2780,"wires":[["6abfb4e8.ef199c","72840ef8.aa04c"]]},{"id":"2fe244f0.f4d38c","type":"debug","z":"d38e360e.d0a058","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","x":1030,"y":2640,"wires":[]},{"id":"15649bee.9e1354","type":"json","z":"d38e360e.d0a058","name":"","property":"payload","action":"","pretty":false,"x":1030,"y":2740,"wires":[["d1223e3b.1cd0b"]]},{"id":"2a799112.a7931e","type":"function","z":"d38e360e.d0a058","name":"","func":"var ID = msg.payload.ID;\n\nvar user = \"{\\\"\" + ID + \"\\\":\\\"\" + ID + \"\\\"}\";\nmsg.payload= user\nreturn msg;","outputs":1,"noerr":0,"x":910,"y":2740,"wires":[["15649bee.9e1354"]]},{"id":"73461ff3.b94db","type":"comment","z":"d38e360e.d0a058","name":"ID and Capcode","info":"","x":1590,"y":2700,"wires":[]},{"id":"11b02eb2.33a7a1","type":"comment","z":"d38e360e.d0a058","name":"ID Only","info":"","x":1570,"y":2740,"wires":[]},{"id":"28e907a5.7031c8","type":"template","z":"d38e360e.d0a058","name":"","field":"topic","fieldType":"msg","format":"handlebars","syntax":"mustache","template":"SELECT alias FROM pager\nWHERE ID = '{{flow.PagerAliasID}}';","output":"str","x":670,"y":3280,"wires":[["d1732330.990c8"]]},{"id":"d1732330.990c8","type":"mysql","z":"d38e360e.d0a058","mydb":"48facf19.f3141","name":"","x":800,"y":3280,"wires":[["8dd9690b.8da6f8"]]},{"id":"1773bc2f.cc5c34","type":"ui_text","z":"d38e360e.d0a058","group":"76f12122.4cb25","order":2,"width":"6","height":"1","name":"","label":"Current Alias","format":"{{msg.payload.alias}}","layout":"row-left","x":1070,"y":3280,"wires":[]},{"id":"8dd9690b.8da6f8","type":"split","z":"d38e360e.d0a058","name":"","splt":",","spltType":"str","arraySplt":1,"arraySpltType":"len","stream":true,"addname":"","x":930,"y":3280,"wires":[["1773bc2f.cc5c34"]]},{"id":"3cda32b.8e5a1ce","type":"change","z":"d38e360e.d0a058","name":"","rules":[{"t":"delete","p":"PagerAliasID","pt":"flow"}],"action":"","property":"","from":"","to":"","reg":false,"x":610,"y":3480,"wires":[["1b3f0faf.460cf"]]},{"id":"60cc4da1.bec194","type":"comment","z":"d38e360e.d0a058","name":"Pager Alias","info":"","x":260,"y":3220,"wires":[]},{"id":"f527581e.554468","type":"ui_text_input","z":"d38e360e.d0a058","name":"","label":"Enter New Group Name","group":"1fb7dd0f.f1eb93","order":1,"width":"4","height":"1","passthru":true,"mode":"text","delay":300,"topic":"","x":290,"y":3700,"wires":[["3c0303fd.371d0c"]]},{"id":"c268c21c.2c57e","type":"ui_button","z":"d38e360e.d0a058","name":"","group":"1fb7dd0f.f1eb93","order":2,"width":"2","height":"1","passthru":false,"label":"Add","color":"","bgcolor":"","icon":"","payload":"","payloadType":"str","topic":"","x":230,"y":3740,"wires":[["d915f5dc.d0a268","8da6e7b8.2565b8"]]},{"id":"d915f5dc.d0a268","type":"delay","z":"d38e360e.d0a058","name":"","pauseType":"delay","timeout":"1","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":360,"y":3740,"wires":[["cf8ea13e.bb739"]]},{"id":"3c0303fd.371d0c","type":"change","z":"d38e360e.d0a058","name":"","rules":[{"t":"set","p":"groupName","pt":"flow","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":520,"y":3700,"wires":[[]]},{"id":"dd4b4f87.a25c6","type":"change","z":"d38e360e.d0a058","name":"","rules":[{"t":"set","p":"payload","pt":"msg","to":"Group Added","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":780,"y":3760,"wires":[["b3b3bbe0.a86b98"]]},{"id":"b3b3bbe0.a86b98","type":"change","z":"d38e360e.d0a058","name":"","rules":[{"t":"set","p":"topic","pt":"msg","to":"Success","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":950,"y":3760,"wires":[["e52a3024.4d69f"]]},{"id":"e52a3024.4d69f","type":"ui_toast","z":"d38e360e.d0a058","position":"dialog","displayTime":"3","highlight":"","outputs":1,"ok":"OK","cancel":"","topic":"","name":"","x":1110,"y":3760,"wires":[[]]},{"id":"cf8ea13e.bb739","type":"template","z":"d38e360e.d0a058","name":"","field":"topic","fieldType":"msg","format":"handlebars","syntax":"mustache","template":"INSERT INTO `PagerGroups` (`GroupName`) VALUES ('{{flow.groupName}}')","output":"str","x":490,"y":3740,"wires":[["c7d23868.5d48a8"]]},{"id":"c7d23868.5d48a8","type":"mysql","z":"d38e360e.d0a058","mydb":"48facf19.f3141","name":"","x":620,"y":3740,"wires":[["dd4b4f87.a25c6","bd780373.775a8"]]},{"id":"8ef2c906.a6b8b8","type":"comment","z":"d38e360e.d0a058","name":"Add Group","info":"","x":240,"y":3660,"wires":[]},{"id":"4f49487.cc316b8","type":"inject","z":"4e0e89ca.492d38","name":"Add PagerGroups","topic":"CREATE TABLE `PagerGroups` (  `GroupName` varchar(20) NOT NULL,  `AssignedPagers` text NOT NULL,  PRIMARY KEY (`GroupName`) ) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4","payload":"","payloadType":"str","repeat":"","crontab":"","once":true,"onceDelay":"10","x":150,"y":580,"wires":[["a39ab9b8.b17cc8"]]},{"id":"bd780373.775a8","type":"change","z":"d38e360e.d0a058","name":"","rules":[{"t":"delete","p":"groupName","pt":"flow"}],"action":"","property":"","from":"","to":"","reg":false,"x":800,"y":3720,"wires":[[]]},{"id":"ac150fb0.8e56","type":"ui_button","z":"d38e360e.d0a058","name":"","group":"1fb7dd0f.f1eb93","order":4,"width":"2","height":"1","passthru":false,"label":"Remove","color":"","bgcolor":"","icon":"","payload":"groupNameRemove","payloadType":"flow","topic":"","x":240,"y":3940,"wires":[["1c914ac7.eaf825","41c49abe.09a624"]]},{"id":"1c914ac7.eaf825","type":"delay","z":"d38e360e.d0a058","name":"","pauseType":"delay","timeout":"1","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":380,"y":3940,"wires":[["d9a797ba.d05ca8"]]},{"id":"9c6d419d.87dfe","type":"change","z":"d38e360e.d0a058","name":"","rules":[{"t":"set","p":"groupNameRemove","pt":"flow","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":500,"y":3900,"wires":[[]]},{"id":"3e8c2881.9900d8","type":"change","z":"d38e360e.d0a058","name":"","rules":[{"t":"set","p":"payload","pt":"msg","to":"Group Removed","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":800,"y":3960,"wires":[["73e5cb5a.5d75e4"]]},{"id":"73e5cb5a.5d75e4","type":"change","z":"d38e360e.d0a058","name":"","rules":[{"t":"set","p":"topic","pt":"msg","to":"Success","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":970,"y":3960,"wires":[["7108377c.5b56c8"]]},{"id":"7108377c.5b56c8","type":"ui_toast","z":"d38e360e.d0a058","position":"dialog","displayTime":"3","highlight":"","outputs":1,"ok":"OK","cancel":"","topic":"","name":"","x":1130,"y":3960,"wires":[[]]},{"id":"d9a797ba.d05ca8","type":"template","z":"d38e360e.d0a058","name":"","field":"topic","fieldType":"msg","format":"handlebars","syntax":"mustache","template":"DELETE FROM `PagerGroups` WHERE `PagerGroups`.`GroupName` = '{{payload}}'","output":"str","x":510,"y":3940,"wires":[["2717908f.2e4ea","c0fa83d8.90c15"]]},{"id":"2717908f.2e4ea","type":"mysql","z":"d38e360e.d0a058","mydb":"48facf19.f3141","name":"","x":640,"y":3940,"wires":[["9fa72029.d867","3e8c2881.9900d8"]]},{"id":"79e0cb8.c094034","type":"comment","z":"d38e360e.d0a058","name":"Remove Group","info":"","x":260,"y":3860,"wires":[]},{"id":"9fa72029.d867","type":"change","z":"d38e360e.d0a058","name":"","rules":[{"t":"delete","p":"groupNameRemove","pt":"flow"}],"action":"","property":"","from":"","to":"","reg":false,"x":850,"y":3920,"wires":[[]]},{"id":"8b469712.994298","type":"ui_dropdown","z":"d38e360e.d0a058","name":"","label":"Group to Remove","place":"Select Group","group":"1fb7dd0f.f1eb93","order":3,"width":"4","height":"1","passthru":true,"options":[{"label":"","value":"","type":"str"}],"payload":"","topic":"","x":270,"y":3900,"wires":[["9c6d419d.87dfe"]]},{"id":"2b411731.616338","type":"link out","z":"d38e360e.d0a058","name":"Group","links":["92b86c46.01f03","8ea59f19.74dc1"],"x":1455,"y":3040,"wires":[]},{"id":"88f464aa.b6d608","type":"debug","z":"d38e360e.d0a058","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"options","x":1310,"y":3000,"wires":[]},{"id":"294b8982.f62516","type":"json","z":"d38e360e.d0a058","name":"","property":"payload","action":"","pretty":false,"x":1050,"y":3040,"wires":[["836b843c.d017e8"]]},{"id":"836b843c.d017e8","type":"function","z":"d38e360e.d0a058","name":"","func":"var input = msg.payload\nvar array =  context.global.GroupArray;\nvar add = array.push(input)\nmsg.options = array;\nreturn msg;","outputs":1,"noerr":0,"x":1170,"y":3040,"wires":[["88f464aa.b6d608","3238f8ca.4472f8"]]},{"id":"2792ca61.1b2236","type":"template","z":"d38e360e.d0a058","name":"","field":"topic","fieldType":"msg","format":"handlebars","syntax":"mustache","template":"SELECT `GroupName` FROM `PagerGroups`;","output":"str","x":430,"y":3040,"wires":[["d49fc8ab.a57258","10168623.d46eca","12b2fac5.d448c5"]]},{"id":"be9f4827.bb1228","type":"split","z":"d38e360e.d0a058","name":"","splt":",","spltType":"str","arraySplt":1,"arraySpltType":"len","stream":true,"addname":"","x":690,"y":3040,"wires":[["b1aa13f4.21459"]]},{"id":"3238f8ca.4472f8","type":"change","z":"d38e360e.d0a058","name":"","rules":[{"t":"delete","p":"payload","pt":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":1330,"y":3040,"wires":[["2b411731.616338"]]},{"id":"29e0c64e.33540a","type":"ui_ui_control","z":"d38e360e.d0a058","name":"","x":160,"y":3040,"wires":[["5a633dec.d45e44"]]},{"id":"d49fc8ab.a57258","type":"mysql","z":"d38e360e.d0a058","mydb":"48facf19.f3141","name":"","x":560,"y":3040,"wires":[["be9f4827.bb1228"]]},{"id":"b1aa13f4.21459","type":"json","z":"d38e360e.d0a058","name":"","property":"payload","action":"obj","pretty":false,"x":810,"y":3040,"wires":[["f222ddad.6ff43"]]},{"id":"f222ddad.6ff43","type":"function","z":"d38e360e.d0a058","name":"","func":"var name = msg.payload.GroupName;\nvar user = \"{\\\"\" + name + \"\\\":\\\"\" + name + \"\\\"}\";\nmsg.payload= user;\nreturn msg;","outputs":1,"noerr":0,"x":930,"y":3040,"wires":[["294b8982.f62516"]]},{"id":"10168623.d46eca","type":"function","z":"d38e360e.d0a058","name":"","func":"context.global.GroupArray = [];\nreturn msg;","outputs":1,"noerr":0,"x":570,"y":3100,"wires":[[]]},{"id":"198f7402.676afc","type":"comment","z":"d38e360e.d0a058","name":"Group Select","info":"","x":370,"y":3000,"wires":[]},{"id":"5a633dec.d45e44","type":"delay","z":"d38e360e.d0a058","name":"","pauseType":"delay","timeout":"1","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":300,"y":3040,"wires":[["2792ca61.1b2236"]]},{"id":"92b86c46.01f03","type":"link in","z":"d38e360e.d0a058","name":"","links":["2b411731.616338"],"x":140,"y":3900,"wires":[["8b469712.994298"]]},{"id":"b93cceac.40564","type":"link in","z":"d38e360e.d0a058","name":"Group Remove update","links":["41c49abe.09a624","8da6e7b8.2565b8","22387433.c90b8c","a4850738.8aa938"],"x":335,"y":3080,"wires":[["2792ca61.1b2236"]]},{"id":"41c49abe.09a624","type":"link out","z":"d38e360e.d0a058","name":"","links":["b93cceac.40564","bf3920fd.d1511","c551c4a3.c0de98"],"x":335,"y":3980,"wires":[]},{"id":"8da6e7b8.2565b8","type":"link out","z":"d38e360e.d0a058","name":"","links":["b93cceac.40564","bf3920fd.d1511","c551c4a3.c0de98"],"x":315,"y":3780,"wires":[]},{"id":"12b2fac5.d448c5","type":"debug","z":"d38e360e.d0a058","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"topic","x":620,"y":3160,"wires":[]},{"id":"2bf51374.b188dc","type":"inject","z":"d38e360e.d0a058","name":"","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":180,"y":3120,"wires":[["2792ca61.1b2236"]]},{"id":"c0fa83d8.90c15","type":"debug","z":"d38e360e.d0a058","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"topic","x":640,"y":4000,"wires":[]},{"id":"f026780b.023ba8","type":"catch","z":"d38e360e.d0a058","name":"","scope":["2717908f.2e4ea"],"x":640,"y":3860,"wires":[["3f3ad8e.51c4428"]]},{"id":"3f3ad8e.51c4428","type":"debug","z":"d38e360e.d0a058","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","x":770,"y":3860,"wires":[]},{"id":"7f93d17e.3afb7","type":"ui_dropdown","z":"d38e360e.d0a058","name":"","label":"Group","place":"Select Group","group":"1af09e9.b978c61","order":1,"width":"6","height":"1","passthru":true,"options":[{"label":"","value":"","type":"str"}],"payload":"","topic":"","x":270,"y":4160,"wires":[["d33347db.2a5af8"]]},{"id":"65224d0c.fd5314","type":"ui_button","z":"d38e360e.d0a058","name":"","group":"1af09e9.b978c61","order":3,"width":0,"height":0,"passthru":false,"label":"Add","color":"","bgcolor":"","icon":"","payload":"","payloadType":"str","topic":"","x":270,"y":4320,"wires":[["3f078c82.464e24"]]},{"id":"1e4af8b.1ba4207","type":"ui_dropdown","z":"d38e360e.d0a058","name":"","label":"User","place":"Select User","group":"1af09e9.b978c61","order":2,"width":"6","height":"1","passthru":true,"options":[{"label":"","value":"","type":"str"}],"payload":"","topic":"","x":270,"y":4200,"wires":[["4218e0c1.44b41"]]},{"id":"78fc0860.cad9e8","type":"ui_button","z":"d38e360e.d0a058","name":"","group":"1af09e9.b978c61","order":4,"width":0,"height":0,"passthru":false,"label":"Remove","color":"","bgcolor":"","icon":"","payload":"","payloadType":"str","topic":"","x":260,"y":4380,"wires":[["3eead36d.aa80cc"]]},{"id":"8ea59f19.74dc1","type":"link in","z":"d38e360e.d0a058","name":"","links":["2b411731.616338"],"x":175,"y":4160,"wires":[["7f93d17e.3afb7"]]},{"id":"d33347db.2a5af8","type":"change","z":"d38e360e.d0a058","name":"","rules":[{"t":"set","p":"groupToAddTo","pt":"global","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":450,"y":4160,"wires":[[]]},{"id":"eb86c74f.c7ca48","type":"change","z":"d38e360e.d0a058","name":"","rules":[{"t":"delete","p":"groupToAddTo","pt":"global"}],"action":"","property":"","from":"","to":"","reg":false,"x":1340,"y":4400,"wires":[["e04becb5.e6bbf"]]},{"id":"e04becb5.e6bbf","type":"change","z":"d38e360e.d0a058","name":"","rules":[{"t":"delete","p":"PagerToAdd","pt":"global"}],"action":"","property":"","from":"","to":"","reg":false,"x":1590,"y":4400,"wires":[[]]},{"id":"3f078c82.464e24","type":"template","z":"d38e360e.d0a058","name":"","field":"topic","fieldType":"msg","format":"handlebars","syntax":"mustache","template":"SELECT AssignedPagers FROM PagerGroups\nWHERE GroupName = '{{global.groupToAddTo}}';","output":"str","x":390,"y":4320,"wires":[["8df120b9.95a09","71412e4.f72b5d"]]},{"id":"8df120b9.95a09","type":"mysql","z":"d38e360e.d0a058","mydb":"48facf19.f3141","name":"","x":520,"y":4320,"wires":[["b459e071.4c4ac"]]},{"id":"71412e4.f72b5d","type":"debug","z":"d38e360e.d0a058","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"topic","x":520,"y":4280,"wires":[]},{"id":"4218e0c1.44b41","type":"change","z":"d38e360e.d0a058","name":"","rules":[{"t":"set","p":"PagerToAdd","pt":"global","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":440,"y":4200,"wires":[[]]},{"id":"5d634fa1.12e45","type":"comment","z":"d38e360e.d0a058","name":"Assign to Group","info":"","x":280,"y":4100,"wires":[]},{"id":"8c01ebc8.20b088","type":"function","z":"d38e360e.d0a058","name":"","func":"var existing = context.global.ExistingGroups.AssignedPagers;\nvar toAdd = context.global.PagerToAdd;\nvar array = [];\narray = existing.split(\",\");\narray.push(toAdd);\nmsg.payload = array\n//msg.ExistingGroups = existing\n//msg.toAdd = toAdd\nreturn msg;","outputs":1,"noerr":0,"x":1010,"y":4320,"wires":[["d4a2939.2bc7a7"]]},{"id":"b459e071.4c4ac","type":"split","z":"d38e360e.d0a058","name":"","splt":",","spltType":"str","arraySplt":1,"arraySpltType":"len","stream":true,"addname":"","x":650,"y":4320,"wires":[["a4cbd20.ac3d63"]]},{"id":"a4cbd20.ac3d63","type":"change","z":"d38e360e.d0a058","name":"","rules":[{"t":"set","p":"ExistingGroups","pt":"global","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":830,"y":4320,"wires":[["8c01ebc8.20b088"]]},{"id":"d4a2939.2bc7a7","type":"template","z":"d38e360e.d0a058","name":"","field":"topic","fieldType":"msg","format":"handlebars","syntax":"mustache","template":"UPDATE `PagerGroups` SET `AssignedPagers` = '{{payload}}' WHERE `PagerGroups`.`GroupName` = '{{global.groupToAddTo}}'","output":"str","x":1150,"y":4360,"wires":[["2f103ad4.cb9f66","eb86c74f.c7ca48"]]},{"id":"2f103ad4.cb9f66","type":"mysql","z":"d38e360e.d0a058","mydb":"48facf19.f3141","name":"","x":1280,"y":4360,"wires":[["53c001f1.6101","22387433.c90b8c"]]},{"id":"53c001f1.6101","type":"debug","z":"d38e360e.d0a058","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","x":1410,"y":4360,"wires":[]},{"id":"22387433.c90b8c","type":"link out","z":"d38e360e.d0a058","name":"","links":["b93cceac.40564","bf3920fd.d1511","c551c4a3.c0de98"],"x":1355,"y":4320,"wires":[]},{"id":"bf3920fd.d1511","type":"link in","z":"d38e360e.d0a058","name":"Group Remove update","links":["41c49abe.09a624","8da6e7b8.2565b8","22387433.c90b8c","a4850738.8aa938"],"x":335,"y":2740,"wires":[["6abfb4e8.ef199c"]]},{"id":"3eead36d.aa80cc","type":"template","z":"d38e360e.d0a058","name":"","field":"topic","fieldType":"msg","format":"handlebars","syntax":"mustache","template":"SELECT AssignedPagers FROM PagerGroups\nWHERE GroupName = '{{global.groupToAddTo}}';","output":"str","x":390,"y":4380,"wires":[["1240cfa6.eb42c","7b715eac.41e63"]]},{"id":"1240cfa6.eb42c","type":"mysql","z":"d38e360e.d0a058","mydb":"48facf19.f3141","name":"","x":520,"y":4380,"wires":[["ba51c55e.fb3798"]]},{"id":"7b715eac.41e63","type":"debug","z":"d38e360e.d0a058","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"topic","x":520,"y":4420,"wires":[]},{"id":"e3aa7b0f.72e398","type":"function","z":"d38e360e.d0a058","name":"","func":"var existing = context.global.ExistingGroups.AssignedPagers;\nvar toAdd = context.global.PagerToAdd;\nvar array = [];\narray = existing.split(\",\");\nvar index = array.indexOf(toAdd);\nvar removed = array.splice(index, 1);\nmsg.payload = array\n//msg.ExistingGroups = existing\n//msg.toAdd = toAdd\nreturn msg;","outputs":1,"noerr":0,"x":1010,"y":4380,"wires":[["d4a2939.2bc7a7"]]},{"id":"ba51c55e.fb3798","type":"split","z":"d38e360e.d0a058","name":"","splt":",","spltType":"str","arraySplt":1,"arraySpltType":"len","stream":true,"addname":"","x":650,"y":4380,"wires":[["c8239bf0.4ac2b8"]]},{"id":"c8239bf0.4ac2b8","type":"change","z":"d38e360e.d0a058","name":"","rules":[{"t":"set","p":"ExistingGroups","pt":"global","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":830,"y":4380,"wires":[["e3aa7b0f.72e398"]]},{"id":"ada1bb8f.f68258","type":"link in","z":"d38e360e.d0a058","name":"Recepient","links":["2268701b.44d2a","58ddfc32.be0324","c2846650.ddf7b8","66e12dd5.727374"],"x":175,"y":4200,"wires":[["1e4af8b.1ba4207"]]},{"id":"c551c4a3.c0de98","type":"link in","z":"d38e360e.d0a058","name":"Group Remove update","links":["41c49abe.09a624","8da6e7b8.2565b8","22387433.c90b8c","a4850738.8aa938"],"x":355,"y":2960,"wires":[["72840ef8.aa04c"]]}]